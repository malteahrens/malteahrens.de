<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - app/scripts/lib/mapbox-gl.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>app/scripts/lib/mapbox-gl.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">64.56</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">260</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">526.20</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">352.57</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">(function(f){if(typeof exports===&quot;object&quot;&amp;&amp;typeof module!==&quot;undefined&quot;){module.exports=f()}else if(typeof define===&quot;function&quot;&amp;&amp;define.amd){define([],f)}else{var g;if(typeof window!==&quot;undefined&quot;){g=window}else if(typeof global!==&quot;undefined&quot;){g=global}else if(typeof self!==&quot;undefined&quot;){g=self}else{g=this}g.mapboxgl = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==&quot;function&quot;&amp;&amp;require;if(!u&amp;&amp;a)return a(o,!0);if(i)return i(o,!0);var f=new Error(&quot;Cannot find module &#039;&quot;+o+&quot;&#039;&quot;);throw f.code=&quot;MODULE_NOT_FOUND&quot;,f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==&quot;function&quot;&amp;&amp;require;for(var o=0;o&lt;r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
    &quot;use strict&quot;;function Buffer(t){t?(this.array=t.array,this.pos=t.pos):(this.array=new ArrayBuffer(this.defaultLength),this.length=this.defaultLength,this.setupViews())}module.exports=Buffer,Buffer.prototype={pos:0,itemSize:4,defaultLength:8192,arrayType:&quot;ARRAY_BUFFER&quot;,get index(){return this.pos/this.itemSize},setupViews:function(){this.ubytes=new Uint8Array(this.array),this.bytes=new Int8Array(this.array),this.ushorts=new Uint16Array(this.array),this.shorts=new Int16Array(this.array)},bind:function(t){var e=t[this.arrayType];this.buffer?t.bindBuffer(e,this.buffer):(this.buffer=t.createBuffer(),t.bindBuffer(e,this.buffer),t.bufferData(e,this.array.slice(0,this.pos),t.STATIC_DRAW),this.array=null)},destroy:function(t){this.buffer&amp;&amp;t.deleteBuffer(this.buffer)},resize:function(){if(this.length&lt;this.pos+this.itemSize){for(;this.length&lt;this.pos+this.itemSize;)this.length=2*Math.round(1.5*this.length/2);this.array=new ArrayBuffer(this.length);var t=new Uint8Array(this.array);t.set(this.ubytes),this.setupViews()}}};
},{}],2:[function(require,module,exports){
    &quot;use strict&quot;;var LineVertexBuffer=require(&quot;./line_vertex_buffer&quot;),LineElementBuffer=require(&quot;./line_element_buffer&quot;),FillVertexBuffer=require(&quot;./fill_vertex_buffer&quot;),FillElementBuffer=require(&quot;./triangle_element_buffer&quot;),OutlineElementBuffer=require(&quot;./outline_elements_buffer&quot;),GlyphVertexBuffer=require(&quot;./glyph_vertex_buffer&quot;),GlyphElementBuffer=require(&quot;./triangle_element_buffer&quot;),IconVertexBuffer=require(&quot;./icon_vertex_buffer&quot;),IconElementBuffer=require(&quot;./triangle_element_buffer&quot;),CollisionBoxVertexBuffer=require(&quot;./collision_box_vertex_buffer&quot;);module.exports=function(e){return e=e||{},{glyphVertex:new GlyphVertexBuffer(e.glyphVertex),glyphElement:new GlyphElementBuffer(e.glyphElement),iconVertex:new IconVertexBuffer(e.iconVertex),iconElement:new IconElementBuffer(e.iconElement),fillVertex:new FillVertexBuffer(e.fillVertex),fillElement:new FillElementBuffer(e.fillElement),outlineElement:new OutlineElementBuffer(e.outlineElement),lineVertex:new LineVertexBuffer(e.lineVertex),lineElement:new LineElementBuffer(e.lineElement),collisionBoxVertex:new CollisionBoxVertexBuffer(e.collisionBoxVertex)}};
},{&quot;./collision_box_vertex_buffer&quot;:3,&quot;./fill_vertex_buffer&quot;:4,&quot;./glyph_vertex_buffer&quot;:5,&quot;./icon_vertex_buffer&quot;:6,&quot;./line_element_buffer&quot;:7,&quot;./line_vertex_buffer&quot;:8,&quot;./outline_elements_buffer&quot;:9,&quot;./triangle_element_buffer&quot;:10}],3:[function(require,module,exports){
    &quot;use strict&quot;;function CollisionBoxVertexBuffer(t){Buffer.call(this,t)}var util=require(&quot;../../util/util&quot;),Buffer=require(&quot;./buffer&quot;);module.exports=CollisionBoxVertexBuffer,CollisionBoxVertexBuffer.prototype=util.inherit(Buffer,{itemSize:12,defaultLength:32768,add:function(t,i,e,r){var s=this.pos,o=s/2,u=this.index;return this.resize(),this.shorts[o+0]=t.x,this.shorts[o+1]=t.y,this.shorts[o+2]=Math.round(i.x),this.shorts[o+3]=Math.round(i.y),this.ubytes[s+8]=Math.floor(10*e),this.ubytes[s+9]=Math.floor(10*r),this.pos+=this.itemSize,u}});
},{&quot;../../util/util&quot;:96,&quot;./buffer&quot;:1}],4:[function(require,module,exports){
    &quot;use strict&quot;;function FillVertexBuffer(e){Buffer.call(this,e)}var util=require(&quot;../../util/util&quot;),Buffer=require(&quot;./buffer&quot;);module.exports=FillVertexBuffer,FillVertexBuffer.prototype=util.inherit(Buffer,{itemSize:4,add:function(e,i){var t=this.pos/2;this.resize(),this.shorts[t+0]=e,this.shorts[t+1]=i,this.pos+=this.itemSize}});
},{&quot;../../util/util&quot;:96,&quot;./buffer&quot;:1}],5:[function(require,module,exports){
    &quot;use strict&quot;;function GlyphVertexBuffer(t){Buffer.call(this,t)}var util=require(&quot;../../util/util&quot;),Buffer=require(&quot;./buffer&quot;);module.exports=GlyphVertexBuffer,GlyphVertexBuffer.prototype=util.inherit(Buffer,{defaultLength:32768,itemSize:16,add:function(t,e,r,i,s,h,o,f,u){var a=this.pos,l=a/2;this.resize(),this.shorts[l+0]=t,this.shorts[l+1]=e,this.shorts[l+2]=Math.round(64*r),this.shorts[l+3]=Math.round(64*i),this.ubytes[a+8]=Math.floor(s/4),this.ubytes[a+9]=Math.floor(h/4),this.ubytes[a+10]=Math.floor(10*u),this.ubytes[a+12]=Math.floor(10*o),this.ubytes[a+13]=Math.floor(10*Math.min(f,25)),this.pos+=this.itemSize},bind:function(t,e,r){Buffer.prototype.bind.call(this,t);var i=this.itemSize;t.vertexAttribPointer(e.a_pos,2,t.SHORT,!1,i,r+0),t.vertexAttribPointer(e.a_offset,2,t.SHORT,!1,i,r+4),t.vertexAttribPointer(e.a_data1,4,t.UNSIGNED_BYTE,!1,i,r+8),t.vertexAttribPointer(e.a_data2,2,t.UNSIGNED_BYTE,!1,i,r+12)}});
},{&quot;../../util/util&quot;:96,&quot;./buffer&quot;:1}],6:[function(require,module,exports){
    &quot;use strict&quot;;function GlyphVertexBuffer(t){Buffer.call(this,t)}var util=require(&quot;../../util/util&quot;),Buffer=require(&quot;./buffer&quot;);module.exports=GlyphVertexBuffer,GlyphVertexBuffer.prototype=util.inherit(Buffer,{defaultLength:32768,itemSize:16,add:function(t,e,i,r,s,h,o,u,f){var a=this.pos,n=a/2;this.resize(),this.shorts[n+0]=t,this.shorts[n+1]=e,this.shorts[n+2]=Math.round(64*i),this.shorts[n+3]=Math.round(64*r),this.ubytes[a+8]=s/4,this.ubytes[a+9]=h/4,this.ubytes[a+10]=Math.floor(10*(f||0)),this.ubytes[a+12]=Math.floor(10*(o||0)),this.ubytes[a+13]=Math.floor(10*Math.min(u||25,25)),this.pos+=this.itemSize},bind:function(t,e,i){Buffer.prototype.bind.call(this,t);var r=this.itemSize;t.vertexAttribPointer(e.a_pos,2,t.SHORT,!1,r,i+0),t.vertexAttribPointer(e.a_offset,2,t.SHORT,!1,r,i+4),t.vertexAttribPointer(e.a_data1,4,t.UNSIGNED_BYTE,!1,r,i+8),t.vertexAttribPointer(e.a_data2,2,t.UNSIGNED_BYTE,!1,r,i+12)}});
},{&quot;../../util/util&quot;:96,&quot;./buffer&quot;:1}],7:[function(require,module,exports){
    &quot;use strict&quot;;function LineElementBuffer(e){Buffer.call(this,e)}var util=require(&quot;../../util/util&quot;),Buffer=require(&quot;./buffer&quot;);module.exports=LineElementBuffer,LineElementBuffer.prototype=util.inherit(Buffer,{itemSize:6,arrayType:&quot;ELEMENT_ARRAY_BUFFER&quot;,add:function(e,t,i){var r=this.pos/2;this.resize(),this.ushorts[r+0]=e,this.ushorts[r+1]=t,this.ushorts[r+2]=i,this.pos+=this.itemSize}});
},{&quot;../../util/util&quot;:96,&quot;./buffer&quot;:1}],8:[function(require,module,exports){
    &quot;use strict&quot;;function LineVertexBuffer(e){Buffer.call(this,e)}var util=require(&quot;../../util/util&quot;),Buffer=require(&quot;./buffer&quot;);module.exports=LineVertexBuffer,LineVertexBuffer.extrudeScale=63,LineVertexBuffer.prototype=util.inherit(Buffer,{itemSize:8,defaultLength:32768,add:function(e,t,r,i,s){var u=this.pos,f=u/2,h=this.index,o=LineVertexBuffer.extrudeScale;return this.resize(),this.shorts[f+0]=2*Math.floor(e.x)|r,this.shorts[f+1]=2*Math.floor(e.y)|i,this.bytes[u+4]=Math.round(o*t.x),this.bytes[u+5]=Math.round(o*t.y),this.bytes[u+6]=(s||0)/128,this.bytes[u+7]=(s||0)%128,this.pos+=this.itemSize,h}});
},{&quot;../../util/util&quot;:96,&quot;./buffer&quot;:1}],9:[function(require,module,exports){
    &quot;use strict&quot;;function OutlineElementsBuffer(e){Buffer.call(this,e)}var util=require(&quot;../../util/util&quot;),Buffer=require(&quot;./buffer&quot;);module.exports=OutlineElementsBuffer,OutlineElementsBuffer.prototype=util.inherit(Buffer,{itemSize:4,arrayType:&quot;ELEMENT_ARRAY_BUFFER&quot;,add:function(e,t){var i=this.pos/2;this.resize(),this.ushorts[i+0]=e,this.ushorts[i+1]=t,this.pos+=this.itemSize}});
},{&quot;../../util/util&quot;:96,&quot;./buffer&quot;:1}],10:[function(require,module,exports){
    &quot;use strict&quot;;function TriangleElementsBuffer(e){Buffer.call(this,e)}var util=require(&quot;../../util/util&quot;),Buffer=require(&quot;./buffer&quot;);module.exports=TriangleElementsBuffer,TriangleElementsBuffer.prototype=util.inherit(Buffer,{itemSize:6,arrayType:&quot;ELEMENT_ARRAY_BUFFER&quot;,add:function(e,t,i){var r=this.pos/2;this.resize(),this.ushorts[r+0]=e,this.ushorts[r+1]=t,this.ushorts[r+2]=i,this.pos+=this.itemSize}});
},{&quot;../../util/util&quot;:96,&quot;./buffer&quot;:1}],11:[function(require,module,exports){
    &quot;use strict&quot;;function createBucket(e,t,r,l,i){var o=new StyleDeclarationSet(&quot;layout&quot;,e.type,e.layout,{}).values(),u={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0},a={};for(var c in o)a[c]=o[c].calculate(r,u);var y=&quot;line&quot;===e.type?LineBucket:&quot;fill&quot;===e.type?FillBucket:&quot;symbol&quot;===e.type?SymbolBucket:null,n=new y(t,new LayoutProperties[e.type](a),l,r,i);return n.id=e.id,n.type=e.type,n[&quot;source-layer&quot;]=e[&quot;source-layer&quot;],n.interactive=e.interactive,n.minZoom=e.minzoom,n.maxZoom=e.maxzoom,n.filter=featureFilter(e.filter),n.features=[],n}module.exports=createBucket;var LineBucket=require(&quot;./line_bucket&quot;),FillBucket=require(&quot;./fill_bucket&quot;),SymbolBucket=require(&quot;./symbol_bucket&quot;),LayoutProperties=require(&quot;../style/layout_properties&quot;),featureFilter=require(&quot;feature-filter&quot;),StyleDeclarationSet=require(&quot;../style/style_declaration_set&quot;);
},{&quot;../style/layout_properties&quot;:49,&quot;../style/style_declaration_set&quot;:55,&quot;./fill_bucket&quot;:14,&quot;./line_bucket&quot;:15,&quot;./symbol_bucket&quot;:16,&quot;feature-filter&quot;:102}],12:[function(require,module,exports){
    &quot;use strict&quot;;function ElementGroups(e,t,n){this.vertexBuffer=e,this.elementBuffer=t,this.secondElementBuffer=n,this.groups=[]}function ElementGroup(e,t,n){this.vertexStartIndex=e,this.elementStartIndex=t,this.secondElementStartIndex=n,this.elementLength=0,this.vertexLength=0,this.secondElementLength=0}module.exports=ElementGroups,ElementGroups.prototype.makeRoomFor=function(e){(!this.current||this.current.vertexLength+e&gt;65535)&amp;&amp;(this.current=new ElementGroup(this.vertexBuffer.index,this.elementBuffer&amp;&amp;this.elementBuffer.index,this.secondElementBuffer&amp;&amp;this.secondElementBuffer.index),this.groups.push(this.current))};
},{}],13:[function(require,module,exports){
    &quot;use strict&quot;;function FeatureTree(t,e){this.x=t.x,this.y=t.y,this.z=t.z-Math.log(e)/Math.LN2,this.rtree=rbush(9),this.toBeInserted=[]}function geometryContainsPoint(t,e,r,n){return&quot;Point&quot;===e?pointContainsPoint(t,r,n):&quot;LineString&quot;===e?lineContainsPoint(t,r,n):&quot;Polygon&quot;===e?polyContainsPoint(t,r)||lineContainsPoint(t,r,n):!1}function distToSegmentSquared(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);var i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return t.distSqr(0&gt;i?e:i&gt;1?r:r.sub(e)._mult(i)._add(e))}function lineContainsPoint(t,e,r){for(var n=r*r,i=0;i&lt;t.length;i++)for(var o=t[i],s=1;s&lt;o.length;s++){var a=o[s-1],u=o[s];if(distToSegmentSquared(e,a,u)&lt;n)return!0}return!1}function polyContainsPoint(t,e){for(var r,n,i,o=!1,s=0;s&lt;t.length;s++){r=t[s];for(var a=0,u=r.length-1;a&lt;r.length;u=a++)n=r[a],i=r[u],n.y&gt;e.y!=i.y&gt;e.y&amp;&amp;e.x&lt;(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&amp;&amp;(o=!o)}return o}function pointContainsPoint(t,e,r){for(var n=r*r,i=0;i&lt;t.length;i++)for(var o=t[i],s=0;s&lt;o.length;s++)if(o[s].distSqr(e)&lt;=n)return!0;return!1}var rbush=require(&quot;rbush&quot;),Point=require(&quot;point-geometry&quot;),vt=require(&quot;vector-tile&quot;),util=require(&quot;../util/util&quot;);module.exports=FeatureTree,FeatureTree.prototype.insert=function(t,e,r){t.layers=e,t.feature=r,this.toBeInserted.push(t)},FeatureTree.prototype._load=function(){this.rtree.load(this.toBeInserted),this.toBeInserted=[]},FeatureTree.prototype.query=function(t,e){this.toBeInserted.length&amp;&amp;this._load();for(var r=t.params||{},n=4096*(r.radius||0)/t.scale,i=t.x,o=t.y,s=[],a=this.rtree.search([i-n,o-n,i+n,o+n]),u=0;u&lt;a.length;u++){var l=a[u].feature,y=a[u].layers,h=vt.VectorTileFeature.types[l.type];if((!r.$type||h===r.$type)&amp;&amp;geometryContainsPoint(l.loadGeometry(),h,new Point(i,o),n))for(var d=l.toGeoJSON(this.x,this.y,this.z),f=0;f&lt;y.length;f++){var p=y[f];r.layer&amp;&amp;p!==r.layer.id||s.push(util.extend({layer:p},d))}}e(null,s)};
},{&quot;../util/util&quot;:96,&quot;point-geometry&quot;:118,&quot;rbush&quot;:119,&quot;vector-tile&quot;:122}],14:[function(require,module,exports){
    &quot;use strict&quot;;function FillBucket(e){this.buffers=e,this.elementGroups=new ElementGroups(e.fillVertex,e.fillElement,e.outlineElement)}var ElementGroups=require(&quot;./element_groups&quot;);module.exports=FillBucket,FillBucket.prototype.addFeatures=function(){for(var e=this.features,t=0;t&lt;e.length;t++){var l=e[t];this.addFeature(l.loadGeometry())}},FillBucket.prototype.addFeature=function(e){for(var t=0;t&lt;e.length;t++)this.addFill(e[t])},FillBucket.prototype.addFill=function(e){if(!(e.length&lt;3)){var t=e.length;this.elementGroups.makeRoomFor(t+1);for(var l,r,n,i=this.elementGroups.current,o=this.buffers.fillVertex,u=this.buffers.fillElement,s=this.buffers.outlineElement,d=o.index-i.vertexStartIndex,a=0;a&lt;e.length;a++)r=o.index-i.vertexStartIndex,n=e[a],o.add(n.x,n.y),i.vertexLength++,a&gt;=2&amp;&amp;(n.x!==e[0].x||n.y!==e[0].y)&amp;&amp;(u.add(d,l,r),i.elementLength++),a&gt;=1&amp;&amp;(s.add(l,r),i.secondElementLength++),l=r}};
},{&quot;./element_groups&quot;:12}],15:[function(require,module,exports){
    &quot;use strict&quot;;function LineBucket(e,t){this.buffers=e,this.elementGroups=new ElementGroups(e.lineVertex,e.lineElement),this.layoutProperties=t}var ElementGroups=require(&quot;./element_groups&quot;);module.exports=LineBucket,LineBucket.prototype.addFeatures=function(){for(var e=this.features,t=0;t&lt;e.length;t++){var r=e[t];this.addFeature(r.loadGeometry())}},LineBucket.prototype.addFeature=function(e){for(var t=this.layoutProperties,r=0;r&lt;e.length;r++)this.addLine(e[r],t[&quot;line-join&quot;],t[&quot;line-cap&quot;],t[&quot;line-miter-limit&quot;],t[&quot;line-round-limit&quot;])},LineBucket.prototype.addLine=function(e,t,r,i,s){for(var n=e.length;n&gt;2&amp;&amp;e[n-1].equals(e[n-2]);)n--;if(!(e.length&lt;2)){&quot;bevel&quot;===t&amp;&amp;(i=1.05);var u=e[0],h=e[n-1],d=u.equals(h);if(this.elementGroups.makeRoomFor(4*n),2!==n||!d){var a,l,o,p,m,f,x,v=r,b=d?&quot;butt&quot;:r,c=1,V=0,y=!0;this.e1=this.e2=this.e3=-1,d&amp;&amp;(a=e[n-2],m=u.sub(a)._unit()._perp());for(var C=0;n&gt;C;C++)if(o=d&amp;&amp;C===n-1?e[1]:e[C+1],!o||!e[C].equals(o)){m&amp;&amp;(p=m),a&amp;&amp;(l=a),a=e[C],l&amp;&amp;(V+=a.dist(l)),m=o?o.sub(a)._unit()._perp():p,p=p||m;var _=p.add(m)._unit(),L=_.x*m.x+_.y*m.y,g=1/L,k=l&amp;&amp;o,G=k?t:o?v:b;if(k&amp;&amp;&quot;round&quot;===G&amp;&amp;s&gt;g&amp;&amp;(G=&quot;miter&quot;),&quot;miter&quot;===G&amp;&amp;g&gt;i&amp;&amp;(G=&quot;bevel&quot;),&quot;bevel&quot;===G&amp;&amp;(g&gt;2&amp;&amp;(G=&quot;flipbevel&quot;),i&gt;g&amp;&amp;(G=&quot;miter&quot;)),&quot;miter&quot;===G)_._mult(g),this.addCurrentVertex(a,c,V,_,0,0,!1);else if(&quot;flipbevel&quot;===G){if(g&gt;100)_=m.clone();else{var q=p.x*m.y-p.y*m.x&gt;0?-1:1,B=g*p.add(m).mag()/p.sub(m).mag();_._perp()._mult(B*q)}this.addCurrentVertex(a,c,V,_,0,0,!1),c=-c}else if(&quot;bevel&quot;===G){var E=p.x*m.y-p.y*m.x,F=-Math.sqrt(g*g-1);c*E&gt;0?(x=0,f=F):(f=0,x=F),y||this.addCurrentVertex(a,c,V,p,f,x,!1),o&amp;&amp;this.addCurrentVertex(a,c,V,m,-f,-x,!1)}else&quot;butt&quot;===G?(y||this.addCurrentVertex(a,c,V,p,0,0,!1),o&amp;&amp;this.addCurrentVertex(a,c,V,m,0,0,!1)):&quot;square&quot;===G?(y||(this.addCurrentVertex(a,c,V,p,1,1,!1),this.e1=this.e2=-1,c=1),o&amp;&amp;this.addCurrentVertex(a,c,V,m,-1,-1,!1)):&quot;round&quot;===G&amp;&amp;(y?&quot;round&quot;===v&amp;&amp;this.addCurrentVertex(a,c,V,m,-1,-1,!0):(this.addCurrentVertex(a,c,V,p,0,0,!1),this.addCurrentVertex(a,c,V,p,1,1,!0),this.e1=this.e2=-1,c=1),o&amp;&amp;this.addCurrentVertex(a,c,V,m,0,0,!1));y=!1}}}},LineBucket.prototype.addCurrentVertex=function(e,t,r,i,s,n,u){var h,d=u?1:0,a=this.buffers.lineVertex,l=this.buffers.lineElement,o=this.elementGroups.current,p=this.elementGroups.current.vertexStartIndex;h=i.mult(t),s&amp;&amp;h._sub(i.perp()._mult(s)),this.e3=a.add(e,h,d,0,r)-p,this.e1&gt;=0&amp;&amp;this.e2&gt;=0&amp;&amp;(l.add(this.e1,this.e2,this.e3),o.elementLength++),this.e1=this.e2,this.e2=this.e3,h=i.mult(-t),n&amp;&amp;h._sub(i.perp()._mult(n)),this.e3=a.add(e,h,d,1,r)-p,this.e1&gt;=0&amp;&amp;this.e2&gt;=0&amp;&amp;(l.add(this.e1,this.e2,this.e3),o.elementLength++),this.e1=this.e2,this.e2=this.e3,o.vertexLength+=2};
},{&quot;./element_groups&quot;:12}],16:[function(require,module,exports){
    &quot;use strict&quot;;function SymbolBucket(e,t,o,i,n){this.buffers=e,this.layoutProperties=t,this.overscaling=o,this.zoom=i,this.collisionDebug=n;var s=512*o,a=4096;this.tilePixelRatio=a/s,this.symbolInstances=[]}function SymbolInstance(e,t,o,i,n,s,a,l,r,c,h,u){this.x=e.x,this.y=e.y,this.hasText=!!o,this.hasIcon=!!i,this.hasText&amp;&amp;(this.glyphQuads=s?getGlyphQuads(e,o,a,t,n,r):[],this.textCollisionFeature=new CollisionFeature(t,e,o,a,l,r)),this.hasIcon&amp;&amp;(this.iconQuads=s?getIconQuads(e,i,c,t,n,u):[],this.iconCollisionFeature=new CollisionFeature(t,e,i,c,h,u))}var ElementGroups=require(&quot;./element_groups&quot;),Anchor=require(&quot;../symbol/anchor&quot;),getAnchors=require(&quot;../symbol/get_anchors&quot;),resolveTokens=require(&quot;../util/token&quot;),Quads=require(&quot;../symbol/quads&quot;),Shaping=require(&quot;../symbol/shaping&quot;),resolveText=require(&quot;../symbol/resolve_text&quot;),resolveIcons=require(&quot;../symbol/resolve_icons&quot;),mergeLines=require(&quot;../symbol/mergelines&quot;),shapeText=Shaping.shapeText,shapeIcon=Shaping.shapeIcon,getGlyphQuads=Quads.getGlyphQuads,getIconQuads=Quads.getIconQuads,clipLine=require(&quot;../symbol/clip_line&quot;),Point=require(&quot;point-geometry&quot;),CollisionFeature=require(&quot;../symbol/collision_feature&quot;);module.exports=SymbolBucket,SymbolBucket.prototype.needsPlacement=!0,SymbolBucket.prototype.addFeatures=function(e){var t=this.layoutProperties,o=this.features,i=this.textFeatures,n=.5,s=.5;switch(t[&quot;text-anchor&quot;]){case&quot;right&quot;:case&quot;top-right&quot;:case&quot;bottom-right&quot;:n=1;break;case&quot;left&quot;:case&quot;top-left&quot;:case&quot;bottom-left&quot;:n=0}switch(t[&quot;text-anchor&quot;]){case&quot;bottom&quot;:case&quot;bottom-right&quot;:case&quot;bottom-left&quot;:s=1;break;case&quot;top&quot;:case&quot;top-right&quot;:case&quot;top-left&quot;:s=0}for(var a=&quot;right&quot;===t[&quot;text-justify&quot;]?1:&quot;left&quot;===t[&quot;text-justify&quot;]?0:.5,l=24,r=t[&quot;text-line-height&quot;]*l,c=&quot;line&quot;!==t[&quot;symbol-placement&quot;]?t[&quot;text-max-width&quot;]*l:0,h=t[&quot;text-letter-spacing&quot;]*l,u=[t[&quot;text-offset&quot;][0]*l,t[&quot;text-offset&quot;][1]*l],m=t[&quot;text-font&quot;],p=[],x=0;x&lt;o.length;x++)p.push(o[x].loadGeometry());if(&quot;line&quot;===t[&quot;symbol-placement&quot;]){var y=mergeLines(o,i,p);p=y.geometries,o=y.features,i=y.textFeatures}for(var d,g,f=0;f&lt;o.length;f++)if(p[f]){if(d=i[f]?shapeText(i[f],this.stacks[m],c,r,n,s,a,h,u):null,t[&quot;icon-image&quot;]){var b=resolveTokens(o[f].properties,t[&quot;icon-image&quot;]),v=this.icons[b];g=shapeIcon(v,t),v&amp;&amp;(void 0===this.sdfIcons?this.sdfIcons=v.sdf:this.sdfIcons!==v.sdf&amp;&amp;console.warn(&quot;Style sheet warning: Cannot mix SDF and non-SDF icons in one bucket&quot;))}else g=null;(d||g)&amp;&amp;this.addFeature(p[f],d,g)}this.placeFeatures(e,this.buffers,this.collisionDebug)},SymbolBucket.prototype.addFeature=function(e,t,o){var i=this.layoutProperties,n=24,s=i[&quot;text-max-size&quot;]/n,a=this.tilePixelRatio*s,l=this.tilePixelRatio*i[&quot;icon-max-size&quot;],r=this.tilePixelRatio*i[&quot;symbol-min-distance&quot;],c=i[&quot;symbol-avoid-edges&quot;],h=i[&quot;text-padding&quot;]*this.tilePixelRatio,u=i[&quot;icon-padding&quot;]*this.tilePixelRatio,m=i[&quot;text-max-angle&quot;]/180*Math.PI,p=&quot;map&quot;===i[&quot;text-rotation-alignment&quot;]&amp;&amp;&quot;line&quot;===i[&quot;symbol-placement&quot;],x=&quot;map&quot;===i[&quot;icon-rotation-alignment&quot;]&amp;&amp;&quot;line&quot;===i[&quot;symbol-placement&quot;],y=i[&quot;text-allow-overlap&quot;]||i[&quot;icon-allow-overlap&quot;]||i[&quot;text-ignore-placement&quot;]||i[&quot;icon-ignore-placement&quot;];&quot;line&quot;===i[&quot;symbol-placement&quot;]&amp;&amp;(e=clipLine(e,0,0,4096,4096));for(var d=0;d&lt;e.length;d++)for(var g=e[d],f=&quot;line&quot;===i[&quot;symbol-placement&quot;]?getAnchors(g,r,m,t,n,a,this.overscaling):[new Anchor(g[0].x,g[0].y,0)],b=0,v=f.length;v&gt;b;b++){var I=f[b],S=!(I.x&lt;0||I.x&gt;4096||I.y&lt;0||I.y&gt;4096);if(!c||S){var F=S||y;this.symbolInstances.push(new SymbolInstance(I,g,t,o,i,F,a,h,p,l,u,x))}}},SymbolBucket.prototype.placeFeatures=function(e,t,o){this.buffers=t;var i=this.elementGroups={text:new ElementGroups(t.glyphVertex,t.glyphElement),icon:new ElementGroups(t.iconVertex,t.iconElement),sdfIcons:this.sdfIcons},n=this.layoutProperties,s=e.maxScale,a=&quot;map&quot;===n[&quot;text-rotation-alignment&quot;]&amp;&amp;&quot;line&quot;===n[&quot;symbol-placement&quot;],l=&quot;map&quot;===n[&quot;icon-rotation-alignment&quot;]&amp;&amp;&quot;line&quot;===n[&quot;symbol-placement&quot;],r=n[&quot;text-allow-overlap&quot;]||n[&quot;icon-allow-overlap&quot;]||n[&quot;text-ignore-placement&quot;]||n[&quot;icon-ignore-placement&quot;];if(r){var c=e.angle,h=Math.sin(c),u=Math.cos(c);this.symbolInstances.sort(function(e,t){var o=h*e.x+u*e.y,i=h*t.x+u*t.y;return i-o})}for(var m=0;m&lt;this.symbolInstances.length;m++){var p=this.symbolInstances[m],x=p.hasText,y=p.hasIcon,d=n[&quot;text-optional&quot;]||!x,g=n[&quot;icon-optional&quot;]||!y,f=x&amp;&amp;!n[&quot;text-allow-overlap&quot;]?e.placeCollisionFeature(p.textCollisionFeature):e.minScale,b=y&amp;&amp;!n[&quot;icon-allow-overlap&quot;]?e.placeCollisionFeature(p.iconCollisionFeature):e.minScale;d||g?!g&amp;&amp;f?f=Math.max(b,f):!d&amp;&amp;b&amp;&amp;(b=Math.max(b,f)):b=f=Math.max(b,f),x&amp;&amp;(n[&quot;text-ignore-placement&quot;]||e.insertCollisionFeature(p.textCollisionFeature,f),s&gt;=f&amp;&amp;this.addSymbols(t.glyphVertex,t.glyphElement,i.text,p.glyphQuads,f,n[&quot;text-keep-upright&quot;],a,e.angle)),y&amp;&amp;(n[&quot;icon-ignore-placement&quot;]||e.insertCollisionFeature(p.iconCollisionFeature,b),s&gt;=b&amp;&amp;this.addSymbols(t.iconVertex,t.iconElement,i.icon,p.iconQuads,b,n[&quot;icon-keep-upright&quot;],l,e.angle))}o&amp;&amp;this.addToDebugBuffers(e)},SymbolBucket.prototype.addSymbols=function(e,t,o,i,n,s,a,l){o.makeRoomFor(4*i.length);for(var r=o.current,c=this.zoom,h=Math.max(Math.log(n)/Math.LN2+c,0),u=0;u&lt;i.length;u++){var m=i[u],p=m.angle,x=(p+l+Math.PI)%(2*Math.PI);if(!(s&amp;&amp;a&amp;&amp;(x&lt;=Math.PI/2||x&gt;3*Math.PI/2))){var y=m.tl,d=m.tr,g=m.bl,f=m.br,b=m.tex,v=m.anchorPoint,I=Math.max(c+Math.log(m.minScale)/Math.LN2,h),S=Math.min(c+Math.log(m.maxScale)/Math.LN2,25);if(!(I&gt;=S)){I===h&amp;&amp;(I=0);var F=e.index-r.vertexStartIndex;e.add(v.x,v.y,y.x,y.y,b.x,b.y,I,S,h),e.add(v.x,v.y,d.x,d.y,b.x+b.w,b.y,I,S,h),e.add(v.x,v.y,g.x,g.y,b.x,b.y+b.h,I,S,h),e.add(v.x,v.y,f.x,f.y,b.x+b.w,b.y+b.h,I,S,h),r.vertexLength+=4,t.add(F,F+1,F+2),t.add(F+1,F+2,F+3),r.elementLength+=2}}}},SymbolBucket.prototype.getDependencies=function(e,t,o){function i(e){return e||n?o(e):void(n=!0)}var n=!1;this.getTextDependencies(e,t,i),this.getIconDependencies(e,t,i)},SymbolBucket.prototype.getIconDependencies=function(e,t,o){function i(e,t){return e?o(e):(this.icons=t,void o())}if(this.layoutProperties[&quot;icon-image&quot;]){var n=this.features,s=resolveIcons(n,this.layoutProperties);s.length?t.send(&quot;get icons&quot;,{icons:s},i.bind(this)):o()}else o()},SymbolBucket.prototype.getTextDependencies=function(e,t,o){var i=this.features,n=this.layoutProperties[&quot;text-font&quot;],s=this.stacks=e.stacks;void 0===s[n]&amp;&amp;(s[n]={});var a=s[n],l=resolveText(i,this.layoutProperties,a);this.textFeatures=l.textFeatures,t.send(&quot;get glyphs&quot;,{uid:e.uid,fontstack:n,codepoints:l.codepoints},function(e,t){if(e)return o(e);for(var i in t)a[i]=t[i];o()})},SymbolBucket.prototype.addToDebugBuffers=function(e){this.elementGroups.collisionBox=new ElementGroups(this.buffers.collisionBoxVertex),this.elementGroups.collisionBox.makeRoomFor(0);for(var t=this.buffers.collisionBoxVertex,o=-e.angle,i=e.yStretch,n=0;n&lt;this.symbolInstances.length;n++)for(var s=0;2&gt;s;s++){var a=this.symbolInstances[n][0===s?&quot;textCollisionFeature&quot;:&quot;iconCollisionFeature&quot;];if(a)for(var l=a.boxes,r=0;r&lt;l.length;r++){var c=l[r],h=c.anchorPoint,u=new Point(c.x1,c.y1*i)._rotate(o),m=new Point(c.x2,c.y1*i)._rotate(o),p=new Point(c.x1,c.y2*i)._rotate(o),x=new Point(c.x2,c.y2*i)._rotate(o),y=Math.max(0,Math.min(25,this.zoom+Math.log(c.maxScale)/Math.LN2)),d=Math.max(0,Math.min(25,this.zoom+Math.log(c.placementScale)/Math.LN2));t.add(h,u,y,d),t.add(h,m,y,d),t.add(h,m,y,d),t.add(h,x,y,d),t.add(h,x,y,d),t.add(h,p,y,d),t.add(h,p,y,d),t.add(h,u,y,d),this.elementGroups.collisionBox.current.vertexLength+=8}}};
},{&quot;../symbol/anchor&quot;:58,&quot;../symbol/clip_line&quot;:61,&quot;../symbol/collision_feature&quot;:63,&quot;../symbol/get_anchors&quot;:65,&quot;../symbol/mergelines&quot;:68,&quot;../symbol/quads&quot;:69,&quot;../symbol/resolve_icons&quot;:70,&quot;../symbol/resolve_text&quot;:71,&quot;../symbol/shaping&quot;:72,&quot;../util/token&quot;:95,&quot;./element_groups&quot;:12,&quot;point-geometry&quot;:118}],17:[function(require,module,exports){
    &quot;use strict&quot;;function Coordinate(o,t,n){this.column=o,this.row=t,this.zoom=n}module.exports=Coordinate,Coordinate.prototype={clone:function(){return new Coordinate(this.column,this.row,this.zoom)},zoomTo:function(o){return this.clone()._zoomTo(o)},sub:function(o){return this.clone()._sub(o)},_zoomTo:function(o){var t=Math.pow(2,o-this.zoom);return this.column*=t,this.row*=t,this.zoom=o,this},_sub:function(o){return o=o.zoomTo(this.zoom),this.column-=o.column,this.row-=o.row,this}};
},{}],18:[function(require,module,exports){
    &quot;use strict&quot;;function LatLng(t,n){if(isNaN(t)||isNaN(n))throw new Error(&quot;Invalid LatLng object: (&quot;+t+&quot;, &quot;+n+&quot;)&quot;);this.lat=+t,this.lng=+n}module.exports=LatLng;var wrap=require(&quot;../util/util&quot;).wrap;LatLng.prototype.wrap=function(){return new LatLng(this.lat,wrap(this.lng,-180,180))},LatLng.convert=function(t){return t instanceof LatLng?t:Array.isArray(t)?new LatLng(t[0],t[1]):t};
},{&quot;../util/util&quot;:96}],19:[function(require,module,exports){
    &quot;use strict&quot;;function LatLngBounds(t,n){if(t)for(var e=n?[t,n]:t,s=0,i=e.length;i&gt;s;s++)this.extend(e[s])}module.exports=LatLngBounds;var LatLng=require(&quot;./lat_lng&quot;);LatLngBounds.prototype={extend:function(t){var n,e,s=this._sw,i=this._ne;if(t instanceof LatLng)n=t,e=t;else{if(!(t instanceof LatLngBounds))return t?this.extend(LatLng.convert(t)||LatLngBounds.convert(t)):this;if(n=t._sw,e=t._ne,!n||!e)return this}return s||i?(s.lat=Math.min(n.lat,s.lat),s.lng=Math.min(n.lng,s.lng),i.lat=Math.max(e.lat,i.lat),i.lng=Math.max(e.lng,i.lng)):(this._sw=new LatLng(n.lat,n.lng),this._ne=new LatLng(e.lat,e.lng)),this},getCenter:function(){return new LatLng((this._sw.lat+this._ne.lat)/2,(this._sw.lng+this._ne.lng)/2)},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getNorthWest:function(){return new LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._sw.lng},getSouth:function(){return this._sw.lat},getEast:function(){return this._ne.lng},getNorth:function(){return this._ne.lat}},LatLngBounds.convert=function(t){return!t||t instanceof LatLngBounds?t:new LatLngBounds(t)};
},{&quot;./lat_lng&quot;:18}],20:[function(require,module,exports){
    &quot;use strict&quot;;function Transform(t,i){this.tileSize=512,this._minZoom=t||0,this._maxZoom=i||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this.zoom=0,this.center=new LatLng(0,0),this.angle=0,this._altitude=1.5,this._pitch=0}var LatLng=require(&quot;./lat_lng&quot;),Point=require(&quot;point-geometry&quot;),Coordinate=require(&quot;./coordinate&quot;),wrap=require(&quot;../util/util&quot;).wrap,interp=require(&quot;../util/interpolate&quot;),vec4=require(&quot;gl-matrix&quot;).vec4,mat4=require(&quot;gl-matrix&quot;).mat4;module.exports=Transform,Transform.prototype={get minZoom(){return this._minZoom},set minZoom(t){this._minZoom=t,this.zoom=Math.max(this.zoom,t)},get maxZoom(){return this._maxZoom},set maxZoom(t){this._maxZoom=t,this.zoom=Math.min(this.zoom,t)},get worldSize(){return this.tileSize*this.scale},get centerPoint(){return this.size._div(2)},get size(){return new Point(this.width,this.height)},get bearing(){return-this.angle/Math.PI*180},set bearing(t){this.angle=-wrap(t,-180,180)*Math.PI/180},get pitch(){return this._pitch/Math.PI*180},set pitch(t){this._pitch=Math.min(60,t)/180*Math.PI},get altitude(){return this._altitude},set altitude(t){this._altitude=Math.max(.75,t)},get zoom(){return this._zoom},set zoom(t){t=Math.min(Math.max(t,this.minZoom),this.maxZoom),this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain()},zoomScale:function(t){return Math.pow(2,t)},scaleZoom:function(t){return Math.log(t)/Math.LN2},project:function(t,i){return new Point(this.lngX(t.lng,i),this.latY(t.lat,i))},unproject:function(t,i){return new LatLng(this.yLat(t.y,i),this.xLng(t.x,i))},get x(){return this.lngX(this.center.lng)},get y(){return this.latY(this.center.lat)},get point(){return new Point(this.x,this.y)},lngX:function(t,i){return(180+t)*(i||this.worldSize)/360},latY:function(t,i){var n=180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360));return(180-n)*(i||this.worldSize)/360},xLng:function(t,i){return 360*t/(i||this.worldSize)-180},yLat:function(t,i){var n=180-360*t/(i||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90},panBy:function(t){var i=this.centerPoint._add(t);this.center=this.pointLocation(i),this._constrain()},setLocationAtPoint:function(t,i){var n=this.locationCoordinate(t),o=this.pointCoordinate(i),e=this.pointCoordinate(this.centerPoint),a=o._sub(n);this.center=this.coordinateLocation(e._sub(a)),this._constrain()},setZoomAround:function(t,i){var n;i&amp;&amp;(n=this.locationPoint(i)),this.zoom=t,i&amp;&amp;this.setLocationAtPoint(i,n)},setBearingAround:function(t,i){var n;i&amp;&amp;(n=this.locationPoint(i)),this.bearing=t,i&amp;&amp;this.setLocationAtPoint(i,n)},locationPoint:function(t){return this.coordinatePoint(this.locationCoordinate(t))},pointLocation:function(t){return this.coordinateLocation(this.pointCoordinate(t))},locationCoordinate:function(t){var i=this.zoomScale(this.tileZoom)/this.worldSize;return new Coordinate(this.lngX(t.lng)*i,this.latY(t.lat)*i,this.tileZoom)},coordinateLocation:function(t){var i=this.zoomScale(t.zoom);return new LatLng(this.yLat(t.row,i),this.xLng(t.column,i))},pointCoordinate:function(t,i){void 0===i&amp;&amp;(i=0);var n=this.coordinatePointMatrix(this.tileZoom),o=mat4.invert(new Float64Array(16),n);if(!o)throw&quot;failed to invert matrix&quot;;var e=vec4.transformMat4([],[t.x,t.y,0,1],o),a=vec4.transformMat4([],[t.x,t.y,1,1],o),r=e[3],h=a[3],s=e[0]/r,c=a[0]/h,u=e[1]/r,l=a[1]/h,m=e[2]/r,g=a[2]/h,f=m===g?0:(i-m)/(g-m);return new Coordinate(interp(s,c,f),interp(u,l,f),this.tileZoom)},coordinatePoint:function(t){var i=this.coordinatePointMatrix(t.zoom),n=vec4.transformMat4([],[t.column,t.row,0,1],i);return new Point(n[0]/n[3],n[1]/n[3])},coordinatePointMatrix:function(t){var i=this.getProjMatrix(),n=this.worldSize/this.zoomScale(t);return mat4.scale(i,i,[n,n,1]),mat4.multiply(i,this.getPixelMatrix(),i),i},getPixelMatrix:function(){var t=mat4.create();return mat4.scale(t,t,[this.width/2,-this.height/2,1]),mat4.translate(t,t,[1,-1,0]),t},_constrain:function(){if(this.center){var t,i,n,o,e,a,r,h,s=this.size;this.latRange&amp;&amp;(t=this.latY(this.latRange[1]),i=this.latY(this.latRange[0]),e=i-t&lt;s.y?s.y/(i-t):0),this.lngRange&amp;&amp;(n=this.lngX(this.lngRange[0]),o=this.lngX(this.lngRange[1]),a=o-n&lt;s.x?s.x/(o-n):0);var c=Math.max(a||0,e||0);if(c)return this.center=this.unproject(new Point(a?(o+n)/2:this.x,e?(i+t)/2:this.y)),void(this.zoom+=this.scaleZoom(c));if(this.latRange){var u=this.y,l=s.y/2;t&gt;u-l&amp;&amp;(h=t+l),u+l&gt;i&amp;&amp;(h=i-l)}if(this.lngRange){var m=this.x,g=s.x/2;n&gt;m-g&amp;&amp;(r=n+g),m+g&gt;o&amp;&amp;(r=o-g)}(void 0!==r||void 0!==h)&amp;&amp;(this.center=this.unproject(new Point(void 0!==r?r:this.x,void 0!==h?h:this.y)))}},getProjMatrix:function(){var t=new Float64Array(16),i=Math.atan(.5/this.altitude),n=Math.sin(i)*this.altitude/Math.sin(Math.PI/2-this._pitch-i),o=Math.cos(Math.PI/2-this._pitch)*n+this.altitude;return mat4.perspective(t,2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,o),mat4.translate(t,t,[0,0,-this.altitude]),mat4.scale(t,t,[1,-1,1/this.height]),mat4.rotateX(t,t,this._pitch),mat4.rotateZ(t,t,this.angle),mat4.translate(t,t,[-this.x,-this.y,0]),t}};
},{&quot;../util/interpolate&quot;:92,&quot;../util/util&quot;:96,&quot;./coordinate&quot;:17,&quot;./lat_lng&quot;:18,&quot;gl-matrix&quot;:109,&quot;point-geometry&quot;:118}],21:[function(require,module,exports){
    &quot;use strict&quot;;var simplexFont={&quot; &quot;:[16,[]],&quot;!&quot;:[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],&#039;&quot;&#039;:[16,[4,21,4,14,-1,-1,12,21,12,14]],&quot;#&quot;:[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],&quot;%&quot;:[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],&quot;&amp;&quot;:[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],&quot;&#039;&quot;:[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],&quot;(&quot;:[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],&quot;)&quot;:[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],&quot;*&quot;:[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],&quot;+&quot;:[26,[13,18,13,0,-1,-1,4,9,22,9]],&quot;,&quot;:[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],&quot;-&quot;:[26,[4,9,22,9]],&quot;.&quot;:[10,[5,2,4,1,5,0,6,1,5,2]],&quot;/&quot;:[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],&quot;:&quot;:[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],&quot;;&quot;:[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],&quot;&lt;&quot;:[24,[20,18,4,9,20,0]],&quot;=&quot;:[26,[4,12,22,12,-1,-1,4,6,22,6]],&quot;&gt;&quot;:[24,[4,18,20,9,4,0]],&quot;?&quot;:[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],&quot;@&quot;:[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],&quot;[&quot;:[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],&quot;\\&quot;:[14,[0,21,14,-3]],&quot;]&quot;:[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],&quot;^&quot;:[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],&quot;`&quot;:[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],&quot;{&quot;:[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],&quot;|&quot;:[8,[4,25,4,-7]],&quot;}&quot;:[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],&quot;~&quot;:[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};module.exports=function(l,n,t,e){e=e||1;var r,o,u,s,i,x,f,p,h=[];for(r=0,o=l.length;o&gt;r;r++)if(i=simplexFont[l[r]]){for(p=null,u=0,s=i[1].length;s&gt;u;u+=2)-1===i[1][u]&amp;&amp;-1===i[1][u+1]?p=null:(x=n+i[1][u]*e,f=t-i[1][u+1]*e,p&amp;&amp;h.push(p.x,p.y,x,f),p={x:x,y:f});n+=i[0]*e}return h};
},{}],22:[function(require,module,exports){
    &quot;use strict&quot;;var mapboxgl=module.exports={};mapboxgl.Map=require(&quot;./ui/map&quot;),mapboxgl.Navigation=require(&quot;./ui/control/navigation&quot;),mapboxgl.Attribution=require(&quot;./ui/control/attribution&quot;),mapboxgl.Popup=require(&quot;./ui/popup&quot;),mapboxgl.GeoJSONSource=require(&quot;./source/geojson_source&quot;),mapboxgl.VideoSource=require(&quot;./source/video_source&quot;),mapboxgl.Style=require(&quot;./style/style&quot;),mapboxgl.LatLng=require(&quot;./geo/lat_lng&quot;),mapboxgl.LatLngBounds=require(&quot;./geo/lat_lng_bounds&quot;),mapboxgl.Point=require(&quot;point-geometry&quot;),mapboxgl.Evented=require(&quot;./util/evented&quot;),mapboxgl.util=require(&quot;./util/util&quot;),mapboxgl.supported=require(&quot;./util/browser&quot;).supported;var ajax=require(&quot;./util/ajax&quot;);mapboxgl.util.getJSON=ajax.getJSON,mapboxgl.util.getArrayBuffer=ajax.getArrayBuffer;var config=require(&quot;./util/config&quot;);mapboxgl.config=config,Object.defineProperty(mapboxgl,&quot;accessToken&quot;,{get:function(){return config.ACCESS_TOKEN},set:function(e){config.ACCESS_TOKEN=e}});
},{&quot;./geo/lat_lng&quot;:18,&quot;./geo/lat_lng_bounds&quot;:19,&quot;./source/geojson_source&quot;:36,&quot;./source/video_source&quot;:44,&quot;./style/style&quot;:52,&quot;./ui/control/attribution&quot;:75,&quot;./ui/control/navigation&quot;:77,&quot;./ui/map&quot;:81,&quot;./ui/popup&quot;:82,&quot;./util/ajax&quot;:84,&quot;./util/browser&quot;:85,&quot;./util/config&quot;:89,&quot;./util/evented&quot;:90,&quot;./util/util&quot;:96,&quot;point-geometry&quot;:118}],23:[function(require,module,exports){
    &quot;use strict&quot;;function drawBackground(t,a,r){var e,i=t.gl,o=a.paint[&quot;background-color&quot;],n=a.paint[&quot;background-image&quot;],l=a.paint[&quot;background-opacity&quot;],u=n?t.spriteAtlas.getPosition(n.from,!0):null,c=n?t.spriteAtlas.getPosition(n.to,!0):null;if(u&amp;&amp;c){e=t.patternShader,i.switchShader(e,r),i.uniform1i(e.u_image,0),i.uniform2fv(e.u_pattern_tl_a,u.tl),i.uniform2fv(e.u_pattern_br_a,u.br),i.uniform2fv(e.u_pattern_tl_b,c.tl),i.uniform2fv(e.u_pattern_br_b,c.br),i.uniform1f(e.u_opacity,l);var m=t.transform,f=u.size,s=c.size,_=m.locationCoordinate(m.center),d=1/Math.pow(2,m.zoomFraction);i.uniform1f(e.u_mix,n.t);var S=mat3.create();mat3.scale(S,S,[1/(f[0]*n.fromScale),1/(f[1]*n.fromScale)]),mat3.translate(S,S,[_.column*m.tileSize%(f[0]*n.fromScale),_.row*m.tileSize%(f[1]*n.fromScale)]),mat3.rotate(S,S,-m.angle),mat3.scale(S,S,[d*m.width/2,-d*m.height/2]);var b=mat3.create();mat3.scale(b,b,[1/(s[0]*n.toScale),1/(s[1]*n.toScale)]),mat3.translate(b,b,[_.column*m.tileSize%(s[0]*n.toScale),_.row*m.tileSize%(s[1]*n.toScale)]),mat3.rotate(b,b,-m.angle),mat3.scale(b,b,[d*m.width/2,-d*m.height/2]),i.uniformMatrix3fv(e.u_patternmatrix_a,!1,S),i.uniformMatrix3fv(e.u_patternmatrix_b,!1,b),t.spriteAtlas.bind(i,!0)}else e=t.fillShader,i.switchShader(e,r),i.disableVertexAttribArray(e.a_color),i.vertexAttrib4fv(e.a_color,o);i.disable(i.STENCIL_TEST),i.bindBuffer(i.ARRAY_BUFFER,t.backgroundBuffer),i.vertexAttribPointer(e.a_pos,t.backgroundBuffer.itemSize,i.SHORT,!1,0,0),i.drawArrays(i.TRIANGLE_STRIP,0,t.backgroundBuffer.itemCount),i.enable(i.STENCIL_TEST),i.stencilMask(0),i.stencilFunc(i.EQUAL,128,128)}var mat3=require(&quot;gl-matrix&quot;).mat3;module.exports=drawBackground;
},{&quot;gl-matrix&quot;:109}],24:[function(require,module,exports){
    &quot;use strict&quot;;function drawPlacementDebug(r,e,o,t){var a=t.elementGroups[e.ref||e.id].collisionBox;if(a){var i=r.gl,n=t.buffers.collisionBoxVertex,s=r.collisionBoxShader;i.enable(i.STENCIL_TEST),i.switchShader(s,o),n.bind(i,s),i.lineWidth(1);var u=12;i.vertexAttribPointer(s.a_pos,2,i.SHORT,!1,u,0),i.vertexAttribPointer(s.a_extrude,2,i.SHORT,!1,u,4),i.vertexAttribPointer(s.a_data,2,i.UNSIGNED_BYTE,!1,u,8),i.uniform1f(s.u_scale,Math.pow(2,r.transform.zoom-t.coord.z)),i.uniform1f(s.u_zoom,10*r.transform.zoom),i.uniform1f(s.u_maxzoom,10*(t.coord.z+1));var d=a.groups[0].vertexStartIndex,l=a.groups[0].vertexLength;i.drawArrays(i.LINES,d,l),i.disable(i.STENCIL_TEST)}}module.exports=drawPlacementDebug;
},{}],25:[function(require,module,exports){
    &quot;use strict&quot;;function drawDebug(e,r){var t=e.gl;t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.switchShader(e.debugShader,r.posMatrix),t.bindBuffer(t.ARRAY_BUFFER,e.debugBuffer),t.vertexAttribPointer(e.debugShader.a_pos,e.debugBuffer.itemSize,t.SHORT,!1,0,0),t.uniform4f(e.debugShader.u_color,1,0,0,1),t.lineWidth(4),t.drawArrays(t.LINE_STRIP,0,e.debugBuffer.itemCount);var i=textVertices(r.coord.toString(),50,200,5);t.bindBuffer(t.ARRAY_BUFFER,e.debugTextBuffer),t.bufferData(t.ARRAY_BUFFER,new Int16Array(i),t.STREAM_DRAW),t.vertexAttribPointer(e.debugShader.a_pos,e.debugTextBuffer.itemSize,t.SHORT,!1,0,0),t.lineWidth(8*browser.devicePixelRatio),t.uniform4f(e.debugShader.u_color,1,1,1,1),t.drawArrays(t.LINES,0,i.length/e.debugTextBuffer.itemSize),t.lineWidth(2*browser.devicePixelRatio),t.uniform4f(e.debugShader.u_color,0,0,0,1),t.drawArrays(t.LINES,0,i.length/e.debugTextBuffer.itemSize),t.blendFunc(t.ONE_MINUS_DST_ALPHA,t.ONE)}var textVertices=require(&quot;../lib/debugtext&quot;),browser=require(&quot;../util/browser&quot;);module.exports=drawDebug;
},{&quot;../lib/debugtext&quot;:21,&quot;../util/browser&quot;:85}],26:[function(require,module,exports){
    &quot;use strict&quot;;function drawFill(e,t,r,i){if(i.buffers){var a=i.elementGroups[t.ref||t.id];if(a){var l,n,o,f,s=e.gl,u=e.translateMatrix(r,i,t.paint[&quot;fill-translate&quot;],t.paint[&quot;fill-translate-anchor&quot;]),c=t.paint[&quot;fill-color&quot;];s.stencilMask(63),s.clear(s.STENCIL_BUFFER_BIT),s.stencilFunc(s.NOTEQUAL,128,128),s.stencilOpSeparate(s.FRONT,s.INCR_WRAP,s.KEEP,s.KEEP),s.stencilOpSeparate(s.BACK,s.DECR_WRAP,s.KEEP,s.KEEP),s.colorMask(!1,!1,!1,!1),s.switchShader(e.fillShader,u),l=i.buffers.fillVertex,l.bind(s),n=i.buffers.fillElement,n.bind(s);var m,d;s.disableVertexAttribArray(e.fillShader.a_color);for(var S=0;S&lt;a.groups.length;S++)o=a.groups[S],m=o.vertexStartIndex*l.itemSize,s.vertexAttribPointer(e.fillShader.a_pos,2,s.SHORT,!1,4,m+0),f=3*o.elementLength,d=o.elementStartIndex*n.itemSize,s.drawElements(s.TRIANGLES,f,s.UNSIGNED_SHORT,d);s.colorMask(!0,!0,!0,!0),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.stencilMask(0);var E=t.paint[&quot;fill-outline-color&quot;];if(t.paint[&quot;fill-antialias&quot;]===!0&amp;&amp;(!t.paint[&quot;fill-image&quot;]||E)){s.switchShader(e.outlineShader,u),s.lineWidth(2*browser.devicePixelRatio),E?s.stencilFunc(s.EQUAL,128,128):s.stencilFunc(s.EQUAL,128,191),s.uniform2f(e.outlineShader.u_world,s.drawingBufferWidth,s.drawingBufferHeight),l=i.buffers.fillVertex,n=i.buffers.outlineElement,n.bind(s),s.disableVertexAttribArray(e.outlineShader.a_color),s.vertexAttrib4fv(e.outlineShader.a_color,E?E:c);for(var _=0;_&lt;a.groups.length;_++)o=a.groups[_],m=o.vertexStartIndex*l.itemSize,s.vertexAttribPointer(e.outlineShader.a_pos,2,s.SHORT,!1,4,m+0),f=2*o.secondElementLength,d=o.secondElementStartIndex*n.itemSize,s.drawElements(s.LINES,f,s.UNSIGNED_SHORT,d)}var p,b=t.paint[&quot;fill-image&quot;],x=t.paint[&quot;fill-opacity&quot;]||1;if(b){var h=e.spriteAtlas.getPosition(b.from,!0),v=e.spriteAtlas.getPosition(b.to,!0);if(!h||!v)return;p=e.patternShader,s.switchShader(p,r),s.uniform1i(p.u_image,0),s.uniform2fv(p.u_pattern_tl_a,h.tl),s.uniform2fv(p.u_pattern_br_a,h.br),s.uniform2fv(p.u_pattern_tl_b,v.tl),s.uniform2fv(p.u_pattern_br_b,v.br),s.uniform1f(p.u_opacity,x),s.uniform1f(p.u_mix,b.t);var A=i.tileExtent/i.tileSize/Math.pow(2,e.transform.tileZoom-i.coord.z),g=mat3.create();mat3.scale(g,g,[1/(h.size[0]*A*b.fromScale),1/(h.size[1]*A*b.fromScale)]);var R=mat3.create();mat3.scale(R,R,[1/(v.size[0]*A*b.toScale),1/(v.size[1]*A*b.toScale)]),s.uniformMatrix3fv(p.u_patternmatrix_a,!1,g),s.uniformMatrix3fv(p.u_patternmatrix_b,!1,R),e.spriteAtlas.bind(s,!0)}else p=e.fillShader,s.switchShader(p,r),s.disableVertexAttribArray(p.a_color),s.vertexAttrib4fv(p.a_color,c);s.stencilFunc(s.NOTEQUAL,0,63),s.bindBuffer(s.ARRAY_BUFFER,e.tileExtentBuffer),s.vertexAttribPointer(p.a_pos,e.tileExtentBuffer.itemSize,s.SHORT,!1,0,0),s.drawArrays(s.TRIANGLE_STRIP,0,e.tileExtentBuffer.itemCount),s.stencilMask(0),s.stencilFunc(s.EQUAL,128,128)}}}var browser=require(&quot;../util/browser&quot;),mat3=require(&quot;gl-matrix&quot;).mat3;module.exports=drawFill;
},{&quot;../util/browser&quot;:85,&quot;gl-matrix&quot;:109}],27:[function(require,module,exports){
    &quot;use strict&quot;;var browser=require(&quot;../util/browser&quot;),mat2=require(&quot;gl-matrix&quot;).mat2;module.exports=function(t,e,i,r){if(r.buffers){var a=r.elementGroups[e.ref||e.id];if(a){var n=t.gl;if(!(e.paint[&quot;line-width&quot;]&lt;=0)){var l=1/browser.devicePixelRatio,o=e.paint[&quot;line-blur&quot;]+l,f=e.paint[&quot;line-width&quot;]/2,s=-1,u=0,m=0;e.paint[&quot;line-gap-width&quot;]&gt;0&amp;&amp;(s=e.paint[&quot;line-gap-width&quot;]/2+.5*l,f=e.paint[&quot;line-width&quot;],u=s-l/2);var _=u+f+l/2+m,h=e.paint[&quot;line-color&quot;],d=t.transform.scale/(1&lt;&lt;r.coord.z)/(r.tileExtent/r.tileSize),p=t.translateMatrix(i,r,e.paint[&quot;line-translate&quot;],e.paint[&quot;line-translate-anchor&quot;]),b=t.transform,c=mat2.create();mat2.scale(c,c,[1,Math.cos(b._pitch)]),mat2.rotate(c,c,t.transform.angle);var v,x=Math.sqrt(b.height*b.height/4*(1+b.altitude*b.altitude)),w=b.height/2*Math.tan(b._pitch),S=(x+w)/x-1,g=r.tileSize/t.transform.tileSize,A=e.paint[&quot;line-dasharray&quot;],z=e.paint[&quot;line-image&quot;];if(A){v=t.linesdfpatternShader,n.switchShader(v,p,r.exMatrix),n.uniform1f(v.u_ratio,d);var y=t.lineAtlas.getDash(A.from,&quot;round&quot;===e.layout[&quot;line-cap&quot;]),M=t.lineAtlas.getDash(A.to,&quot;round&quot;===e.layout[&quot;line-cap&quot;]);t.lineAtlas.bind(n);var E=Math.pow(2,Math.floor(Math.log(t.transform.scale)/Math.LN2)-r.coord.z)/8*g,P=[E/y.width/A.fromScale,-y.height/2],R=t.lineAtlas.width/(A.fromScale*y.width*256*browser.devicePixelRatio)/2,V=[E/M.width/A.toScale,-M.height/2],I=t.lineAtlas.width/(A.toScale*M.width*256*browser.devicePixelRatio)/2;n.uniform2fv(v.u_patternscale_a,P),n.uniform1f(v.u_tex_y_a,y.y),n.uniform2fv(v.u_patternscale_b,V),n.uniform1f(v.u_tex_y_b,M.y),n.uniform1i(v.u_image,0),n.uniform1f(v.u_sdfgamma,Math.max(R,I)),n.uniform1f(v.u_mix,A.t)}else if(z){var N=t.spriteAtlas.getPosition(z.from,!0),T=t.spriteAtlas.getPosition(z.to,!0);if(!N||!T)return;var q=r.tileExtent/r.tileSize/Math.pow(2,t.transform.tileZoom-r.coord.z)*g;t.spriteAtlas.bind(n,!0),v=t.linepatternShader,n.switchShader(v,p,r.exMatrix),n.uniform1f(v.u_ratio,d),n.uniform2fv(v.u_pattern_size_a,[N.size[0]*q*z.fromScale,T.size[1]]),n.uniform2fv(v.u_pattern_size_b,[T.size[0]*q*z.toScale,T.size[1]]),n.uniform2fv(v.u_pattern_tl_a,N.tl),n.uniform2fv(v.u_pattern_br_a,N.br),n.uniform2fv(v.u_pattern_tl_b,T.tl),n.uniform2fv(v.u_pattern_br_b,T.br),n.uniform1f(v.u_fade,z.t),n.disableVertexAttribArray(v.a_opacity),n.vertexAttrib1f(v.a_opacity,e.paint[&quot;line-opacity&quot;])}else v=t.lineShader,n.switchShader(v,p,r.exMatrix),n.uniform1f(v.u_ratio,d),n.uniform1f(v.u_extra,S),n.uniformMatrix2fv(v.u_antialiasingmatrix,!1,c);void 0!==v.a_color&amp;&amp;(n.disableVertexAttribArray(v.a_color),n.vertexAttrib4fv(v.a_color,h)),n.disableVertexAttribArray(v.a_linewidth),n.vertexAttrib2f(v.a_linewidth,_,s),n.disableVertexAttribArray(v.a_blur),n.vertexAttrib1f(v.a_blur,o);var D=r.buffers.lineVertex;D.bind(n);var G=r.buffers.lineElement;G.bind(n);for(var L=0;L&lt;a.groups.length;L++){var H=a.groups[L],O=H.vertexStartIndex*D.itemSize;n.vertexAttribPointer(v.a_pos,2,n.SHORT,!1,8,O+0),n.vertexAttribPointer(v.a_data,4,n.BYTE,!1,8,O+4);var B=3*H.elementLength,U=H.elementStartIndex*G.itemSize;n.drawElements(n.TRIANGLES,B,n.UNSIGNED_SHORT,U)}}}}};
},{&quot;../util/browser&quot;:85,&quot;gl-matrix&quot;:109}],28:[function(require,module,exports){
    &quot;use strict&quot;;function drawRaster(t,r,e,a){var i=t.gl;i.disable(i.STENCIL_TEST);var o=t.rasterShader;i.switchShader(o,e),i.uniform1f(o.u_brightness_low,r.paint[&quot;raster-brightness-min&quot;]),i.uniform1f(o.u_brightness_high,r.paint[&quot;raster-brightness-max&quot;]),i.uniform1f(o.u_saturation_factor,saturationFactor(r.paint[&quot;raster-saturation&quot;])),i.uniform1f(o.u_contrast_factor,contrastFactor(r.paint[&quot;raster-contrast&quot;])),i.uniform3fv(o.u_spin_weights,spinWeights(r.paint[&quot;raster-hue-rotate&quot;]));var n,u,s=a.source&amp;&amp;a.source._pyramid.findLoadedParent(a.coord,0,{}),c=getOpacities(a,s,r,t.transform);i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.texture),s?(i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,s.texture),n=Math.pow(2,s.coord.z-a.coord.z),u=[a.coord.x*n%1,a.coord.y*n%1]):c[1]=0,i.uniform2fv(o.u_tl_parent,u||[0,0]),i.uniform1f(o.u_scale_parent,n||1),i.uniform1f(o.u_buffer_scale,1),i.uniform1f(o.u_opacity0,c[0]),i.uniform1f(o.u_opacity1,c[1]),i.uniform1i(o.u_image0,0),i.uniform1i(o.u_image1,1),i.bindBuffer(i.ARRAY_BUFFER,a.boundsBuffer||t.tileExtentBuffer),i.vertexAttribPointer(o.a_pos,2,i.SHORT,!1,8,0),i.vertexAttribPointer(o.a_texture_pos,2,i.SHORT,!1,8,4),i.drawArrays(i.TRIANGLE_STRIP,0,4),i.enable(i.STENCIL_TEST)}function spinWeights(t){t*=Math.PI/180;var r=Math.sin(t),e=Math.cos(t);return[(2*e+1)/3,(-Math.sqrt(3)*r-e+1)/3,(Math.sqrt(3)*r-e+1)/3]}function contrastFactor(t){return t&gt;0?1/(1-t):1+t}function saturationFactor(t){return t&gt;0?1-1/(1.001-t):-t}function getOpacities(t,r,e,a){if(!t.source)return[1,0];var i=(new Date).getTime(),o=e.paint[&quot;raster-fade-duration&quot;],n=(i-t.timeAdded)/o,u=r?(i-r.timeAdded)/o:-1,s=t.source._pyramid.coveringZoomLevel(a),c=r?Math.abs(r.coord.z-s)&gt;Math.abs(t.coord.z-s):!1,f=[];!r||c?(f[0]=util.clamp(n,0,1),f[1]=1-f[0]):(f[0]=util.clamp(1-u,0,1),f[1]=1-f[0]);var d=e.paint[&quot;raster-opacity&quot;];return f[0]*=d,f[1]*=d,f}var util=require(&quot;../util/util&quot;);module.exports=drawRaster;
},{&quot;../util/util&quot;:96}],29:[function(require,module,exports){
    &quot;use strict&quot;;function drawSymbols(t,e,r,a){if(a.buffers){var i=a.elementGroups[e.ref||e.id];if(i){var o=!(e.layout[&quot;text-allow-overlap&quot;]||e.layout[&quot;icon-allow-overlap&quot;]||e.layout[&quot;text-ignore-placement&quot;]||e.layout[&quot;icon-ignore-placement&quot;]),l=t.gl;o&amp;&amp;l.disable(l.STENCIL_TEST),i.text.groups.length&amp;&amp;drawSymbol(t,e,r,a,i.text,&quot;text&quot;,!0),i.icon.groups.length&amp;&amp;drawSymbol(t,e,r,a,i.icon,&quot;icon&quot;,i.sdfIcons),drawCollisionDebug(t,e,r,a),o&amp;&amp;l.enable(l.STENCIL_TEST)}}}function drawSymbol(t,e,r,a,i,o,l){var n=t.gl;r=t.translateMatrix(r,a,e.paint[o+&quot;-translate&quot;],e.paint[o+&quot;-translate-anchor&quot;]);var s,m,f,u=t.transform,d=&quot;map&quot;===e.layout[o+&quot;-rotation-alignment&quot;],h=d;h?(s=mat4.create(),m=a.tileExtent/a.tileSize/Math.pow(2,t.transform.zoom-a.coord.z),f=1/Math.cos(u._pitch)):(s=mat4.clone(a.exMatrix),m=t.transform.altitude,f=1),mat4.scale(s,s,[m,m,1]);var p=e.paint[o+&quot;-size&quot;],x=p/defaultSizes[o];mat4.scale(s,s,[x,x,1]);var b,g,c,S,v=Math.sqrt(u.height*u.height/4*(1+u.altitude*u.altitude)),_=u.height/2*Math.tan(u._pitch),y=(v+_)/v-1,z=&quot;text&quot;===o;if(z||t.style.sprite.loaded()){n.activeTexture(n.TEXTURE0),b=l?t.sdfShader:t.iconShader,z?(t.glyphAtlas.updateTexture(n),g=a.buffers.glyphVertex,c=a.buffers.glyphElement,S=[t.glyphAtlas.width/4,t.glyphAtlas.height/4]):(t.spriteAtlas.bind(n,d||t.options.rotating||t.options.zooming||1!==x||l||t.transform.pitch),g=a.buffers.iconVertex,c=a.buffers.iconElement,S=[t.spriteAtlas.width/4,t.spriteAtlas.height/4]),n.switchShader(b,r,s),n.uniform1i(b.u_texture,0),n.uniform2fv(b.u_texsize,S),n.uniform1i(b.u_skewed,h),n.uniform1f(b.u_extra,y);var A=Math.log(p/e.layout[o+&quot;-max-size&quot;])/Math.LN2||0;n.uniform1f(b.u_zoom,10*(t.transform.zoom-A));var w=t.frameHistory.getFadeProperties(300);n.uniform1f(b.u_fadedist,10*w.fadedist),n.uniform1f(b.u_minfadezoom,Math.floor(10*w.minfadezoom)),n.uniform1f(b.u_maxfadezoom,Math.floor(10*w.maxfadezoom)),n.uniform1f(b.u_fadezoom,10*(t.transform.zoom+w.bump));var E,T,I,N;if(c.bind(n),l){var M=8,L=1.19,R=6,G=.105*defaultSizes[o]/p/browser.devicePixelRatio;n.disableVertexAttribArray(b.a_gamma),n.vertexAttrib1f(b.a_gamma,G*f),n.disableVertexAttribArray(b.a_color),n.vertexAttrib4fv(b.a_color,e.paint[o+&quot;-color&quot;]),n.disableVertexAttribArray(b.a_buffer),n.vertexAttrib1f(b.a_buffer,.75);for(var V=0;V&lt;i.groups.length;V++)E=i.groups[V],T=E.vertexStartIndex*g.itemSize,g.bind(n,b,T),I=3*E.elementLength,N=E.elementStartIndex*c.itemSize,n.drawElements(n.TRIANGLES,I,n.UNSIGNED_SHORT,N);if(e.paint[o+&quot;-halo-color&quot;]){n.vertexAttrib4fv(b.a_color,e.paint[o+&quot;-halo-color&quot;]),n.vertexAttrib1f(b.a_buffer,(R-e.paint[o+&quot;-halo-width&quot;]/x)/M),n.vertexAttrib1f(b.a_gamma,(e.paint[o+&quot;-halo-blur&quot;]*L/x/M+G)*f);for(var D=0;D&lt;i.groups.length;D++)E=i.groups[D],T=E.vertexStartIndex*g.itemSize,g.bind(n,b,T),I=3*E.elementLength,N=E.elementStartIndex*c.itemSize,n.drawElements(n.TRIANGLES,I,n.UNSIGNED_SHORT,N)}}else{n.disableVertexAttribArray(b.a_opacity),n.vertexAttrib1f(b.a_opacity,e.paint[&quot;icon-opacity&quot;]);for(var q=0;q&lt;i.groups.length;q++)E=i.groups[q],T=E.vertexStartIndex*g.itemSize,g.bind(n,b,T),I=3*E.elementLength,N=E.elementStartIndex*c.itemSize,n.drawElements(n.TRIANGLES,I,n.UNSIGNED_SHORT,N)}}}var browser=require(&quot;../util/browser&quot;),mat4=require(&quot;gl-matrix&quot;).mat4,drawCollisionDebug=require(&quot;./draw_collision_debug&quot;);module.exports=drawSymbols;var defaultSizes={icon:1,text:24};
},{&quot;../util/browser&quot;:85,&quot;./draw_collision_debug&quot;:24,&quot;gl-matrix&quot;:109}],30:[function(require,module,exports){
    &quot;use strict&quot;;function drawVertices(e,r,t,i){function o(r,t,i,o){f.switchShader(e.dotShader,i),f.uniform1f(e.dotShader.u_size,4*browser.devicePixelRatio),f.uniform1f(e.dotShader.u_blur,.25),f.uniform4fv(e.dotShader.u_color,[.1,0,0,.1]),r.bind(f,e.dotShader,0);for(var a=0;a&lt;t.length;a++){var s=t[a],u=s.vertexStartIndex,d=s.vertexLength;f.vertexAttribPointer(e.dotShader.a_pos,2,f.SHORT,!1,o,0),f.drawArrays(f.POINTS,u,d)}}var f=e.gl;if(i&amp;&amp;i.buffers){var a=i.elementGroups[r.ref||r.id];if(a){if(f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),&quot;fill&quot;===r.type)o(i.buffers.fillVertex,a.groups,t,4);else if(&quot;symbol&quot;===r.type)o(i.buffers.iconVertex,a.icon.groups,t,16),o(i.buffers.glyphVertex,a.text.groups,t,16);else if(&quot;line&quot;===r.type){var s=mat4.clone(t);mat4.scale(s,s,[.5,.5,1]),o(i.buffers.lineVertex,a.groups,s,8)}f.blendFunc(f.ONE_MINUS_DST_ALPHA,f.ONE)}}}var browser=require(&quot;../util/browser&quot;),mat4=require(&quot;gl-matrix&quot;).mat4;module.exports=drawVertices;
},{&quot;../util/browser&quot;:85,&quot;gl-matrix&quot;:109}],31:[function(require,module,exports){
    &quot;use strict&quot;;function FrameHistory(){this.frameHistory=[]}module.exports=FrameHistory,FrameHistory.prototype.getFadeProperties=function(t){void 0===t&amp;&amp;(t=300);for(var e=(new Date).getTime();this.frameHistory.length&gt;3&amp;&amp;this.frameHistory[1].time+t&lt;e;)this.frameHistory.shift();this.frameHistory[1].time+t&lt;e&amp;&amp;(this.frameHistory[0].z=this.frameHistory[1].z);var r=this.frameHistory.length;3&gt;r&amp;&amp;console.warn(&quot;there should never be less than three frames in the history&quot;);var i=this.frameHistory[0].z,s=this.frameHistory[r-1],o=s.z,a=Math.min(i,o),m=Math.max(i,o),h=s.z-this.frameHistory[1].z,f=s.time-this.frameHistory[1].time,y=h/(f/t);isNaN(y)&amp;&amp;console.warn(&quot;fadedist should never be NaN&quot;);var n=(e-s.time)/t*y;return{fadedist:y,minfadezoom:a,maxfadezoom:m,bump:n}},FrameHistory.prototype.record=function(t){var e=(new Date).getTime();this.frameHistory.length||this.frameHistory.push({time:0,z:t},{time:0,z:t}),(2===this.frameHistory.length||this.frameHistory[this.frameHistory.length-1].z!==t)&amp;&amp;this.frameHistory.push({time:e,z:t})};
},{}],32:[function(require,module,exports){
    &quot;use strict&quot;;var shaders=require(&quot;./shaders&quot;),util=require(&quot;../util/util&quot;);exports.extend=function(r){var t=r.lineWidth,e=r.getParameter(r.ALIASED_LINE_WIDTH_RANGE);return r.lineWidth=function(i){t.call(r,util.clamp(i,e[0],e[1]))},r.getShader=function(r,t){var e=t===this.FRAGMENT_SHADER?&quot;fragment&quot;:&quot;vertex&quot;;if(!shaders[r]||!shaders[r][e])throw new Error(&quot;Could not find shader &quot;+r);var i=this.createShader(t),a=shaders[r][e];if(&quot;undefined&quot;==typeof orientation&amp;&amp;(a=a.replace(/ highp /g,&quot; &quot;)),this.shaderSource(i,a),this.compileShader(i),!this.getShaderParameter(i,this.COMPILE_STATUS))throw new Error(this.getShaderInfoLog(i));return i},r.initializeShader=function(r,t,e){var i={program:this.createProgram(),fragment:this.getShader(r,this.FRAGMENT_SHADER),vertex:this.getShader(r,this.VERTEX_SHADER),attributes:[]};if(this.attachShader(i.program,i.vertex),this.attachShader(i.program,i.fragment),this.bindAttribLocation(i.program,0,&quot;a_pos&quot;),this.linkProgram(i.program),this.getProgramParameter(i.program,this.LINK_STATUS)){for(var a=0;a&lt;t.length;a++)i[t[a]]=this.getAttribLocation(i.program,t[a]),i.attributes.push(i[t[a]]);for(var h=0;h&lt;e.length;h++)i[e[h]]=this.getUniformLocation(i.program,e[h])}else console.error(this.getProgramInfoLog(i.program));return i},r.switchShader=function(r,t,e){if(t||console.trace(&quot;posMatrix does not have required argument&quot;),this.currentShader!==r){this.useProgram(r.program);for(var i=this.currentShader?this.currentShader.attributes:[],a=0;a&lt;i.length;a++)this.disableVertexAttribArray(i[a]);for(var h=r.attributes,o=0;o&lt;h.length;o++)this.enableVertexAttribArray(h[o]);this.currentShader=r}r.posMatrix!==t&amp;&amp;(this.uniformMatrix4fv(r.u_matrix,!1,t),r.posMatrix=t),e&amp;&amp;r.exMatrix!==e&amp;&amp;r.u_exmatrix&amp;&amp;(this.uniformMatrix4fv(r.u_exmatrix,!1,e),r.exMatrix=e)},r.vertexAttrib2fv=function(t,e){r.vertexAttrib2f(t,e[0],e[1])},r.vertexAttrib3fv=function(t,e){r.vertexAttrib3f(t,e[0],e[1],e[2])},r.vertexAttrib4fv=function(t,e){r.vertexAttrib4f(t,e[0],e[1],e[2],e[3])},r};
},{&quot;../util/util&quot;:96,&quot;./shaders&quot;:35}],33:[function(require,module,exports){
    &quot;use strict&quot;;function LineAtlas(t,i){this.width=t,this.height=i,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}}module.exports=LineAtlas,LineAtlas.prototype.setSprite=function(t){this.sprite=t},LineAtlas.prototype.getDash=function(t,i){var e=t.join(&quot;,&quot;)+i;return this.positions[e]||(this.positions[e]=this.addDash(t,i)),this.positions[e]},LineAtlas.prototype.addDash=function(t,i){var e=i?7:0,h=2*e+1,s=128;if(this.nextRow+h&gt;this.height)return console.warn(&quot;LineAtlas out of space&quot;),null;for(var a=0,r=0;r&lt;t.length;r++)a+=t[r];for(var n=this.width/a,o=n/2,d=t.length%2===1,E=-e;e&gt;=E;E++)for(var T=this.nextRow+e+E,l=this.width*T,R=d?-t[t.length-1]:0,u=t[0],g=1,p=0;p&lt;this.width;p++){for(;p/n&gt;u;)R=u,u+=t[g],d&amp;&amp;g===t.length-1&amp;&amp;(u+=t[0]),g++;var x,f=Math.abs(p-R*n),A=Math.abs(p-u*n),w=Math.min(f,A),_=g%2===1;if(i){var y=e?E/e*(o+1):0;if(_){var D=o-Math.abs(y);x=Math.sqrt(w*w+D*D)}else x=o-Math.sqrt(w*w+y*y)}else x=(_?1:-1)*w;this.data[3+4*(l+p)]=Math.max(0,Math.min(255,x+s))}var c={y:(this.nextRow+e+.5)/this.height,height:2*e/this.height,width:a};return this.nextRow+=h,this.dirty=!0,c},LineAtlas.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&amp;&amp;(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},LineAtlas.prototype.debug=function(){var t=document.createElement(&quot;canvas&quot;);document.body.appendChild(t),t.style.position=&quot;absolute&quot;,t.style.top=0,t.style.left=0,t.style.background=&quot;#ff0&quot;,t.width=this.width,t.height=this.height;for(var i=t.getContext(&quot;2d&quot;),e=i.getImageData(0,0,this.width,this.height),h=0;h&lt;this.data.length;h++)if(this.sdf){var s=4*h;e.data[s]=e.data[s+1]=e.data[s+2]=0,e.data[s+3]=this.data[h]}else e.data[h]=this.data[h];i.putImageData(e,0,0)};
},{}],34:[function(require,module,exports){
    &quot;use strict&quot;;function Painter(t,e){this.gl=glutil.extend(t),this.transform=e,this.reusableTextures={},this.preFbos={},this.frameHistory=new FrameHistory,this.setup()}var glutil=require(&quot;./gl_util&quot;),browser=require(&quot;../util/browser&quot;),mat4=require(&quot;gl-matrix&quot;).mat4,FrameHistory=require(&quot;./frame_history&quot;);module.exports=Painter,Painter.prototype.resize=function(t,e){var i=this.gl;this.width=t*browser.devicePixelRatio,this.height=e*browser.devicePixelRatio,i.viewport(0,0,this.width,this.height)},Painter.prototype.setup=function(){var t=this.gl;t.verbose=!0,t.enable(t.BLEND),t.blendFunc(t.ONE_MINUS_DST_ALPHA,t.ONE),t.enable(t.STENCIL_TEST),this.debugShader=t.initializeShader(&quot;debug&quot;,[&quot;a_pos&quot;],[&quot;u_matrix&quot;,&quot;u_pointsize&quot;,&quot;u_color&quot;]),this.gaussianShader=t.initializeShader(&quot;gaussian&quot;,[&quot;a_pos&quot;],[&quot;u_matrix&quot;,&quot;u_image&quot;,&quot;u_offset&quot;]),this.rasterShader=t.initializeShader(&quot;raster&quot;,[&quot;a_pos&quot;,&quot;a_texture_pos&quot;],[&quot;u_matrix&quot;,&quot;u_brightness_low&quot;,&quot;u_brightness_high&quot;,&quot;u_saturation_factor&quot;,&quot;u_spin_weights&quot;,&quot;u_contrast_factor&quot;,&quot;u_opacity0&quot;,&quot;u_opacity1&quot;,&quot;u_image0&quot;,&quot;u_image1&quot;,&quot;u_tl_parent&quot;,&quot;u_scale_parent&quot;,&quot;u_buffer_scale&quot;]),this.lineShader=t.initializeShader(&quot;line&quot;,[&quot;a_pos&quot;,&quot;a_data&quot;,&quot;a_color&quot;,&quot;a_linewidth&quot;,&quot;a_blur&quot;],[&quot;u_matrix&quot;,&quot;u_ratio&quot;,&quot;u_extra&quot;,&quot;u_antialiasingmatrix&quot;]),this.linepatternShader=t.initializeShader(&quot;linepattern&quot;,[&quot;a_pos&quot;,&quot;a_data&quot;,&quot;a_linewidth&quot;,&quot;a_blur&quot;,&quot;a_opacity&quot;],[&quot;u_matrix&quot;,&quot;u_exmatrix&quot;,&quot;u_ratio&quot;,&quot;u_pattern_size_a&quot;,&quot;u_pattern_size_b&quot;,&quot;u_pattern_tl_a&quot;,&quot;u_pattern_br_a&quot;,&quot;u_pattern_tl_b&quot;,&quot;u_pattern_br_b&quot;,&quot;u_fade&quot;]),this.linesdfpatternShader=t.initializeShader(&quot;linesdfpattern&quot;,[&quot;a_pos&quot;,&quot;a_data&quot;,&quot;a_color&quot;,&quot;a_linewidth&quot;,&quot;a_blur&quot;],[&quot;u_matrix&quot;,&quot;u_exmatrix&quot;,&quot;u_ratio&quot;,&quot;u_patternscale_a&quot;,&quot;u_tex_y_a&quot;,&quot;u_patternscale_b&quot;,&quot;u_tex_y_b&quot;,&quot;u_image&quot;,&quot;u_sdfgamma&quot;,&quot;u_mix&quot;]),this.dotShader=t.initializeShader(&quot;dot&quot;,[&quot;a_pos&quot;],[&quot;u_matrix&quot;,&quot;u_size&quot;,&quot;u_color&quot;,&quot;u_blur&quot;]),this.sdfShader=t.initializeShader(&quot;sdf&quot;,[&quot;a_pos&quot;,&quot;a_offset&quot;,&quot;a_data1&quot;,&quot;a_data2&quot;,&quot;a_color&quot;,&quot;a_buffer&quot;,&quot;a_gamma&quot;],[&quot;u_matrix&quot;,&quot;u_exmatrix&quot;,&quot;u_texture&quot;,&quot;u_texsize&quot;,&quot;u_zoom&quot;,&quot;u_fadedist&quot;,&quot;u_minfadezoom&quot;,&quot;u_maxfadezoom&quot;,&quot;u_fadezoom&quot;,&quot;u_skewed&quot;,&quot;u_extra&quot;]),this.iconShader=t.initializeShader(&quot;icon&quot;,[&quot;a_pos&quot;,&quot;a_offset&quot;,&quot;a_data1&quot;,&quot;a_data2&quot;,&quot;a_opacity&quot;],[&quot;u_matrix&quot;,&quot;u_exmatrix&quot;,&quot;u_texture&quot;,&quot;u_texsize&quot;,&quot;u_zoom&quot;,&quot;u_fadedist&quot;,&quot;u_minfadezoom&quot;,&quot;u_maxfadezoom&quot;,&quot;u_fadezoom&quot;,&quot;u_skewed&quot;,&quot;u_extra&quot;]),this.outlineShader=t.initializeShader(&quot;outline&quot;,[&quot;a_pos&quot;,&quot;a_color&quot;],[&quot;u_matrix&quot;,&quot;u_world&quot;]),this.patternShader=t.initializeShader(&quot;pattern&quot;,[&quot;a_pos&quot;],[&quot;u_matrix&quot;,&quot;u_pattern_tl_a&quot;,&quot;u_pattern_br_a&quot;,&quot;u_pattern_tl_b&quot;,&quot;u_pattern_br_b&quot;,&quot;u_mix&quot;,&quot;u_patternmatrix_a&quot;,&quot;u_patternmatrix_b&quot;,&quot;u_opacity&quot;,&quot;u_image&quot;]),this.fillShader=t.initializeShader(&quot;fill&quot;,[&quot;a_pos&quot;,&quot;a_color&quot;],[&quot;u_matrix&quot;]),this.collisionBoxShader=t.initializeShader(&quot;collisionbox&quot;,[&quot;a_pos&quot;,&quot;a_extrude&quot;,&quot;a_data&quot;],[&quot;u_matrix&quot;,&quot;u_scale&quot;,&quot;u_zoom&quot;,&quot;u_maxzoom&quot;]),this.identityMatrix=mat4.create(),this.backgroundBuffer=t.createBuffer(),this.backgroundBuffer.itemSize=2,this.backgroundBuffer.itemCount=4,t.bindBuffer(t.ARRAY_BUFFER,this.backgroundBuffer),t.bufferData(t.ARRAY_BUFFER,new Int16Array([-1,-1,1,-1,-1,1,1,1]),t.STATIC_DRAW),this.setExtent(4096),this.debugTextBuffer=t.createBuffer(),this.debugTextBuffer.itemSize=2},Painter.prototype.setExtent=function(t){if(t&amp;&amp;t!==this.tileExtent){this.tileExtent=t;var e=this.gl;this.tileExtentBuffer=e.createBuffer(),this.tileExtentBuffer.itemSize=4,this.tileExtentBuffer.itemCount=4,e.bindBuffer(e.ARRAY_BUFFER,this.tileExtentBuffer),e.bufferData(e.ARRAY_BUFFER,new Int16Array([0,0,0,0,this.tileExtent,0,32767,0,0,this.tileExtent,0,32767,this.tileExtent,this.tileExtent,32767,32767]),e.STATIC_DRAW),this.debugBuffer=e.createBuffer(),this.debugBuffer.itemSize=2,this.debugBuffer.itemCount=5,e.bindBuffer(e.ARRAY_BUFFER,this.debugBuffer),e.bufferData(e.ARRAY_BUFFER,new Int16Array([0,0,this.tileExtent-1,0,this.tileExtent-1,this.tileExtent-1,0,this.tileExtent-1,0,0]),e.STATIC_DRAW)}},Painter.prototype.clearColor=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},Painter.prototype.clearStencil=function(){var t=this.gl;t.clearStencil(0),t.stencilMask(255),t.clear(t.STENCIL_BUFFER_BIT)},Painter.prototype.drawClippingMask=function(t){var e=this.gl;e.switchShader(this.fillShader,t.posMatrix),e.colorMask(!1,!1,!1,!1),e.clearStencil(0),e.stencilMask(191),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.EQUAL,192,64),e.stencilMask(192),e.stencilOp(e.REPLACE,e.KEEP,e.KEEP),e.disableVertexAttribArray(this.fillShader.a_color),e.bindBuffer(e.ARRAY_BUFFER,this.tileExtentBuffer),e.vertexAttribPointer(this.fillShader.a_pos,this.tileExtentBuffer.itemSize,e.SHORT,!1,8,0),e.drawArrays(e.TRIANGLE_STRIP,0,this.tileExtentBuffer.itemCount),e.stencilFunc(e.EQUAL,128,128),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.stencilMask(0),e.colorMask(!0,!0,!0,!0),e.enableVertexAttribArray(this.fillShader.a_color)},Painter.prototype.prepareBuffers=function(){},Painter.prototype.bindDefaultFramebuffer=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)};var draw={symbol:require(&quot;./draw_symbol&quot;),line:require(&quot;./draw_line&quot;),fill:require(&quot;./draw_fill&quot;),raster:require(&quot;./draw_raster&quot;),background:require(&quot;./draw_background&quot;),debug:require(&quot;./draw_debug&quot;),vertices:require(&quot;./draw_vertices&quot;)};Painter.prototype.render=function(t,e){this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.spriteAtlas=t.spriteAtlas,this.spriteAtlas.setSprite(t.sprite),this.glyphAtlas=t.glyphAtlas,this.glyphAtlas.bind(this.gl),this.frameHistory.record(this.transform.zoom),this.prepareBuffers(),this.clearColor();for(var i=t._groups.length-1;i&gt;=0;i--){var r=t._groups[i],a=t.sources[r.source];a?(this.clearStencil(),a.render(r,this)):void 0===r.source&amp;&amp;this.drawLayers(r,this.identityMatrix)}},Painter.prototype.drawTile=function(t,e){this.setExtent(t.tileExtent),this.drawClippingMask(t),this.drawLayers(e,t.posMatrix,t),this.options.debug&amp;&amp;draw.debug(this,t)},Painter.prototype.drawLayers=function(t,e,i){for(var r=t.length-1;r&gt;=0;r--){var a=t[r];a.hidden||(draw[a.type](this,a,e,i),this.options.vertices&amp;&amp;draw.vertices(this,a,e,i))}},Painter.prototype.drawStencilBuffer=function(){var t=this.gl;t.switchShader(this.fillShader,this.identityMatrix),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.stencilMask(0),t.stencilFunc(t.EQUAL,128,128),t.bindBuffer(t.ARRAY_BUFFER,this.backgroundBuffer),t.vertexAttribPointer(this.fillShader.a_pos,this.backgroundBuffer.itemSize,t.SHORT,!1,0,0),t.disableVertexAttribArray(this.fillShader.a_color),t.vertexAttrib4fv(this.fillShader.a_color,[0,0,0,.5]),t.drawArrays(t.TRIANGLE_STRIP,0,this.tileExtentBuffer.itemCount),t.blendFunc(t.ONE_MINUS_DST_ALPHA,t.ONE)},Painter.prototype.translateMatrix=function(t,e,i,r){if(!i[0]&amp;&amp;!i[1])return t;if(&quot;viewport&quot;===r){var a=Math.sin(-this.transform.angle),s=Math.cos(-this.transform.angle);i=[i[0]*s-i[1]*a,i[0]*a+i[1]*s]}var n=this.transform.scale/(1&lt;&lt;e.coord.z)/(e.tileExtent/e.tileSize),u=[i[0]/n,i[1]/n,0],_=new Float32Array(16);return mat4.translate(_,t,u),_},Painter.prototype.saveTexture=function(t){var e=this.reusableTextures[t.size];e?e.push(t):this.reusableTextures[t.size]=[t]},Painter.prototype.getTexture=function(t){var e=this.reusableTextures[t];return e&amp;&amp;e.length&gt;0?e.pop():null};
},{&quot;../util/browser&quot;:85,&quot;./draw_background&quot;:23,&quot;./draw_debug&quot;:25,&quot;./draw_fill&quot;:26,&quot;./draw_line&quot;:27,&quot;./draw_raster&quot;:28,&quot;./draw_symbol&quot;:29,&quot;./draw_vertices&quot;:30,&quot;./frame_history&quot;:31,&quot;./gl_util&quot;:32,&quot;gl-matrix&quot;:109}],35:[function(require,module,exports){
    &quot;use strict&quot;;var glify=void 0;module.exports={debug:{vertex:&quot;precision mediump float;attribute vec2 a_pos;uniform float u_pointsize;uniform mat4 u_matrix;void main(){gl_Position=u_matrix*vec4(a_pos,step(32767.,a_pos.x),1);gl_PointSize=u_pointsize;}&quot;,fragment:&quot;precision mediump float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}&quot;},dot:{vertex:&quot;precision mediump float;uniform mat4 u_matrix;uniform float u_size;attribute vec2 a_pos;void main(){gl_Position=u_matrix*vec4(a_pos,0,1);gl_PointSize=u_size;}&quot;,fragment:&quot;precision mediump float;uniform vec4 u_color;uniform float u_blur;void main(){float a,b;a=length(gl_PointCoord-.5);b=smoothstep(.5,.5-u_blur,a);gl_FragColor=u_color*b;}&quot;},fill:{vertex:&quot;precision mediump float;uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec4 a_color;varying vec4 a;void main(){gl_Position=u_matrix*vec4(a_pos,0,1);gl_PointSize=2.;a=a_color;}&quot;,fragment:&quot;precision mediump float;varying vec4 a;void main(){gl_FragColor=a;}&quot;},gaussian:{vertex:&quot;precision mediump float;attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_offset;varying vec2 a[3];void main(){gl_Position=u_matrix*vec4(a_pos,0,1);vec2 b=gl_Position.xy/2.+.5;a[0]=b;a[1]=b+u_offset*1.1824255238063563;a[2]=b-u_offset*1.1824255238063563;}&quot;,fragment:&quot;precision mediump float;uniform sampler2D u_image;varying vec2 a[3];void main(){vec4 b=vec4(0);b+=texture2D(u_image,a[0])*.40261994689424746;b+=texture2D(u_image,a[1])*.2986900265528763;b+=texture2D(u_image,a[2])*.2986900265528763;gl_FragColor=b;}&quot;},line:{vertex:&quot;precision mediump float;attribute vec2 a_pos,a_linewidth;attribute vec4 a_data,a_color;attribute float a_blur;uniform highp mat4 u_matrix;uniform float u_ratio,u_extra;uniform mat2 u_antialiasingmatrix;varying vec2 a,e;varying float b,d,f;varying vec4 c;void main(){vec2 g,h;g=a_data.xy;h=mod(a_pos,2.);h.y=sign(h.y-.5);a=h;vec4 i=vec4(a_linewidth.s*g*.015873016,0,0);gl_Position=u_matrix*vec4(floor(a_pos*.5)+i.xy/u_ratio,0,1);float j,k,l;j=gl_Position.y/gl_Position.w;k=length(g)/length(u_antialiasingmatrix*g);l=1./(1.-j*u_extra);d=l*k;c=a_color;e=a_linewidth;f=a_blur;}&quot;,fragment:&quot;precision mediump float;uniform vec2 u_dasharray;varying vec4 c;varying vec2 a,e;varying float b,d,f;void main(){float g,h,i;g=length(a)*e.s;h=f*d;i=clamp(min(g-(e.t-h),e.s-g)/h,0.,1.);gl_FragColor=c*i;}&quot;},linepattern:{vertex:&quot;precision mediump float;attribute vec2 a_pos,a_linewidth;attribute vec4 a_data;attribute float a_blur,a_opacity;uniform highp mat4 u_matrix;uniform mat4 u_exmatrix;uniform float u_ratio;varying vec2 a,c;varying float b,d,e;void main(){vec2 f,h,i,j;f=a_data.xy;float g=a_data.z*128.+a_data.w;h=mod(a_pos,2.);h.y=sign(h.y-.5);a=h;i=f*.015873016;j=a_linewidth.s*i;gl_Position=u_matrix*vec4(floor(a_pos*.5)+j.xy/u_ratio,0,1);b=g;c=a_linewidth;d=a_blur;e=a_opacity;}&quot;,fragment:&quot;precision mediump float;uniform float u_point,u_fade;uniform vec2 u_pattern_size_a,u_pattern_size_b,u_pattern_tl_a,u_pattern_br_a,u_pattern_tl_b,u_pattern_br_b;uniform sampler2D u_image;varying vec2 a,c;varying float b,d,e;void main(){float f,g,h,i,j,k;f=length(a)*c.s;g=clamp(min(f-(c.t-d),c.s-f)/d,0.,1.);h=mod(b/u_pattern_size_a.x,1.);i=mod(b/u_pattern_size_b.x,1.);j=.5+a.y*c.s/u_pattern_size_a.y;k=.5+a.y*c.s/u_pattern_size_b.y;vec2 l,m;l=mix(u_pattern_tl_a,u_pattern_br_a,vec2(h,j));m=mix(u_pattern_tl_b,u_pattern_br_b,vec2(i,k));vec4 n=mix(texture2D(u_image,l),texture2D(u_image,m),u_fade);g*=e;gl_FragColor=n*g;}&quot;},linesdfpattern:{vertex:&quot;precision mediump float;attribute vec2 a_pos,a_linewidth;attribute vec4 a_data,a_color;attribute float a_blur;uniform highp mat4 u_matrix;uniform mat4 u_exmatrix;uniform float u_ratio,u_tex_y_a,u_tex_y_b;uniform vec2 u_patternscale_a,u_patternscale_b;varying vec2 a,b,c,e;varying vec4 d;varying float f;void main(){vec2 g,i;g=a_data.xy;float h=a_data.z*128.+a_data.w;i=mod(a_pos,2.);i.y=sign(i.y-.5);a=i;vec4 j=vec4(a_linewidth.s*g*.015873016,0,0);gl_Position=u_matrix*vec4(floor(a_pos*.5)+j.xy/u_ratio,0,1);b=vec2(h*u_patternscale_a.x,i.y*u_patternscale_a.y+u_tex_y_a);c=vec2(h*u_patternscale_b.x,i.y*u_patternscale_b.y+u_tex_y_b);d=a_color;e=a_linewidth;f=a_blur;}&quot;,fragment:&quot;precision mediump float;uniform sampler2D u_image;uniform float u_sdfgamma,u_mix;varying vec2 a,b,c,e;varying vec4 d;varying float f;void main(){float g,h,i,j,k;g=length(a)*e.s;h=clamp(min(g-(e.t-f),e.s-g)/f,0.,1.);i=texture2D(u_image,b).a;j=texture2D(u_image,c).a;k=mix(i,j,u_mix);h*=smoothstep(.5-u_sdfgamma,.5+u_sdfgamma,k);gl_FragColor=d*h;}&quot;},outline:{vertex:&quot;precision mediump float;attribute vec2 a_pos;attribute vec4 a_color;uniform highp mat4 u_matrix;uniform vec2 u_world;varying vec4 a;varying vec2 b;void main(){gl_Position=u_matrix*vec4(a_pos,0,1);b=(gl_Position.xy/gl_Position.w+1.)/2.*u_world;a=a_color;}&quot;,fragment:&quot;precision mediump float;varying vec4 a;varying vec2 b;void main(){float c,d;c=length(b-gl_FragCoord.xy);d=smoothstep(1.,0.,c);gl_FragColor=a*d;}&quot;},pattern:{vertex:&quot;precision mediump float;uniform mat4 u_matrix;uniform mat3 u_patternmatrix_a,u_patternmatrix_b;attribute vec2 a_pos;varying vec2 a,b;void main(){gl_Position=u_matrix*vec4(a_pos,0,1);a=(u_patternmatrix_a*vec3(a_pos,1)).xy;b=(u_patternmatrix_b*vec3(a_pos,1)).xy;}&quot;,fragment:&quot;precision mediump float;uniform float u_opacity,u_mix;uniform vec2 u_pattern_tl_a,u_pattern_br_a,u_pattern_tl_b,u_pattern_br_b;uniform sampler2D u_image;varying vec2 a,b;void main(){vec2 c,d,f,g;c=mod(a,1.);d=mix(u_pattern_tl_a,u_pattern_br_a,c);vec4 e,h;e=texture2D(u_image,d);f=mod(b,1.);g=mix(u_pattern_tl_b,u_pattern_br_b,f);h=texture2D(u_image,g);gl_FragColor=mix(e,h,u_mix)*u_opacity;}&quot;},raster:{vertex:&quot;precision mediump float;uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent,u_buffer_scale;attribute vec2 a_pos,a_texture_pos;varying vec2 a,b;void main(){gl_Position=u_matrix*vec4(a_pos,0,1);a=(a_texture_pos/32767.-.5)/u_buffer_scale+.5;b=a*u_scale_parent+u_tl_parent;}&quot;,fragment:&quot;precision mediump float;uniform float u_opacity0,u_opacity1,u_brightness_low,u_brightness_high,u_saturation_factor,u_contrast_factor;uniform sampler2D u_image0,u_image1;varying vec2 a,b;uniform vec3 u_spin_weights;void main(){vec4 c,d,e;c=texture2D(u_image0,a);d=texture2D(u_image1,b);e=c*u_opacity0+d*u_opacity1;vec3 f,h,i;f=e.rgb;f=vec3(dot(f,u_spin_weights.xyz),dot(f,u_spin_weights.zxy),dot(f,u_spin_weights.yzx));float g=(e.r+e.g+e.b)/3.;f+=(g-f)*u_saturation_factor;f=(f-.5)*u_contrast_factor+.5;h=vec3(u_brightness_low);i=vec3(u_brightness_high);gl_FragColor=vec4(mix(h,i,f),e.a);}&quot;},icon:{vertex:&quot;precision mediump float;attribute vec2 a_pos,a_offset;attribute vec4 a_data1,a_data2;attribute float a_opacity;uniform highp mat4 u_matrix;uniform mat4 u_exmatrix;uniform float u_zoom,u_fadedist,u_minfadezoom,u_maxfadezoom,u_fadezoom,u_extra;uniform bool u_skewed;uniform vec2 u_texsize;varying vec2 a;varying float b;void main(){vec2 c,e;c=a_data1.xy;float d,f,g,h,i,j;d=a_data1[2];e=a_data2.st;f=e[0];g=e[1];h=10.;i=2.-step(f,u_zoom)-(1.-step(g,u_zoom));j=clamp((u_fadezoom-d)/u_fadedist,0.,1.);if(u_fadedist&gt;=0.)b=j;else b=1.-j;if(u_maxfadezoom&lt;d)b=0.;if(u_minfadezoom&gt;=d)b=1.;i+=step(b,0.);if(u_skewed){vec4 k=u_exmatrix*vec4(a_offset/64.,0,0);gl_Position=u_matrix*vec4(a_pos+k.xy,0,1);gl_Position.z+=i*gl_Position.w;}else{vec4 k=u_exmatrix*vec4(a_offset/64.,i,0);gl_Position=u_matrix*vec4(a_pos,0,1)+k;}a=c/u_texsize;b*=a_opacity;}&quot;,fragment:&quot;precision mediump float;uniform sampler2D u_texture;varying vec2 a;varying float b;void main(){gl_FragColor=texture2D(u_texture,a)*b;}&quot;},sdf:{vertex:&quot;precision mediump float;attribute vec2 a_pos,a_offset;attribute vec4 a_data1,a_data2,a_color;attribute float a_buffer,a_gamma;uniform highp mat4 u_matrix;uniform mat4 u_exmatrix;uniform float u_zoom,u_fadedist,u_minfadezoom,u_maxfadezoom,u_fadezoom,u_extra;uniform bool u_skewed;uniform vec2 u_texsize;varying vec2 a;varying float b,c,e,f;varying vec4 d;void main(){vec2 g,i;g=a_data1.xy;float h,j,k,l,m,n,o;h=a_data1[2];i=a_data2.st;j=i[0];k=i[1];l=2.-step(j,u_zoom)-(1.-step(k,u_zoom));m=clamp((u_fadezoom-h)/u_fadedist,0.,1.);if(u_fadedist&gt;=0.)b=m;else b=1.-m;if(u_maxfadezoom&lt;h)b=0.;if(u_minfadezoom&gt;=h)b=1.;l+=step(b,0.);if(u_skewed){vec4 n=u_exmatrix*vec4(a_offset/64.,0,0);gl_Position=u_matrix*vec4(a_pos+n.xy,0,1);gl_Position.z+=l*gl_Position.w;}else{vec4 n=u_exmatrix*vec4(a_offset/64.,l,0);gl_Position=u_matrix*vec4(a_pos,0,1)+n;}n=gl_Position.y/gl_Position.w;o=1./(1.-n*u_extra);c=o;a=g/u_texsize;d=a_color;e=a_buffer;f=a_gamma;}&quot;,fragment:&quot;precision mediump float;uniform sampler2D u_texture;varying vec2 a;varying float b,c,e,f;varying vec4 d;void main(){float g,h,i;g=f*c;h=texture2D(u_texture,a).a;i=smoothstep(e-g,e+g,h)*b;gl_FragColor=d*i;}&quot;},collisionbox:{vertex:&quot;precision mediump float;attribute vec2 a_pos,a_extrude,a_data;uniform mat4 u_matrix;uniform float u_scale;varying float a,b;void main(){gl_Position=u_matrix*vec4(a_pos+a_extrude/u_scale,0,1);a=a_data.x;b=a_data.y;}&quot;,fragment:&quot;precision mediump float;uniform float u_zoom,u_maxzoom;varying float a,b;void main(){float c=.5;gl_FragColor=vec4(0,1,0,1)*c;if(b&gt;u_zoom)gl_FragColor=vec4(1,0,0,1)*c;if(u_zoom&gt;=a)gl_FragColor=vec4(0,0,0,1)*c*.25;if(b&gt;=u_maxzoom)gl_FragColor=vec4(0,0,1,1)*c*.2;}&quot;}};
},{}],36:[function(require,module,exports){
    &quot;use strict&quot;;function GeoJSONSource(i){i=i||{},this._data=i.data,void 0!==i.maxzoom&amp;&amp;(this.maxzoom=i.maxzoom),this._pyramid=new TilePyramid({tileSize:512,minzoom:this.minzoom,maxzoom:this.maxzoom,cacheSize:20,load:this._loadTile.bind(this),abort:this._abortTile.bind(this),unload:this._unloadTile.bind(this),add:this._addTile.bind(this),remove:this._removeTile.bind(this)})}var util=require(&quot;../util/util&quot;),Evented=require(&quot;../util/evented&quot;),TilePyramid=require(&quot;./tile_pyramid&quot;),Source=require(&quot;./source&quot;),urlResolve=require(&quot;resolve-url&quot;);module.exports=GeoJSONSource,GeoJSONSource.prototype=util.inherit(Evented,{minzoom:0,maxzoom:14,_dirty:!0,setData:function(i){return this._data=i,this._dirty=!0,this.fire(&quot;change&quot;),this.map&amp;&amp;this.update(this.map.transform),this},onAdd:function(i){this.map=i},loaded:function(){return this._loaded&amp;&amp;this._pyramid.loaded()},update:function(i){this._dirty&amp;&amp;this._updateData(),this._loaded&amp;&amp;this._pyramid.update(this.used,i)},reload:function(){this._pyramid.reload()},render:Source._renderTiles,featuresAt:Source._vectorFeaturesAt,_updateData:function(){this._dirty=!1;var i=this._data;&quot;string&quot;==typeof i&amp;&amp;(i=urlResolve(window.location.href,i)),this.workerID=this.dispatcher.send(&quot;parse geojson&quot;,{data:i,tileSize:512,source:this.id,maxZoom:this.maxzoom},function(i){return i?void this.fire(&quot;error&quot;,{error:i}):(this._loaded=!0,this._pyramid.reload(),void this.fire(&quot;change&quot;))}.bind(this))},_loadTile:function(i){var t=i.coord.z&gt;this.maxzoom?Math.pow(2,i.coord.z-this.maxzoom):1,e={uid:i.uid,coord:i.coord,zoom:i.coord.z,maxZoom:this.maxzoom,tileSize:512,source:this.id,overscaling:t,angle:this.map.transform.angle,pitch:this.map.transform.pitch,collisionDebug:this.map.collisionDebug};i.workerID=this.dispatcher.send(&quot;load geojson tile&quot;,e,function(t,e){if(i.unloadVectorData(this.map.painter),!i.aborted){if(t)return void this.fire(&quot;tile.error&quot;,{tile:i});i.loadVectorData(e),this.fire(&quot;tile.load&quot;,{tile:i})}}.bind(this),this.workerID)},_abortTile:function(i){i.aborted=!0},_addTile:function(i){this.fire(&quot;tile.add&quot;,{tile:i})},_removeTile:function(i){this.fire(&quot;tile.remove&quot;,{tile:i})},_unloadTile:function(i){i.unloadVectorData(this.map.painter),this.glyphAtlas.removeGlyphs(i.uid),this.dispatcher.send(&quot;remove tile&quot;,{uid:i.uid,source:this.id},null,i.workerID)}});
},{&quot;../util/evented&quot;:90,&quot;../util/util&quot;:96,&quot;./source&quot;:39,&quot;./tile_pyramid&quot;:42,&quot;resolve-url&quot;:120}],37:[function(require,module,exports){
    &quot;use strict&quot;;function GeoJSONWrapper(e){this.features=e,this.length=e.length}function FeatureWrapper(e){this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=4096}var Point=require(&quot;point-geometry&quot;),VectorTileFeature=require(&quot;vector-tile&quot;).VectorTileFeature;module.exports=GeoJSONWrapper,GeoJSONWrapper.prototype.feature=function(e){return new FeatureWrapper(this.features[e])},FeatureWrapper.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t&lt;e.length;t++){for(var r=e[t],o=[],a=0;a&lt;r.length;a++)o.push(new Point(r[a][0],r[a][1]));this.geometry.push(o)}return this.geometry},FeatureWrapper.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-(1/0),o=1/0,a=-(1/0),p=0;p&lt;e.length;p++)for(var i=e[p],n=0;n&lt;i.length;n++){var h=i[n];t=Math.min(t,h.x),r=Math.max(r,h.x),o=Math.min(o,h.y),a=Math.max(a,h.y)}return[t,o,r,a]},FeatureWrapper.prototype.toGeoJSON=VectorTileFeature.prototype.toGeoJSON;
},{&quot;point-geometry&quot;:118,&quot;vector-tile&quot;:122}],38:[function(require,module,exports){
    &quot;use strict&quot;;function RasterTileSource(e){util.extend(this,util.pick(e,[&quot;url&quot;,&quot;tileSize&quot;])),Source._loadTileJSON.call(this,e)}var util=require(&quot;../util/util&quot;),ajax=require(&quot;../util/ajax&quot;),Evented=require(&quot;../util/evented&quot;),Source=require(&quot;./source&quot;),normalizeURL=require(&quot;../util/mapbox&quot;).normalizeTileURL;module.exports=RasterTileSource,RasterTileSource.prototype=util.inherit(Evented,{minzoom:0,maxzoom:22,tileSize:512,_loaded:!1,onAdd:function(e){this.map=e},loaded:function(){return this._pyramid&amp;&amp;this._pyramid.loaded()},update:function(e){this._pyramid&amp;&amp;this._pyramid.update(this.used,e,this.map.style.rasterFadeDuration)},reload:function(){},render:Source._renderTiles,_loadTile:function(e){ajax.getImage(normalizeURL(e.coord.url(this.tiles),this.url),function(t,i){if(!e.aborted){if(t)return void this.fire(&quot;tile.error&quot;,{tile:e});var r=this.map.painter.gl;e.texture=this.map.painter.getTexture(i.width),e.texture?(r.bindTexture(r.TEXTURE_2D,e.texture),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,i)):(e.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,e.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),e.texture.size=i.width),r.generateMipmap(r.TEXTURE_2D),e.timeAdded=(new Date).getTime(),this.map.animationLoop.set(this.style.rasterFadeDuration),e.source=this,e.loaded=!0,this.fire(&quot;tile.load&quot;,{tile:e})}}.bind(this))},_abortTile:function(e){e.aborted=!0},_addTile:function(e){this.fire(&quot;tile.add&quot;,{tile:e})},_removeTile:function(e){this.fire(&quot;tile.remove&quot;,{tile:e})},_unloadTile:function(e){e.texture&amp;&amp;this.map.painter.saveTexture(e.texture)},featuresAt:function(e,t,i){i(null,[])}});
},{&quot;../util/ajax&quot;:84,&quot;../util/evented&quot;:90,&quot;../util/mapbox&quot;:93,&quot;../util/util&quot;:96,&quot;./source&quot;:39}],39:[function(require,module,exports){
    &quot;use strict&quot;;var util=require(&quot;../util/util&quot;),ajax=require(&quot;../util/ajax&quot;),browser=require(&quot;../util/browser&quot;),TilePyramid=require(&quot;./tile_pyramid&quot;),TileCoord=require(&quot;./tile_coord&quot;),normalizeURL=require(&quot;../util/mapbox&quot;).normalizeSourceURL;exports._loadTileJSON=function(e){var i=function(e,i){return e?void this.fire(&quot;error&quot;,{error:e}):(util.extend(this,util.pick(i,[&quot;tiles&quot;,&quot;minzoom&quot;,&quot;maxzoom&quot;,&quot;attribution&quot;])),this._pyramid=new TilePyramid({tileSize:this.tileSize,cacheSize:20,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:this.reparseOverscaled,load:this._loadTile.bind(this),abort:this._abortTile.bind(this),unload:this._unloadTile.bind(this),add:this._addTile.bind(this),remove:this._removeTile.bind(this),redoPlacement:this._redoTilePlacement?this._redoTilePlacement.bind(this):void 0}),void this.fire(&quot;load&quot;))}.bind(this);e.url?ajax.getJSON(normalizeURL(e.url),i):browser.frame(i.bind(this,null,e))},exports._renderTiles=function(e,i){if(this._pyramid)for(var r=this._pyramid.renderedIDs(),t=0;t&lt;r.length;t++){var o=this._pyramid.getTile(r[t]),a=TileCoord.fromID(r[t]),s=a.z,l=a.x,n=a.y,d=a.w;s=Math.min(s,this.maxzoom),l+=d*(1&lt;&lt;s),o.calculateMatrices(s,l,n,i.transform,i),i.drawTile(o,e)}},exports._vectorFeaturesAt=function(e,i,r){if(!this._pyramid)return r(null,[]);var t=this._pyramid.tileAt(e);return t?void this.dispatcher.send(&quot;query features&quot;,{uid:t.tile.uid,x:t.x,y:t.y,scale:t.scale,source:this.id,params:i},r,t.tile.workerID):r(null,[])},exports.create=function(e){var i={vector:require(&quot;./vector_tile_source&quot;),raster:require(&quot;./raster_tile_source&quot;),geojson:require(&quot;./geojson_source&quot;),video:require(&quot;./video_source&quot;)};for(var r in i)if(e instanceof i[r])return e;return new i[e.type](e)};
},{&quot;../util/ajax&quot;:84,&quot;../util/browser&quot;:85,&quot;../util/mapbox&quot;:93,&quot;../util/util&quot;:96,&quot;./geojson_source&quot;:36,&quot;./raster_tile_source&quot;:38,&quot;./tile_coord&quot;:41,&quot;./tile_pyramid&quot;:42,&quot;./vector_tile_source&quot;:43,&quot;./video_source&quot;:44}],40:[function(require,module,exports){
    &quot;use strict&quot;;function Tile(t,e){this.coord=t,this.uid=util.uniqueId(),this.loaded=!1,this.uses=0,this.tileSize=e}var glmatrix=require(&quot;gl-matrix&quot;),mat2=glmatrix.mat2,mat4=glmatrix.mat4,util=require(&quot;../util/util&quot;),BufferSet=require(&quot;../data/buffer/buffer_set&quot;);module.exports=Tile,Tile.prototype={tileExtent:4096,calculateMatrices:function(t,e,i,r){var s=Math.pow(2,t),o=r.worldSize/s;this.scale=o,this.posMatrix=new Float64Array(16),mat4.identity(this.posMatrix),mat4.translate(this.posMatrix,this.posMatrix,[e*o,i*o,0]),mat4.scale(this.posMatrix,this.posMatrix,[o/this.tileExtent,o/this.tileExtent,1]),mat4.multiply(this.posMatrix,r.getProjMatrix(),this.posMatrix),this.exMatrix=mat4.create(),mat4.ortho(this.exMatrix,0,r.width,r.height,0,0,-1),this.rotationMatrix=mat2.create(),mat2.rotate(this.rotationMatrix,this.rotationMatrix,r.angle),this.posMatrix=new Float32Array(this.posMatrix)},positionAt:function(t,e){return t=t.zoomTo(Math.min(this.coord.z,e)),{x:4096*(t.column-this.coord.x),y:4096*(t.row-this.coord.y),scale:this.scale}},loadVectorData:function(t){this.loaded=!0,t&amp;&amp;(this.buffers=new BufferSet(t.buffers),this.elementGroups=t.elementGroups,this.tileExtent=t.extent)},reloadSymbolData:function(t,e){if(this.buffers){this.buffers.glyphVertex.destroy(e.gl),this.buffers.glyphElement.destroy(e.gl),this.buffers.iconVertex.destroy(e.gl),this.buffers.iconElement.destroy(e.gl),this.buffers.collisionBoxVertex.destroy(e.gl);var i=new BufferSet(t.buffers);this.buffers.glyphVertex=i.glyphVertex,this.buffers.glyphElement=i.glyphElement,this.buffers.iconVertex=i.iconVertex,this.buffers.iconElement=i.iconElement,this.buffers.collisionBoxVertex=i.collisionBoxVertex;for(var r in t.elementGroups)this.elementGroups[r]=t.elementGroups[r]}},unloadVectorData:function(t){for(var e in this.buffers)this.buffers[e].destroy(t.gl);this.buffers=null}};
},{&quot;../data/buffer/buffer_set&quot;:2,&quot;../util/util&quot;:96,&quot;gl-matrix&quot;:109}],41:[function(require,module,exports){
    &quot;use strict&quot;;function TileCoord(t,i,o,r){void 0===r&amp;&amp;(r=0),this.z=t,this.x=i,this.y=o,this.w=r,r*=2,0&gt;r&amp;&amp;(r=-1*r-1);var e=1&lt;&lt;this.z;this.id=32*(e*e*r+e*this.y+this.x)+this.z}function edge(t,i){if(t.row&gt;i.row){var o=t;t=i,i=o}return{x0:t.column,y0:t.row,x1:i.column,y1:i.row,dx:i.column-t.column,dy:i.row-t.row}}function scanSpans(t,i,o,r,e){var n=Math.max(o,Math.floor(i.y0)),h=Math.min(r,Math.ceil(i.y1));if(t.x0===i.x0&amp;&amp;t.y0===i.y0?t.x0+i.dy/t.dy*t.dx&lt;i.x1:t.x1-i.dy/t.dy*t.dx&lt;i.x0){var s=t;t=i,i=s}for(var d=t.dx/t.dy,a=i.dx/i.dy,l=t.dx&gt;0,y=i.dx&lt;0,x=n;h&gt;x;x++){var c=d*Math.max(0,Math.min(t.dy,x+l-t.y0))+t.x0,u=a*Math.max(0,Math.min(i.dy,x+y-i.y0))+i.x0;e(Math.floor(u),Math.ceil(c),x)}}function scanTriangle(t,i,o,r,e,n){var h,s=edge(t,i),d=edge(i,o),a=edge(o,t);s.dy&gt;d.dy&amp;&amp;(h=s,s=d,d=h),s.dy&gt;a.dy&amp;&amp;(h=s,s=a,a=h),d.dy&gt;a.dy&amp;&amp;(h=d,d=a,a=h),s.dy&amp;&amp;scanSpans(a,s,r,e,n),d.dy&amp;&amp;scanSpans(a,d,r,e,n)}module.exports=TileCoord,TileCoord.prototype.toString=function(){return this.z+&quot;/&quot;+this.x+&quot;/&quot;+this.y},TileCoord.fromID=function(t){var i=t%32,o=1&lt;&lt;i,r=(t-i)/32,e=r%o,n=(r-e)/o%o,h=Math.floor(r/(o*o));return h%2!==0&amp;&amp;(h=-1*h-1),h/=2,new TileCoord(i,e,n,h)},TileCoord.prototype.url=function(t,i){return t[(this.x+this.y)%t.length].replace(&quot;{prefix}&quot;,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(&quot;{z}&quot;,Math.min(this.z,i||this.z)).replace(&quot;{x}&quot;,this.x).replace(&quot;{y}&quot;,this.y)},TileCoord.prototype.parent=function(t){return 0===this.z?null:this.z&gt;t?new TileCoord(this.z-1,this.x,this.y,this.w):new TileCoord(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},TileCoord.prototype.wrapped=function(){return new TileCoord(this.z,this.x,this.y,0)},TileCoord.prototype.children=function(t){if(this.z&gt;=t)return[new TileCoord(this.z+1,this.x,this.y,this.w)];var i=this.z+1,o=2*this.x,r=2*this.y;return[new TileCoord(i,o,r,this.w),new TileCoord(i,o+1,r,this.w),new TileCoord(i,o,r+1,this.w),new TileCoord(i,o+1,r+1,this.w)]},TileCoord.cover=function(t,i,o){function r(t,i,r){var h,s;if(r&gt;=0&amp;&amp;e&gt;=r)for(h=t;i&gt;h;h++){s=(h+e)%e;var d=new TileCoord(o,s,r,Math.floor(h/e));n[d.id]=d}}var e=1&lt;&lt;t,n={};return scanTriangle(i[0],i[1],i[2],0,e,r),scanTriangle(i[2],i[3],i[0],0,e,r),Object.keys(n).map(function(t){return n[t]})};
},{}],42:[function(require,module,exports){
    &quot;use strict&quot;;function TilePyramid(i){this.tileSize=i.tileSize,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,this.reparseOverscaled=i.reparseOverscaled,this._load=i.load,this._abort=i.abort,this._unload=i.unload,this._add=i.add,this._remove=i.remove,this._redoPlacement=i.redoPlacement,this._tiles={},this._cache=new Cache(i.cacheSize,function(i){return this._unload(i)}.bind(this))}var Tile=require(&quot;./tile&quot;),TileCoord=require(&quot;./tile_coord&quot;),Point=require(&quot;point-geometry&quot;),Cache=require(&quot;../util/mru_cache&quot;),util=require(&quot;../util/util&quot;);module.exports=TilePyramid,TilePyramid.prototype={loaded:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0},orderedIDs:function(){return Object.keys(this._tiles).sort(function(i,e){return e%32-i%32}).map(function(i){return+i})},renderedIDs:function(){return this.orderedIDs().filter(function(i){return this._tiles[i].loaded&amp;&amp;!this._coveredTiles[i]}.bind(this))},reload:function(){this._cache.reset();for(var i in this._tiles)this._load(this._tiles[i])},getTile:function(i){return this._tiles[i]},getZoom:function(i){return i.zoom+Math.log(i.tileSize/this.tileSize)/Math.LN2},coveringZoomLevel:function(i){return Math.floor(this.getZoom(i))},coveringTiles:function(i){var e=this.coveringZoomLevel(i),t=e;if(e&lt;this.minzoom)return[];e&gt;this.maxzoom&amp;&amp;(e=this.maxzoom);var o=i,r=o.locationCoordinate(o.center)._zoomTo(e),n=new Point(r.column-.5,r.row-.5);return TileCoord.cover(e,[o.pointCoordinate(new Point(0,0))._zoomTo(e),o.pointCoordinate(new Point(o.width,0))._zoomTo(e),o.pointCoordinate(new Point(o.width,o.height))._zoomTo(e),o.pointCoordinate(new Point(0,o.height))._zoomTo(e)],this.reparseOverscaled?t:e).sort(function(i,e){return n.dist(i)-n.dist(e)})},findLoadedChildren:function(i,e,t){for(var o=!0,r=i.z,n=i.children(this.maxzoom),s=0;s&lt;n.length;s++){var d=n[s].id;this._tiles[d]&amp;&amp;this._tiles[d].loaded?t[d]=!0:(o=!1,e&gt;r&amp;&amp;this.findLoadedChildren(n[s],e,t))}return o},findLoadedParent:function(i,e,t){for(var o=i.z-1;o&gt;=e;o--){i=i.parent(this.maxzoom);var r=this._tiles[i.id];if(r&amp;&amp;r.loaded)return t[i.id]=!0,r}},update:function(i,e,t){var o,r,n,s=Math.floor(this.getZoom(e)),d=util.clamp(s-10,this.minzoom,this.maxzoom),a=util.clamp(s+1,this.minzoom,this.maxzoom),h={},l=(new Date).getTime();this._coveredTiles={};var c=i?this.coveringTiles(e):[];for(o=0;o&lt;c.length;o++)r=c[o],n=this.addTile(r),h[r.id]=!0,n.loaded||this.findLoadedChildren(r,a,h)||this.findLoadedParent(r,d,h);for(var m in h)r=TileCoord.fromID(m),n=this._tiles[m],n&amp;&amp;n.timeAdded&gt;l-(t||0)&amp;&amp;(this.findLoadedChildren(r,a,h)?(this._coveredTiles[m]=!0,h[m]=!0):this.findLoadedParent(r,d,h));var u=util.keysDifference(this._tiles,h);for(o=0;o&lt;u.length;o++)this.removeTile(+u[o])},addTile:function(i){var e=this._tiles[i.id];if(e)return e;var t=i.wrapped();if(e=this._tiles[t.id],e||(e=this._cache.get(t.id),e&amp;&amp;this._redoPlacement&amp;&amp;this._redoPlacement(e)),!e){var o=i.z,r=o&gt;this.maxzoom?Math.pow(2,o-this.maxzoom):1;e=new Tile(t,this.tileSize*r),this._load(e)}return e.uses++,this._tiles[i.id]=e,this._add(e,i),e},removeTile:function(i){var e=this._tiles[i];e&amp;&amp;(e.uses--,delete this._tiles[i],this._remove(e),e.uses&gt;0||(e.loaded?this._cache.add(e.coord.wrapped().id,e):(this._abort(e),this._unload(e))))},clearTiles:function(){for(var i in this._tiles)this.removeTile(i);this._cache.reset()},tileAt:function(i){for(var e=this.orderedIDs(),t=0;t&lt;e.length;t++){var o=this._tiles[e[t]],r=o.positionAt(i,this.maxzoom);if(r&amp;&amp;r.x&gt;=0&amp;&amp;r.x&lt;4096&amp;&amp;r.y&gt;=0&amp;&amp;r.y&lt;4096)return{tile:o,x:r.x,y:r.y,scale:r.scale}}}};
},{&quot;../util/mru_cache&quot;:94,&quot;../util/util&quot;:96,&quot;./tile&quot;:40,&quot;./tile_coord&quot;:41,&quot;point-geometry&quot;:118}],43:[function(require,module,exports){
    &quot;use strict&quot;;function VectorTileSource(e){if(util.extend(this,util.pick(e,[&quot;url&quot;,&quot;tileSize&quot;])),512!==this.tileSize)throw new Error(&quot;vector tile sources must have a tileSize of 512&quot;);Source._loadTileJSON.call(this,e)}var util=require(&quot;../util/util&quot;),Evented=require(&quot;../util/evented&quot;),Source=require(&quot;./source&quot;);module.exports=VectorTileSource,VectorTileSource.prototype=util.inherit(Evented,{minzoom:0,maxzoom:22,tileSize:512,reparseOverscaled:!0,_loaded:!1,onAdd:function(e){this.map=e},loaded:function(){return this._pyramid&amp;&amp;this._pyramid.loaded()},update:function(e){this._pyramid&amp;&amp;this._pyramid.update(this.used,e)},reload:function(){this._pyramid.reload()},redoPlacement:function(){if(this._pyramid)for(var e=this._pyramid.orderedIDs(),i=0;i&lt;e.length;i++){var t=this._pyramid.getTile(e[i]);this._redoTilePlacement(t)}},render:Source._renderTiles,featuresAt:Source._vectorFeaturesAt,_loadTile:function(e){var i=e.coord.z&gt;this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,t={url:e.coord.url(this.tiles,this.maxzoom),uid:e.uid,coord:e.coord,zoom:e.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize*i,source:this.id,overscaling:i,angle:this.map.transform.angle,pitch:this.map.transform.pitch,collisionDebug:this.map.collisionDebug};e.workerID?this.dispatcher.send(&quot;reload tile&quot;,t,this._tileLoaded.bind(this,e),e.workerID):e.workerID=this.dispatcher.send(&quot;load tile&quot;,t,this._tileLoaded.bind(this,e))},_tileLoaded:function(e,i,t){if(!e.aborted){if(i)return void this.fire(&quot;tile.error&quot;,{tile:e});e.loadVectorData(t),e.redoWhenDone&amp;&amp;(e.redoWhenDone=!1,this._redoTilePlacement(e)),this.fire(&quot;tile.load&quot;,{tile:e})}},_abortTile:function(e){e.aborted=!0,this.dispatcher.send(&quot;abort tile&quot;,{uid:e.uid,source:this.id},null,e.workerID)},_addTile:function(e){this.fire(&quot;tile.add&quot;,{tile:e})},_removeTile:function(e){this.fire(&quot;tile.remove&quot;,{tile:e})},_unloadTile:function(e){e.unloadVectorData(this.map.painter),this.glyphAtlas.removeGlyphs(e.uid),this.dispatcher.send(&quot;remove tile&quot;,{uid:e.uid,source:this.id},null,e.workerID)},_redoTilePlacement:function(e){function i(i,t){e.reloadSymbolData(t,this.map.painter),this.fire(&quot;tile.load&quot;,{tile:e}),e.redoingPlacement=!1,e.redoWhenDone&amp;&amp;(this._redoTilePlacement(e),e.redoWhenDone=!1)}return!e.loaded||e.redoingPlacement?void(e.redoWhenDone=!0):(e.redoingPlacement=!0,void this.dispatcher.send(&quot;redo placement&quot;,{uid:e.uid,source:this.id,angle:this.map.transform.angle,pitch:this.map.transform.pitch,collisionDebug:this.map.collisionDebug},i.bind(this),e.workerID))}});
},{&quot;../util/evented&quot;:90,&quot;../util/util&quot;:96,&quot;./source&quot;:39}],44:[function(require,module,exports){
    &quot;use strict&quot;;function VideoSource(e){this.coordinates=e.coordinates,ajax.getVideo(e.url,function(e,t){if(!e){this.video=t,this.video.loop=!0;var i;this.video.addEventListener(&quot;playing&quot;,function(){i=this.map.style.animationLoop.set(1/0),this.map._rerender()}.bind(this)),this.video.addEventListener(&quot;pause&quot;,function(){this.map.style.animationLoop.cancel(i)}.bind(this)),this._loaded=!0,this.map&amp;&amp;(this.video.play(),this.createTile(),this.fire(&quot;change&quot;))}}.bind(this))}var util=require(&quot;../util/util&quot;),Tile=require(&quot;./tile&quot;),LatLng=require(&quot;../geo/lat_lng&quot;),Point=require(&quot;point-geometry&quot;),Evented=require(&quot;../util/evented&quot;),Coordinate=require(&quot;../geo/coordinate&quot;),ajax=require(&quot;../util/ajax&quot;);module.exports=VideoSource,VideoSource.prototype=util.inherit(Evented,{getVideo:function(){return this.video},onAdd:function(e){this.map=e,this.video&amp;&amp;(this.video.play(),this.createTile())},createTile:function(){for(var e=this.map,t=this.coordinates.map(function(t){var i=LatLng.convert(t);return e.transform.locationCoordinate(i).zoomTo(0)}),i=1/0,o=1/0,r=-(1/0),a=-(1/0),n=0;n&lt;t.length;n++)i=Math.min(i,t[n].column),o=Math.min(o,t[n].row),r=Math.max(r,t[n].column),a=Math.max(a,t[n].row);var u=r-i,s=a-o,d=Math.max(u,s),h=new Coordinate((i+r)/2,(o+a)/2,0).zoomTo(Math.floor(-Math.log(d)/Math.LN2)),l=4096,T=t.map(function(e){var t=e.zoomTo(h.zoom);return new Point(Math.round((t.column-h.column)*l),Math.round((t.row-h.row)*l))}),c=e.painter.gl,E=32767,m=new Int16Array([T[0].x,T[0].y,0,0,T[1].x,T[1].y,E,0,T[3].x,T[3].y,0,E,T[2].x,T[2].y,E,E]);this.tile=new Tile,this.tile.buckets={},this.tile.boundsBuffer=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,this.tile.boundsBuffer),c.bufferData(c.ARRAY_BUFFER,m,c.STATIC_DRAW),this.center=h},loaded:function(){return this.video&amp;&amp;this.video.readyState&gt;=2},update:function(){},reload:function(){},render:function(e,t){if(this._loaded&amp;&amp;!(this.video.readyState&lt;2)){var i=this.center;this.tile.calculateMatrices(i.zoom,i.column,i.row,this.map.transform,t);var o=t.gl;this.tile.texture?(o.bindTexture(o.TEXTURE_2D,this.tile.texture),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.tile.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.tile.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,this.video)),t.drawLayers(e,this.tile.posMatrix,this.tile)}},featuresAt:function(e,t,i){return i(null,[])}});
},{&quot;../geo/coordinate&quot;:17,&quot;../geo/lat_lng&quot;:18,&quot;../util/ajax&quot;:84,&quot;../util/evented&quot;:90,&quot;../util/util&quot;:96,&quot;./tile&quot;:40,&quot;point-geometry&quot;:118}],45:[function(require,module,exports){
    &quot;use strict&quot;;function Worker(e){this.self=e,this.actor=new Actor(e,this),this.loading={},this.loaded={},this.layers=[],this.geoJSONIndexes={}}var Actor=require(&quot;../util/actor&quot;),WorkerTile=require(&quot;./worker_tile&quot;),util=require(&quot;../util/util&quot;),ajax=require(&quot;../util/ajax&quot;),vt=require(&quot;vector-tile&quot;),Protobuf=require(&quot;pbf&quot;),geojsonvt=require(&quot;geojson-vt&quot;),GeoJSONWrapper=require(&quot;./geojson_wrapper&quot;);module.exports=function(e){return new Worker(e)},util.extend(Worker.prototype,{&quot;set layers&quot;:function(e){this.layers=e},&quot;load tile&quot;:function(e,r){function t(e,t){return delete this.loading[o][i],e?r(e):(a.data=new vt.VectorTile(new Protobuf(new Uint8Array(t))),a.parse(a.data,this.layers,this.actor,r),this.loaded[o]=this.loaded[o]||{},void(this.loaded[o][i]=a))}var o=e.source,i=e.uid;this.loading[o]||(this.loading[o]={});var a=this.loading[o][i]=new WorkerTile(e);a.xhr=ajax.getArrayBuffer(e.url,t.bind(this))},&quot;reload tile&quot;:function(e,r){var t=this.loaded[e.source],o=e.uid;if(t&amp;&amp;t[o]){var i=t[o];i.parse(i.data,this.layers,this.actor,r)}},&quot;abort tile&quot;:function(e){var r=this.loading[e.source],t=e.uid;r&amp;&amp;r[t]&amp;&amp;(r[t].xhr.abort(),delete r[t])},&quot;remove tile&quot;:function(e){var r=this.loaded[e.source],t=e.uid;r&amp;&amp;r[t]&amp;&amp;delete r[t]},&quot;redo placement&quot;:function(e,r){var t=this.loaded[e.source],o=this.loading[e.source],i=e.uid;if(t&amp;&amp;t[i]){var a=t[i],s=a.redoPlacement(e.angle,e.pitch,e.collisionDebug);s.result&amp;&amp;r(null,s.result,s.transferables)}else o&amp;&amp;o[i]&amp;&amp;(o[i].angle=e.angle)},&quot;parse geojson&quot;:function(e,r){var t=function(t,o){return t?r(t):(this.geoJSONIndexes[e.source]=geojsonvt(o,{maxZoom:e.maxZoom}),void r(null))}.bind(this);&quot;string&quot;==typeof e.data?ajax.getJSON(e.data,t):t(null,e.data)},&quot;load geojson tile&quot;:function(e,r){var t=e.source,o=e.coord,i=this.geoJSONIndexes[t].getTile(o.z,o.x,o.y);if(!i)return r(null,null);var a=new WorkerTile(e);a.parse(new GeoJSONWrapper(i.features),this.layers,this.actor,r),this.loaded[t]=this.loaded[t]||{},this.loaded[t][e.uid]=a},&quot;query features&quot;:function(e,r){var t=this.loaded[e.source]&amp;&amp;this.loaded[e.source][e.uid];t?t.featureTree.query(e,r):r(null,[])}});
},{&quot;../util/actor&quot;:83,&quot;../util/ajax&quot;:84,&quot;../util/util&quot;:96,&quot;./geojson_wrapper&quot;:37,&quot;./worker_tile&quot;:46,&quot;geojson-vt&quot;:105,&quot;pbf&quot;:116,&quot;vector-tile&quot;:122}],46:[function(require,module,exports){
    &quot;use strict&quot;;function WorkerTile(e){this.coord=e.coord,this.uid=e.uid,this.zoom=e.zoom,this.maxZoom=e.maxZoom,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=e.overscaling,this.angle=e.angle,this.pitch=e.pitch,this.collisionDebug=e.collisionDebug,this.stacks={}}var FeatureTree=require(&quot;../data/feature_tree&quot;),CollisionTile=require(&quot;../symbol/collision_tile&quot;),BufferSet=require(&quot;../data/buffer/buffer_set&quot;),createBucket=require(&quot;../data/create_bucket&quot;);module.exports=WorkerTile,WorkerTile.prototype.parse=function(e,t,r,i){function s(e,t){for(var r=0;r&lt;e.length;r++){var i=e.feature(r);for(var s in t){var o=t[s];o.filter(i)&amp;&amp;o.features.push(i)}}}function o(e){return function(t){e.dependenciesLoaded=!0,n(h,e,t)}}function n(e,t,r){if(!(t.getDependencies&amp;&amp;!t.dependenciesLoaded||t.needsPlacement&amp;&amp;!t.previousPlaced)){if(!r){var i=Date.now();t.features.length&amp;&amp;t.addFeatures(p);var s=Date.now()-i;if(t.interactive)for(var o=0;o&lt;t.features.length;o++){var l=t.features[o];e.featureTree.insert(l.bbox(),t.layers,l)}&quot;undefined&quot;!=typeof self&amp;&amp;(self.bucketStats=self.bucketStats||{_total:0},self.bucketStats._total+=s,self.bucketStats[t.id]=(self.bucketStats[t.id]||0)+s)}return P--,P?void(t.next&amp;&amp;(t.next.previousPlaced=!0,n(e,t.next))):void a()}}function a(){if(h.status=&quot;done&quot;,h.redoPlacementAfterDone){var e=h.redoPlacement(h.angle,h.pitch).result;d.glyphVertex=e.buffers.glyphVertex,d.iconVertex=e.buffers.iconVertex,d.collisionBoxVertex=e.buffers.collisionBoxVertex}var t=[],r={};for(u in d)t.push(d[u].array);for(u in v)r[u]=v[u].elementGroups;i(null,{elementGroups:r,buffers:d,extent:D},t)}this.status=&quot;parsing&quot;,this.featureTree=new FeatureTree(this.coord,this.overscaling);var l,u,f,c,h=this,d=new BufferSet,p=new CollisionTile(this.angle,this.pitch),v={},m=this.bucketsInOrder=[],g={};for(l=0;l&lt;t.length;l++)if(f=t[l],f.source===this.source&amp;&amp;!f.ref){var b=f.minzoom;if(!(b&amp;&amp;this.zoom&lt;b&amp;&amp;b&lt;this.maxZoom)){var x=f.maxzoom;if(!(x&amp;&amp;this.zoom&gt;=x)){var y=f.layout.visibility;if(&quot;none&quot;!==y)if(c=createBucket(f,d,this.zoom,this.overscaling,this.collisionDebug),c.layers=[f.id],v[c.id]=c,m.push(c),e.layers){var k=f[&quot;source-layer&quot;];g[k]||(g[k]={}),g[k][c.id]=c}else g[c.id]=c}}}for(l=0;l&lt;t.length;l++)f=t[l],f.source===this.source&amp;&amp;f.ref&amp;&amp;(c=v[f.ref],c&amp;&amp;c.layers.push(f.id));var D=4096;if(e.layers)for(u in g)f=e.layers[u],f&amp;&amp;(f.extent&amp;&amp;(D=f.extent),s(f,g[u]));else s(e,g);var T,P=m.length;for(l=0;l&lt;m.length;l++)c=m[l],c.needsPlacement&amp;&amp;(T?T.next=c:c.previousPlaced=!0,T=c),c.getDependencies&amp;&amp;c.getDependencies(this,r,o(c)),c.needsPlacement||c.getDependencies||n(h,c)},WorkerTile.prototype.redoPlacement=function(e,t,r){if(&quot;done&quot;!==this.status)return this.redoPlacementAfterDone=!0,this.angle=e,{};for(var i=new BufferSet,s=[],o={},n=new CollisionTile(e,t),a=this.bucketsInOrder,l=0;l&lt;a.length;l++){var u=a[l];&quot;symbol&quot;===u.type&amp;&amp;(u.placeFeatures(n,i,r),o[u.id]=u.elementGroups)}for(var f in i)s.push(i[f].array);return{result:{elementGroups:o,buffers:i},transferables:s}};
},{&quot;../data/buffer/buffer_set&quot;:2,&quot;../data/create_bucket&quot;:11,&quot;../data/feature_tree&quot;:13,&quot;../symbol/collision_tile&quot;:64}],47:[function(require,module,exports){
    &quot;use strict&quot;;function AnimationLoop(){this.n=0,this.times=[]}module.exports=AnimationLoop,AnimationLoop.prototype.stopped=function(){return this.times=this.times.filter(function(t){return t.time&gt;=(new Date).getTime()}),!this.times.length},AnimationLoop.prototype.set=function(t){return this.times.push({id:this.n,time:t+(new Date).getTime()}),this.n++},AnimationLoop.prototype.cancel=function(t){this.times=this.times.filter(function(i){return i.id!==t})};
},{}],48:[function(require,module,exports){
    &quot;use strict&quot;;function ImageSprite(t){this.base=t,this.retina=browser.devicePixelRatio&gt;1,t=this.base+(this.retina?&quot;@2x&quot;:&quot;&quot;),ajax.getJSON(t+&quot;.json&quot;,function(t,i){return t?void this.fire(&quot;error&quot;,{error:t}):(this.data=i,void(this.img&amp;&amp;this.fire(&quot;load&quot;)))}.bind(this)),ajax.getImage(t+&quot;.png&quot;,function(t,i){if(t)return void this.fire(&quot;error&quot;,{error:t});for(var e=i.getData(),r=i.data=new Uint8Array(e.length),a=0;a&lt;e.length;a+=4){var o=e[a+3]/255;r[a+0]=e[a+0]*o,r[a+1]=e[a+1]*o,r[a+2]=e[a+2]*o,r[a+3]=e[a+3]}this.img=i,this.data&amp;&amp;this.fire(&quot;load&quot;)}.bind(this))}function SpritePosition(){}var Evented=require(&quot;../util/evented&quot;),ajax=require(&quot;../util/ajax&quot;),browser=require(&quot;../util/browser&quot;);module.exports=ImageSprite,ImageSprite.prototype=Object.create(Evented),ImageSprite.prototype.toJSON=function(){return this.base},ImageSprite.prototype.loaded=function(){return!(!this.data||!this.img)},ImageSprite.prototype.resize=function(){if(browser.devicePixelRatio&gt;1!==this.retina){var t=new ImageSprite(this.base);t.on(&quot;load&quot;,function(){this.img=t.img,this.data=t.data,this.retina=t.retina}.bind(this))}},SpritePosition.prototype={x:0,y:0,width:0,height:0,pixelRatio:1,sdf:!1},ImageSprite.prototype.getSpritePosition=function(t){if(!this.loaded())return new SpritePosition;var i=this.data&amp;&amp;this.data[t];return i&amp;&amp;this.img?i:new SpritePosition};
},{&quot;../util/ajax&quot;:84,&quot;../util/browser&quot;:85,&quot;../util/evented&quot;:90}],49:[function(require,module,exports){
    &quot;use strict&quot;;var reference=require(&quot;./reference&quot;);module.exports={},reference.layout.forEach(function(e){var r=function(e){for(var r in e)this[r]=e[r]},o=reference[e];for(var t in o)void 0!==o[t][&quot;default&quot;]&amp;&amp;(r.prototype[t]=o[t][&quot;default&quot;]);module.exports[e.replace(&quot;layout_&quot;,&quot;&quot;)]=r});
},{&quot;./reference&quot;:51}],50:[function(require,module,exports){
    &quot;use strict&quot;;var reference=require(&quot;./reference&quot;),parseCSSColor=require(&quot;csscolorparser&quot;).parseCSSColor;module.exports={},reference.paint.forEach(function(e){var r=function(){},o=reference[e];for(var p in o){var t=o[p],a=t[&quot;default&quot;];void 0!==a&amp;&amp;(&quot;color&quot;===t.type&amp;&amp;(a=parseCSSColor(a)),r.prototype[p]=a)}r.prototype.hidden=!1,module.exports[e.replace(&quot;paint_&quot;,&quot;&quot;)]=r});
},{&quot;./reference&quot;:51,&quot;csscolorparser&quot;:101}],51:[function(require,module,exports){
    module.exports=require(&quot;mapbox-gl-style-spec/reference/latest&quot;);
},{&quot;mapbox-gl-style-spec/reference/latest&quot;:113}],52:[function(require,module,exports){
    &quot;use strict&quot;;function Style(e,t){this.animationLoop=t||new AnimationLoop,this.dispatcher=new Dispatcher(Math.max(browser.hardwareConcurrency-1,1),this),this.glyphAtlas=new GlyphAtlas(1024,1024),this.spriteAtlas=new SpriteAtlas(512,512),this.spriteAtlas.resize(browser.devicePixelRatio),this.lineAtlas=new LineAtlas(256,512),this._layers={},this._order=[],this._groups=[],this.sources={},this.zoomHistory={},util.bindAll([&quot;_forwardSourceEvent&quot;,&quot;_forwardTileEvent&quot;,&quot;_redoPlacement&quot;],this);var r=function(e,t){if(e)return void this.fire(&quot;error&quot;,{error:e});var r=validate(t);r.length&amp;&amp;r.forEach(function(e){throw new Error(e.message)}),this._loaded=!0,this.stylesheet=t;var s=t.sources;for(var i in s)this.addSource(i,s[i]);t.sprite&amp;&amp;(this.sprite=new ImageSprite(t.sprite),this.sprite.on(&quot;load&quot;,this.fire.bind(this,&quot;change&quot;))),this.glyphSource=new GlyphSource(t.glyphs,this.glyphAtlas),this._resolve(),this.fire(&quot;load&quot;)}.bind(this);&quot;string&quot;==typeof e?ajax.getJSON(normalizeURL(e),r):browser.frame(r.bind(this,null,e))}var Evented=require(&quot;../util/evented&quot;),Source=require(&quot;../source/source&quot;),StyleLayer=require(&quot;./style_layer&quot;),ImageSprite=require(&quot;./image_sprite&quot;),GlyphSource=require(&quot;../symbol/glyph_source&quot;),GlyphAtlas=require(&quot;../symbol/glyph_atlas&quot;),SpriteAtlas=require(&quot;../symbol/sprite_atlas&quot;),LineAtlas=require(&quot;../render/line_atlas&quot;),util=require(&quot;../util/util&quot;),ajax=require(&quot;../util/ajax&quot;),normalizeURL=require(&quot;../util/mapbox&quot;).normalizeStyleURL,browser=require(&quot;../util/browser&quot;),Dispatcher=require(&quot;../util/dispatcher&quot;),AnimationLoop=require(&quot;./animation_loop&quot;),validate=require(&quot;mapbox-gl-style-spec/lib/validate/latest&quot;);module.exports=Style,Style.prototype=util.inherit(Evented,{_loaded:!1,loaded:function(){if(!this._loaded)return!1;for(var e in this.sources)if(!this.sources[e].loaded())return!1;return this.sprite&amp;&amp;!this.sprite.loaded()?!1:!0},_resolve:function(){var e,t;this._layers={},this._order=[];for(var r=0;r&lt;this.stylesheet.layers.length;r++)t=new StyleLayer(this.stylesheet.layers[r],this.stylesheet.constants||{}),this._layers[t.id]=t,this._order.push(t.id);for(e in this._layers)this._layers[e].resolveLayout();for(e in this._layers)this._layers[e].resolveReference(this._layers),this._layers[e].resolvePaint();this._groupLayers(),this._broadcastLayers()},_groupLayers:function(){var e;this._groups=[];for(var t=0;t&lt;this._order.length;++t){var r=this._layers[this._order[t]];e&amp;&amp;r.source===e.source||(e=[],e.source=r.source,this._groups.push(e)),e.push(r)}},_broadcastLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t].json());this.dispatcher.broadcast(&quot;set layers&quot;,e)},_cascade:function(e,t){if(this._loaded){t=t||{transition:!0};for(var r in this._layers)this._layers[r].cascade(e,t,this.stylesheet.transition||{},this.animationLoop);this.fire(&quot;change&quot;)}},_recalculate:function(e){for(var t in this.sources)this.sources[t].used=!1;this._updateZoomHistory(e),this.rasterFadeDuration=300;for(t in this._layers){var r=this._layers[t];r.recalculate(e,this.zoomHistory)&amp;&amp;r.source&amp;&amp;(this.sources[r.source].used=!0)}var s=300;Math.floor(this.z)!==Math.floor(e)&amp;&amp;this.animationLoop.set(s),this.z=e,this.fire(&quot;zoom&quot;)},_updateZoomHistory:function(e){var t=this.zoomHistory;void 0===t.lastIntegerZoom&amp;&amp;(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=0,t.lastZoom=e),Math.floor(t.lastZoom)&lt;Math.floor(e)?(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=Date.now()):Math.floor(t.lastZoom)&gt;Math.floor(e)&amp;&amp;(t.lastIntegerZoom=Math.floor(e+1),t.lastIntegerZoomTime=Date.now()),t.lastZoom=e},addSource:function(e,t){if(void 0!==this.sources[e])throw new Error(&quot;There is already a source with this ID&quot;);return t=Source.create(t),this.sources[e]=t,t.id=e,t.style=this,t.dispatcher=this.dispatcher,t.glyphAtlas=this.glyphAtlas,t.on(&quot;load&quot;,this._forwardSourceEvent).on(&quot;error&quot;,this._forwardSourceEvent).on(&quot;change&quot;,this._forwardSourceEvent).on(&quot;tile.add&quot;,this._forwardTileEvent).on(&quot;tile.load&quot;,this._forwardTileEvent).on(&quot;tile.error&quot;,this._forwardTileEvent).on(&quot;tile.remove&quot;,this._forwardTileEvent),this.fire(&quot;source.add&quot;,{source:t}),this},removeSource:function(e){if(void 0===this.sources[e])throw new Error(&quot;There is no source with this ID&quot;);var t=this.sources[e];return delete this.sources[e],t.off(&quot;load&quot;,this._forwardSourceEvent).off(&quot;error&quot;,this._forwardSourceEvent).off(&quot;change&quot;,this._forwardSourceEvent).off(&quot;tile.add&quot;,this._forwardTileEvent).off(&quot;tile.load&quot;,this._forwardTileEvent).off(&quot;tile.error&quot;,this._forwardTileEvent).off(&quot;tile.remove&quot;,this._forwardTileEvent),this.fire(&quot;source.remove&quot;,{source:t}),this},getSource:function(e){return this.sources[e]},addLayer:function(e,t){if(void 0!==this._layers[e.id])throw new Error(&quot;There is already a layer with this ID&quot;);return e instanceof StyleLayer||(e=new StyleLayer(e,this.stylesheet.constants||{})),this._layers[e.id]=e,this._order.splice(t?this._order.indexOf(t):1/0,0,e.id),e.resolveLayout(),e.resolveReference(this._layers),e.resolvePaint(),this._groupLayers(),this._broadcastLayers(),this.fire(&quot;layer.add&quot;,{layer:e}),this},removeLayer:function(e){var t=this._layers[e];if(void 0===t)throw new Error(&quot;There is no layer with this ID&quot;);for(var r in this._layers)this._layers[r].ref===e&amp;&amp;this.removeLayer(r);return delete this._layers[e],this._order.splice(this._order.indexOf(e),1),this._groupLayers(),this._broadcastLayers(),this.fire(&quot;layer.remove&quot;,{layer:t}),this},getLayer:function(e){return this._layers[e]},getReferentLayer:function(e){var t=this.getLayer(e);return t.ref&amp;&amp;(t=this.getLayer(t.ref)),t},setFilter:function(e,t){e=this.getReferentLayer(e),e.filter=t,this._broadcastLayers(),this.sources[e.source].reload(),this.fire(&quot;change&quot;)},getFilter:function(e){return this.getReferentLayer(e).filter},setLayoutProperty:function(e,t,r){e=this.getReferentLayer(e),e.setLayoutProperty(t,r),this._broadcastLayers(),e.source&amp;&amp;this.sources[e.source].reload(),this.fire(&quot;change&quot;)},getLayoutProperty:function(e,t){return this.getReferentLayer(e).getLayoutProperty(t)},setPaintProperty:function(e,t,r,s){this.getLayer(e).setPaintProperty(t,r,s),this.fire(&quot;change&quot;)},getPaintProperty:function(e,t,r){return this.getLayer(e).getPaintProperty(t,r)},featuresAt:function(e,t,r){var s=[],i=null;t.layer&amp;&amp;(t.layer={id:t.layer}),util.asyncEach(Object.keys(this.sources),function(r,o){var a=this.sources[r];a.featuresAt(e,t,function(e,t){t&amp;&amp;(s=s.concat(t)),e&amp;&amp;(i=e),o()})}.bind(this),function(){return i?r(i):void r(null,s.filter(function(e){return void 0!==this._layers[e.layer]}.bind(this)).map(function(e){return e.layer=this._layers[e.layer].json(),e}.bind(this)))}.bind(this))},_remove:function(){this.dispatcher.remove()},_updateSources:function(e){for(var t in this.sources)this.sources[t].update(e)},_redoPlacement:function(){for(var e in this.sources)this.sources[e].redoPlacement&amp;&amp;this.sources[e].redoPlacement()},_forwardSourceEvent:function(e){this.fire(&quot;source.&quot;+e.type,util.extend({source:e.target},e))},_forwardTileEvent:function(e){this.fire(e.type,util.extend({source:e.target},e))},&quot;get sprite json&quot;:function(e,t){var r=this.sprite;r.loaded()?t(null,{sprite:r.data,retina:r.retina}):r.on(&quot;load&quot;,function(){t(null,{sprite:r.data,retina:r.retina})})},&quot;get icons&quot;:function(e,t){var r=this.sprite,s=this.spriteAtlas;r.loaded()?(s.setSprite(r),s.addIcons(e.icons,t)):r.on(&quot;load&quot;,function(){s.setSprite(r),s.addIcons(e.icons,t)})},&quot;get glyphs&quot;:function(e,t){this.glyphSource.getSimpleGlyphs(e.fontstack,e.codepoints,e.uid,t)}});
},{&quot;../render/line_atlas&quot;:33,&quot;../source/source&quot;:39,&quot;../symbol/glyph_atlas&quot;:66,&quot;../symbol/glyph_source&quot;:67,&quot;../symbol/sprite_atlas&quot;:73,&quot;../util/ajax&quot;:84,&quot;../util/browser&quot;:85,&quot;../util/dispatcher&quot;:87,&quot;../util/evented&quot;:90,&quot;../util/mapbox&quot;:93,&quot;../util/util&quot;:96,&quot;./animation_loop&quot;:47,&quot;./image_sprite&quot;:48,&quot;./style_layer&quot;:56,&quot;mapbox-gl-style-spec/lib/validate/latest&quot;:111}],53:[function(require,module,exports){
    &quot;use strict&quot;;var util=require(&quot;../util/util&quot;);exports.resolve=function(r,t){function s(r){return&quot;string&quot;==typeof r&amp;&amp;&quot;@&quot;===r[0]?t[r]:r}var e;if(r=s(r),Array.isArray(r))for(r=r.slice(),e=0;e&lt;r.length;e++)r[e]in t&amp;&amp;(r[e]=s(r[e]));if(r.stops)for(r=util.extend({},r),r.stops=r.stops.slice(),e=0;e&lt;r.stops.length;e++)r.stops[e][1]in t&amp;&amp;(r.stops[e]=[r.stops[e][0],s(r.stops[e][1])]);return r},exports.resolveAll=function(r,t){if(!t)return r;var s={};for(var e in r)s[e]=exports.resolve(r[e],t);return s};
},{&quot;../util/util&quot;:96}],54:[function(require,module,exports){
    &quot;use strict&quot;;function StyleDeclaration(t,o){this.type=t.type,this.transitionable=t.transition,this.json=JSON.stringify(o),this.value=&quot;color&quot;!==this.type?o:o.stops?prepareColorFunction(o):parseColor(o),&quot;interpolated&quot;===t[&quot;function&quot;]?this.calculate=mapboxGLFunction.interpolated(this.value):(this.calculate=mapboxGLFunction[&quot;piecewise-constant&quot;](this.value),t.transition&amp;&amp;(this.calculate=transitioned(this.calculate)))}function transitioned(t){return function(o,r,e){var n,a,i,l=o%1,c=Math.min((Date.now()-r.lastIntegerZoomTime)/e,1),s=1,u=1;return o&gt;r.lastIntegerZoom?(n=l+(1-l)*c,s*=2,a=t(o-1),i=t(o)):(n=1-(1-c)*l,i=t(o),a=t(o+1),s/=2),{from:a,fromScale:s,to:i,toScale:u,t:n}}}function parseColor(t){if(colorCache[t])return colorCache[t];var o=prepareColor(parseCSSColor(t));return colorCache[t]=o,o}function prepareColor(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]/1]}function prepareColorFunction(t){return util.extend({},t,{stops:t.stops.map(function(t){return[t[0],parseColor(t[1])]})})}var parseCSSColor=require(&quot;csscolorparser&quot;).parseCSSColor,mapboxGLFunction=require(&quot;mapbox-gl-function&quot;),util=require(&quot;../util/util&quot;);module.exports=StyleDeclaration;var colorCache={};
},{&quot;../util/util&quot;:96,&quot;csscolorparser&quot;:101,&quot;mapbox-gl-function&quot;:110}],55:[function(require,module,exports){
    &quot;use strict&quot;;function makeConstructor(t){function e(t,e){this._values={},this._transitions={},this._constants=e;for(var n in t)this[n]=StyleConstant.resolve(t[n],this._constants)}return Object.keys(t).forEach(function(n){var r=t[n];Object.defineProperty(e.prototype,n,{set:function(t){this._values[n]=new StyleDeclaration(r,StyleConstant.resolve(t,this._constants))},get:function(){return this._values[n].value}}),r.transition&amp;&amp;Object.defineProperty(e.prototype,n+&quot;-transition&quot;,{set:function(t){this._transitions[n]=t},get:function(){return this._transitions[n]}})}),e.prototype.values=function(){return this._values},e.prototype.transition=function(t,e){var n=this._transitions[t]||{};return{duration:util.coalesce(n.duration,e.duration,300),delay:util.coalesce(n.delay,e.delay,0)}},e.prototype.json=function(){var t={};for(var e in this._values)t[e]=this._values[e].value;for(var n in this._transitions)t[n+&quot;-transition&quot;]=this._transitions[e];return t},e}var util=require(&quot;../util/util&quot;),reference=require(&quot;./reference&quot;),StyleConstant=require(&quot;./style_constant&quot;),StyleDeclaration=require(&quot;./style_declaration&quot;),lookup={paint:{},layout:{}};reference.layer.type.values.forEach(function(t){lookup.paint[t]=makeConstructor(reference[&quot;paint_&quot;+t]),lookup.layout[t]=makeConstructor(reference[&quot;layout_&quot;+t])}),module.exports=function(t,e,n,r){return new lookup[t][e](n,r)};
},{&quot;../util/util&quot;:96,&quot;./reference&quot;:51,&quot;./style_constant&quot;:53,&quot;./style_declaration&quot;:54}],56:[function(require,module,exports){
    &quot;use strict&quot;;function StyleLayer(t,i){this._layer=t,this._constants=i,this.id=t.id,this.ref=t.ref,this._resolved={},this._cascaded={},this.assign(t)}function premultiplyLayer(t,i){var e=i+&quot;-color&quot;,o=i+&quot;-halo-color&quot;,a=i+&quot;-outline-color&quot;,s=t[e],n=t[o],r=t[a],l=t[i+&quot;-opacity&quot;],y=s&amp;&amp;l*s[3],h=n&amp;&amp;l*n[3],c=r&amp;&amp;l*r[3];void 0!==y&amp;&amp;1&gt;y&amp;&amp;(t[e]=util.premultiply([s[0],s[1],s[2],y])),void 0!==h&amp;&amp;1&gt;h&amp;&amp;(t[o]=util.premultiply([n[0],n[1],n[2],h])),void 0!==c&amp;&amp;1&gt;c&amp;&amp;(t[a]=util.premultiply([r[0],r[1],r[2],c]))}var util=require(&quot;../util/util&quot;),StyleConstant=require(&quot;./style_constant&quot;),StyleTransition=require(&quot;./style_transition&quot;),StyleDeclarationSet=require(&quot;./style_declaration_set&quot;),LayoutProperties=require(&quot;./layout_properties&quot;),PaintProperties=require(&quot;./paint_properties&quot;);module.exports=StyleLayer,StyleLayer.prototype={resolveLayout:function(){this.ref||(this.layout=new LayoutProperties[this.type](StyleConstant.resolveAll(this._layer.layout,this._constants)),&quot;line&quot;===this.layout[&quot;symbol-placement&quot;]&amp;&amp;(this.layout.hasOwnProperty(&quot;text-rotation-alignment&quot;)||(this.layout[&quot;text-rotation-alignment&quot;]=&quot;map&quot;),this.layout.hasOwnProperty(&quot;icon-rotation-alignment&quot;)||(this.layout[&quot;icon-rotation-alignment&quot;]=&quot;map&quot;),this.layout[&quot;symbol-avoid-edges&quot;]=!0))},setLayoutProperty:function(t,i){this.layout[t]=StyleConstant.resolve(i,this._constants)},getLayoutProperty:function(t){return this.layout[t]},resolveReference:function(t){this.ref&amp;&amp;this.assign(t[this.ref])},resolvePaint:function(){for(var t in this._layer){var i=t.match(/^paint(?:\.(.*))?$/);i&amp;&amp;(this._resolved[i[1]||&quot;&quot;]=new StyleDeclarationSet(&quot;paint&quot;,this.type,this._layer[t],this._constants))}},setPaintProperty:function(t,i,e){var o=this._resolved[e||&quot;&quot;];o||(o=this._resolved[e||&quot;&quot;]=new StyleDeclarationSet(&quot;paint&quot;,this.type,{},this._constants)),o[t]=i},getPaintProperty:function(t,i){var e=this._resolved[i||&quot;&quot;];return e?e[t]:void 0},cascade:function(t,i,e,o){for(var a in this._resolved)if(&quot;&quot;===a||t[a]){var s=this._resolved[a],n=s.values();for(var r in n){var l=n[r],y=i.transition?this._cascaded[r]:void 0;if(!y||y.declaration.json!==l.json){var h=s.transition(r,e),c=this._cascaded[r]=new StyleTransition(l,y,h);c.instant()||(c.loopID=o.set(c.endTime-(new Date).getTime())),y&amp;&amp;o.cancel(y.loopID)}}}},recalculate:function(t,i){var e=this.type,o=this.paint=new PaintProperties[e];for(var a in this._cascaded)o[a]=this._cascaded[a].at(t,i);if(this.hidden=this.minzoom&amp;&amp;t&lt;this.minzoom||this.maxzoom&amp;&amp;t&gt;=this.maxzoom||&quot;none&quot;===this.layout.visibility,&quot;symbol&quot;===e?0!==o[&quot;text-opacity&quot;]&amp;&amp;this.layout[&quot;text-field&quot;]||0!==o[&quot;icon-opacity&quot;]&amp;&amp;this.layout[&quot;icon-image&quot;]?(premultiplyLayer(o,&quot;text&quot;),premultiplyLayer(o,&quot;icon&quot;)):this.hidden=!0:0===o[e+&quot;-opacity&quot;]?this.hidden=!0:premultiplyLayer(o,e),this._cascaded[&quot;line-dasharray&quot;]){var s=o[&quot;line-dasharray&quot;],n=this._cascaded[&quot;line-width&quot;]?this._cascaded[&quot;line-width&quot;].at(Math.floor(t),1/0):o[&quot;line-width&quot;];s.fromScale*=n,s.toScale*=n}return!this.hidden},assign:function(t){util.extend(this,util.pick(t,[&quot;type&quot;,&quot;source&quot;,&quot;source-layer&quot;,&quot;minzoom&quot;,&quot;maxzoom&quot;,&quot;filter&quot;,&quot;layout&quot;]))},json:function(){return util.extend({},this._layer,util.pick(this,[&quot;type&quot;,&quot;source&quot;,&quot;source-layer&quot;,&quot;minzoom&quot;,&quot;maxzoom&quot;,&quot;filter&quot;,&quot;layout&quot;,&quot;paint&quot;]))}};
},{&quot;../util/util&quot;:96,&quot;./layout_properties&quot;:49,&quot;./paint_properties&quot;:50,&quot;./style_constant&quot;:53,&quot;./style_declaration_set&quot;:55,&quot;./style_transition&quot;:57}],57:[function(require,module,exports){
    &quot;use strict&quot;;function StyleTransition(t,i,e){this.declaration=t,this.startTime=this.endTime=(new Date).getTime();var n=t.type;this.interp=&quot;string&quot;!==n&amp;&amp;&quot;array&quot;!==n||!t.transitionable?interpolate[n]:interpZoomTransitioned,this.oldTransition=i,this.duration=e.duration||0,this.delay=e.delay||0,this.instant()||(this.endTime=this.startTime+this.duration+this.delay,this.ease=util.easeCubicInOut),i&amp;&amp;i.endTime&lt;=this.startTime&amp;&amp;delete i.oldTransition}function interpZoomTransitioned(t,i,e){return{from:t.to,fromScale:t.toScale,to:i.to,toScale:i.toScale,t:e}}var util=require(&quot;../util/util&quot;),interpolate=require(&quot;../util/interpolate&quot;);module.exports=StyleTransition,StyleTransition.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&amp;&amp;0===this.delay},StyleTransition.prototype.at=function(t,i,e){var n=this.declaration.calculate(t,i,this.duration);if(this.instant())return n;if(e=e||Date.now(),e&lt;this.endTime){var a=this.oldTransition.at(t,i,this.startTime),r=this.ease((e-this.startTime-this.delay)/this.duration);n=this.interp(a,n,r)}return n};
},{&quot;../util/interpolate&quot;:92,&quot;../util/util&quot;:96}],58:[function(require,module,exports){
    &quot;use strict&quot;;function Anchor(t,e,o,n){this.x=t,this.y=e,this.angle=o,void 0!==n&amp;&amp;(this.segment=n)}var Point=require(&quot;point-geometry&quot;);module.exports=Anchor,Anchor.prototype=Object.create(Point.prototype),Anchor.prototype.clone=function(){return new Anchor(this.x,this.y,this.angle,this.segment)};
},{&quot;point-geometry&quot;:118}],59:[function(require,module,exports){
    &quot;use strict&quot;;function BinPack(e,h){this.width=e,this.height=h,this.free=[{x:0,y:0,w:e,h:h}]}module.exports=BinPack,BinPack.prototype.release=function(e){for(var h=0;h&lt;this.free.length;h++){var i=this.free[h];if(i.y===e.y&amp;&amp;i.h===e.h&amp;&amp;i.x+i.w===e.x)i.w+=e.w;else if(i.x===e.x&amp;&amp;i.w===e.w&amp;&amp;i.y+i.h===e.y)i.h+=e.h;else if(e.y===i.y&amp;&amp;e.h===i.h&amp;&amp;e.x+e.w===i.x)i.x=e.x,i.w+=e.w;else{if(e.x!==i.x||e.w!==i.w||e.y+e.h!==i.y)continue;i.y=e.y,i.h+=e.h}return this.free.splice(h,1),void this.release(i)}this.free.push(e)},BinPack.prototype.allocate=function(e,h){for(var i={x:1/0,y:1/0,w:1/0,h:1/0},t=-1,s=0;s&lt;this.free.length;s++){var r=this.free[s];e&lt;=r.w&amp;&amp;h&lt;=r.h&amp;&amp;r.y&lt;=i.y&amp;&amp;r.x&lt;=i.x&amp;&amp;(i=r,t=s)}return 0&gt;t?{x:-1,y:-1}:(this.free.splice(t,1),i.w&lt;i.h?(i.w&gt;e&amp;&amp;this.free.push({x:i.x+e,y:i.y,w:i.w-e,h:h}),i.h&gt;h&amp;&amp;this.free.push({x:i.x,y:i.y+h,w:i.w,h:i.h-h})):(i.w&gt;e&amp;&amp;this.free.push({x:i.x+e,y:i.y,w:i.w-e,h:i.h}),i.h&gt;h&amp;&amp;this.free.push({x:i.x,y:i.y+h,w:e,h:i.h-h})),{x:i.x,y:i.y,w:e,h:h})};
},{}],60:[function(require,module,exports){
    &quot;use strict&quot;;function checkMaxAngle(e,t,a,r,n){if(void 0===t.segment)return!0;for(var i=t,s=t.segment+1,f=0;f&gt;-a/2;){if(s--,0&gt;s)return!1;f-=e[s].dist(i),i=e[s]}f+=e[s].dist(e[s+1]),s++;for(var l=[],o=0;a/2&gt;f;){var u=e[s-1],c=e[s],g=e[s+1];if(!g)return!1;var h=u.angleTo(c)-c.angleTo(g);for(h=(h+3*Math.PI)%(2*Math.PI)-Math.PI,l.push({distance:f,angleDelta:h}),o+=h;f-l[0].distance&gt;r;)o-=l.shift().angleDelta;if(Math.abs(o)&gt;n)return!1;s++,f+=c.dist(g)}return!0}module.exports=checkMaxAngle;
},{}],61:[function(require,module,exports){
    &quot;use strict&quot;;function clipLine(x,y,n,e,t){for(var i=[],o=0;o&lt;x.length;o++)for(var r,P=x[o],u=0;u&lt;P.length-1;u++){var w=P[u],l=P[u+1];w.x&lt;y&amp;&amp;l.x&lt;y||(w.x&lt;y?w=new Point(y,w.y+(l.y-w.y)*((y-w.x)/(l.x-w.x))):l.x&lt;y&amp;&amp;(l=new Point(y,w.y+(l.y-w.y)*((y-w.x)/(l.x-w.x)))),w.y&lt;n&amp;&amp;l.y&lt;n||(w.y&lt;n?w=new Point(w.x+(l.x-w.x)*((n-w.y)/(l.y-w.y)),n):l.y&lt;n&amp;&amp;(l=new Point(w.x+(l.x-w.x)*((n-w.y)/(l.y-w.y)),n)),w.x&gt;=e&amp;&amp;l.x&gt;=e||(w.x&gt;=e?w=new Point(e,w.y+(l.y-w.y)*((e-w.x)/(l.x-w.x))):l.x&gt;=e&amp;&amp;(l=new Point(e,w.y+(l.y-w.y)*((e-w.x)/(l.x-w.x)))),w.y&gt;=t&amp;&amp;l.y&gt;=t||(w.y&gt;=t?w=new Point(w.x+(l.x-w.x)*((t-w.y)/(l.y-w.y)),t):l.y&gt;=t&amp;&amp;(l=new Point(w.x+(l.x-w.x)*((t-w.y)/(l.y-w.y)),t)),r&amp;&amp;w.equals(r[r.length-1])||(r=[w],i.push(r)),r.push(l)))))}return i}var Point=require(&quot;point-geometry&quot;);module.exports=clipLine;
},{&quot;point-geometry&quot;:118}],62:[function(require,module,exports){
    &quot;use strict&quot;;function CollisionBox(i,t,s,h,o,l){this.anchorPoint=i,this.x1=t,this.y1=s,this.x2=h,this.y2=o,this.maxScale=l,this.placementScale=0,this[0]=this[1]=this[2]=this[3]=0}module.exports=CollisionBox;
},{}],63:[function(require,module,exports){
    &quot;use strict&quot;;function CollisionFeature(o,i,t,e,r,s){var n=t.top*e-r,l=t.bottom*e+r,a=t.left*e-r,u=t.right*e+r;if(this.boxes=[],s){var h=l-n,x=u-a;if(0&gt;=h)return;h=Math.max(10*e,h),this._addLineCollisionBoxes(o,i,x,h)}else this.boxes.push(new CollisionBox(new Point(i.x,i.y),a,n,u,l,1/0))}var CollisionBox=require(&quot;./collision_box&quot;),Point=require(&quot;point-geometry&quot;);module.exports=CollisionFeature,CollisionFeature.prototype._addLineCollisionBoxes=function(o,i,t,e){var r=e/2,s=Math.floor(t/r),n=-e/2,l=this.boxes,a=i,u=i.segment+1,h=n;do{if(u--,0&gt;u)return l;h-=o[u].dist(a),a=o[u]}while(h&gt;-t/2);for(var x=o[u].dist(o[u+1]),d=0;s&gt;d;d++){for(var f=-t/2+d*r;f&gt;h+x;){if(h+=x,u++,u+1&gt;=o.length)return l;x=o[u].dist(o[u+1])}var C=f-h,b=o[u],m=o[u+1],p=m.sub(b)._unit()._mult(C)._add(b),v=Math.max(Math.abs(f-n)-r/2,0),_=t/2/v;l.push(new CollisionBox(p,-e/2,-e/2,e/2,e/2,_))}return l};
},{&quot;./collision_box&quot;:62,&quot;point-geometry&quot;:118}],64:[function(require,module,exports){
    &quot;use strict&quot;;function CollisionTile(t,a){this.tree=rbush(),this.angle=t;var e=Math.sin(t),i=Math.cos(t);this.rotationMatrix=[i,-e,e,i],this.yStretch=1/Math.cos(a/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3)}var rbush=require(&quot;rbush&quot;);module.exports=CollisionTile,CollisionTile.prototype.minScale=.25,CollisionTile.prototype.maxScale=2,CollisionTile.prototype.placeCollisionFeature=function(t){for(var a=this.minScale,e=this.rotationMatrix,i=this.yStretch,o=0;o&lt;t.boxes.length;o++){var l=t.boxes[o],r=l.anchorPoint.matMult(e),s=r.x,h=r.y;l[0]=s+l.x1,l[1]=h+l.y1*i,l[2]=s+l.x2,l[3]=h+l.y2*i;for(var n=this.tree.search(l),c=0;c&lt;n.length;c++){var x=n[c],m=x.anchorPoint.matMult(e),y=(x.x1-l.x2)/(s-m.x),u=(x.x2-l.x1)/(s-m.x),S=(x.y1-l.y2)*i/(h-m.y),p=(x.y2-l.y1)*i/(h-m.y);(isNaN(y)||isNaN(u))&amp;&amp;(y=u=1),(isNaN(S)||isNaN(p))&amp;&amp;(S=p=1);var M=Math.min(Math.max(y,u),Math.max(S,p));if(M&gt;x.maxScale&amp;&amp;(M=x.maxScale),M&gt;l.maxScale&amp;&amp;(M=l.maxScale),M&gt;a&amp;&amp;M&gt;=x.placementScale&amp;&amp;(a=M),a&gt;=this.maxScale)return a}}return a},CollisionTile.prototype.insertCollisionFeature=function(t,a){for(var e=t.boxes,i=0;i&lt;e.length;i++)e[i].placementScale=a;a&lt;this.maxScale&amp;&amp;this.tree.load(e)};
},{&quot;rbush&quot;:119}],65:[function(require,module,exports){
    &quot;use strict&quot;;function getAnchors(e,r,t,n,a,o,l){var c=n?.6*a*o:0,h=n?n.right-n.left:r,i=2*a,u=(h/2+i)*o*l%r;return resample(e,u,r,c,t,h*o,!1)}function resample(e,r,t,n,a,o,l){for(var c=0,h=r?r-t:0,i=[],u=0;u&lt;e.length-1;u++){for(var s=e[u],g=e[u+1],p=s.dist(g),f=g.angleTo(s);c+p&gt;h+t;){h+=t;var m=(h-c)/p,v=interpolate(s.x,g.x,m),x=interpolate(s.y,g.y,m);if(v&gt;=0&amp;&amp;4096&gt;v&amp;&amp;x&gt;=0&amp;&amp;4096&gt;x){v=Math.round(v),x=Math.round(x);var A=new Anchor(v,x,f,u);(!n||checkMaxAngle(e,A,o,n,a))&amp;&amp;i.push(A)}}c+=p}return l||i.length||(i=resample(e,c/2,t,n,a,o,!0)),i}var interpolate=require(&quot;../util/interpolate&quot;),Anchor=require(&quot;../symbol/anchor&quot;),checkMaxAngle=require(&quot;./check_max_angle&quot;);module.exports=getAnchors;
},{&quot;../symbol/anchor&quot;:58,&quot;../util/interpolate&quot;:92,&quot;./check_max_angle&quot;:60}],66:[function(require,module,exports){
    &quot;use strict&quot;;function GlyphAtlas(t,i){this.width=t,this.height=i,this.bin=new BinPack(t,i),this.index={},this.ids={},this.data=new Uint8Array(t*i)}var BinPack=require(&quot;./bin_pack&quot;);module.exports=GlyphAtlas,GlyphAtlas.prototype={get debug(){return&quot;canvas&quot;in this},set debug(t){t&amp;&amp;!this.canvas?(this.canvas=document.createElement(&quot;canvas&quot;),this.canvas.width=this.width,this.canvas.height=this.height,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext(&quot;2d&quot;)):!t&amp;&amp;this.canvas&amp;&amp;(this.canvas.parentNode.removeChild(this.canvas),delete this.ctx,delete this.canvas)}},GlyphAtlas.prototype.getGlyphs=function(){var t,i,e,s={};for(var h in this.ids)t=h.split(&quot;#&quot;),i=t[0],e=t[1],s[i]||(s[i]=[]),s[i].push(e);return s},GlyphAtlas.prototype.getRects=function(){var t,i,e,s={};for(var h in this.ids)t=h.split(&quot;#&quot;),i=t[0],e=t[1],s[i]||(s[i]={}),s[i][e]=this.index[h];return s},GlyphAtlas.prototype.removeGlyphs=function(t){for(var i in this.ids){var e=this.ids[i],s=e.indexOf(t);if(s&gt;=0&amp;&amp;e.splice(s,1),this.ids[i]=e,!e.length){for(var h=this.index[i],a=this.data,r=0;r&lt;h.h;r++)for(var n=this.width*(h.y+r)+h.x,d=0;d&lt;h.w;d++)a[n+d]=0;this.dirty=!0,this.bin.release(h),delete this.index[i],delete this.ids[i]}}this.updateTexture(this.gl)},GlyphAtlas.prototype.addGlyph=function(t,i,e,s){if(!e)return null;var h=i+&quot;#&quot;+e.id;if(this.index[h])return this.ids[h].indexOf(t)&lt;0&amp;&amp;this.ids[h].push(t),this.index[h];if(!e.bitmap)return null;var a=e.width+2*s,r=e.height+2*s,n=1,d=a+2*n,l=r+2*n;d+=4-d%4,l+=4-l%4;var o=this.bin.allocate(d,l);if(o.x&lt;0)return console.warn(&quot;glyph bitmap overflow&quot;),{glyph:e,rect:null};this.index[h]=o,this.ids[h]=[t];for(var c=this.data,p=e.bitmap,u=0;r&gt;u;u++)for(var x=this.width*(o.y+u+n)+o.x+n,E=a*u,T=0;a&gt;T;T++)c[x+T]=p[E+T];return this.dirty=!0,o},GlyphAtlas.prototype.bind=function(t){this.gl=t,this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,null))},GlyphAtlas.prototype.updateTexture=function(t){if(this.bind(t),this.dirty){if(t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data),this.ctx){for(var i=this.ctx.getImageData(0,0,this.width,this.height),e=0,s=0;e&lt;this.data.length;e++,s+=4)i.data[s]=this.data[e],i.data[s+1]=this.data[e],i.data[s+2]=this.data[e],i.data[s+3]=255;this.ctx.putImageData(i,0,0),this.ctx.strokeStyle=&quot;red&quot;;for(var h=0;h&lt;this.bin.free.length;h++){var a=this.bin.free[h];this.ctx.strokeRect(a.x,a.y,a.w,a.h)}}this.dirty=!1}};
},{&quot;./bin_pack&quot;:59}],67:[function(require,module,exports){
    &quot;use strict&quot;;function GlyphSource(t,e){this.url=t&amp;&amp;normalizeURL(t),this.glyphAtlas=e,this.stacks=[],this.loading={}}function SimpleGlyph(t,e,r){var i=1;this.advance=t.advance,this.left=t.left-r-i,this.top=t.top+r+i,this.rect=e}function glyphUrl(t,e,r,i){return i=i||&quot;abc&quot;,r.replace(&quot;{s}&quot;,i[t.length%i.length]).replace(&quot;{fontstack}&quot;,t).replace(&quot;{range}&quot;,e)}var normalizeURL=require(&quot;../util/mapbox&quot;).normalizeGlyphsURL,getArrayBuffer=require(&quot;../util/ajax&quot;).getArrayBuffer,Glyphs=require(&quot;../util/glyphs&quot;),Protobuf=require(&quot;pbf&quot;);module.exports=GlyphSource,GlyphSource.prototype.getSimpleGlyphs=function(t,e,r,i){void 0===this.stacks[t]&amp;&amp;(this.stacks[t]={});for(var l,a={},s=this.stacks[t],h=this.glyphAtlas,o=3,n={},p=0,u=0;u&lt;e.length;u++){var f=e[u];if(l=Math.floor(f/256),s[l]){var y=s[l].glyphs[f],c=h.addGlyph(r,t,y,o);y&amp;&amp;(a[f]=new SimpleGlyph(y,c,o))}else void 0===n[l]&amp;&amp;(n[l]=[],p++),n[l].push(f)}p||i(void 0,a);var g=function(e,l,s){if(!e)for(var u=this.stacks[t][l]=s.stacks[0],f=0;f&lt;n[l].length;f++){var y=n[l][f],c=u.glyphs[y],g=h.addGlyph(r,t,c,o);c&amp;&amp;(a[y]=new SimpleGlyph(c,g,o))}p--,p||i(void 0,a)}.bind(this);for(var d in n)this.loadRange(t,d,g)},GlyphSource.prototype.loadRange=function(t,e,r){if(256*e&gt;65535)return r(&quot;gyphs &gt; 65535 not supported&quot;);void 0===this.loading[t]&amp;&amp;(this.loading[t]={});var i=this.loading[t];if(i[e])i[e].push(r);else{i[e]=[r];var l=256*e+&quot;-&quot;+(256*e+255),a=glyphUrl(t,l,this.url);getArrayBuffer(a,function(t,r){for(var l=!t&amp;&amp;new Glyphs(new Protobuf(new Uint8Array(r))),a=0;a&lt;i[e].length;a++)i[e][a](t,e,l);delete i[e]})}};
},{&quot;../util/ajax&quot;:84,&quot;../util/glyphs&quot;:91,&quot;../util/mapbox&quot;:93,&quot;pbf&quot;:116}],68:[function(require,module,exports){
    &quot;use strict&quot;;module.exports=function(e,t,n){function r(r){c.push(e[r]),f.push(n[r]),v.push(t[r]),h++}function u(e,t,n){var r=l[e];return delete l[e],l[t]=r,f[r][0].pop(),f[r][0]=f[r][0].concat(n[0]),r}function i(e,t,n){var r=a[t];return delete a[t],a[e]=r,f[r][0].shift(),f[r][0]=n[0].concat(f[r][0]),r}function o(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+&quot;:&quot;+r.x+&quot;:&quot;+r.y}var s,a={},l={},c=[],f=[],v=[],h=0;for(s=0;s&lt;e.length;s++){var p=n[s],d=t[s];if(d){var g=o(d,p),x=o(d,p,!0);if(g in l&amp;&amp;x in a&amp;&amp;l[g]!==a[x]){var m=i(g,x,p),y=u(g,x,f[m]);delete a[g],delete l[x],l[o(d,f[y],!0)]=y,f[m]=null}else g in l?u(g,x,p):x in a?i(g,x,p):(r(s),a[g]=h-1,l[x]=h-1)}else r(s)}return{features:c,textFeatures:v,geometries:f}};
},{}],69:[function(require,module,exports){
    &quot;use strict&quot;;function SymbolQuad(t,a,e,n,i,o,r,h,l){this.anchorPoint=t,this.tl=a,this.tr=e,this.bl=n,this.br=i,this.tex=o,this.angle=r,this.minScale=h,this.maxScale=l}function getIconQuads(t,a,e,n,i,o){var r=a.image.rect,h=1,l=a.left-h,s=l+r.w,m=a.top-h,u=m+r.h,c=new Point(l,m),g=new Point(s,m),M=new Point(s,u),P=new Point(l,u),f=i[&quot;icon-rotate&quot;]*Math.PI/180;if(o){var y=n[t.segment];f+=Math.atan2(t.y-y.y,t.x-y.x)}if(f){var S=Math.sin(f),v=Math.cos(f),x=[v,-S,S,v];c=c.matMult(x),g=g.matMult(x),P=P.matMult(x),M=M.matMult(x)}return[new SymbolQuad(new Point(t.x,t.y),c,g,P,M,a.image.rect,0,minScale,1/0)]}function getGlyphQuads(t,a,e,n,i,o){for(var r=i[&quot;text-rotate&quot;]*Math.PI/180,h=i[&quot;text-keep-upright&quot;],l=a.positionedGlyphs,s=[],m=0;m&lt;l.length;m++){var u=l[m],c=u.glyph,g=c.rect;if(g){var M,P=(u.x+c.advance/2)*e,f=minScale;o?(M=[],f=getSegmentGlyphs(M,t,P,n,t.segment,!0),h&amp;&amp;(f=Math.min(f,getSegmentGlyphs(M,t,P,n,t.segment,!1)))):M=[{anchorPoint:new Point(t.x,t.y),offset:0,angle:0,maxScale:1/0,minScale:minScale}];for(var y=u.x+c.left,S=u.y-c.top,v=y+g.w,x=S+g.h,p=new Point(y,S),w=new Point(v,S),d=new Point(y,x),I=new Point(v,x),b=0;b&lt;M.length;b++){var Q=M[b],G=p,k=w,q=d,_=I,j=Q.angle+r;if(j){var z=Math.sin(j),A=Math.cos(j),B=[A,-z,z,A];G=G.matMult(B),k=k.matMult(B),q=q.matMult(B),_=_.matMult(B)}var C=Math.max(Q.minScale,f),D=(t.angle+r+Q.offset+2*Math.PI)%(2*Math.PI);s.push(new SymbolQuad(Q.anchorPoint,G,k,q,_,g,D,C,Q.maxScale))}}}return s}function getSegmentGlyphs(t,a,e,n,i,o){var r=!o;0&gt;e&amp;&amp;(o=!o),o&amp;&amp;i++;var h=new Point(a.x,a.y),l=n[i],s=1/0;e=Math.abs(e);for(var m=minScale;;){var u=h.dist(l),c=e/u,g=Math.atan2(l.y-h.y,l.x-h.x);if(o||(g+=Math.PI),r&amp;&amp;(g+=Math.PI),t.push({anchorPoint:h,offset:r?Math.PI:0,minScale:c,maxScale:s,angle:(g+2*Math.PI)%(2*Math.PI)}),m&gt;=c)break;for(h=l;h.equals(l);)if(i+=o?1:-1,l=n[i],!l)return c;var M=l.sub(h)._unit();h=h.sub(M._mult(u)),s=c}return m}var Point=require(&quot;point-geometry&quot;);module.exports={getIconQuads:getIconQuads,getGlyphQuads:getGlyphQuads};var minScale=.5;
},{&quot;point-geometry&quot;:118}],70:[function(require,module,exports){
    &quot;use strict&quot;;function resolveIcons(e,r){for(var o=[],s=0,n=e.length;n&gt;s;s++){var t=resolveTokens(e[s].properties,r[&quot;icon-image&quot;]);t&amp;&amp;o.indexOf(t)&lt;0&amp;&amp;o.push(t)}return o}var resolveTokens=require(&quot;../util/token&quot;);module.exports=resolveIcons;
},{&quot;../util/token&quot;:95}],71:[function(require,module,exports){
    &quot;use strict&quot;;function resolveText(e,r,t){for(var o=[],s=[],n=0,u=e.length;u&gt;n;n++){var a=resolveTokens(e[n].properties,r[&quot;text-field&quot;]);if(a){a=a.toString();var l=r[&quot;text-transform&quot;];&quot;uppercase&quot;===l?a=a.toLocaleUpperCase():&quot;lowercase&quot;===l&amp;&amp;(a=a.toLocaleLowerCase());for(var i=0,v=a.length;v&gt;i;i++)s.push(a.charCodeAt(i));o[n]=a}else o[n]=null}return s=uniq(s,t),{textFeatures:o,codepoints:s}}function uniq(e,r){var t,o=[];e.sort(sortNumbers);for(var s=0;s&lt;e.length;s++)e[s]!==t&amp;&amp;(t=e[s],r[t]||o.push(e[s]));return o}function sortNumbers(e,r){return e-r}var resolveTokens=require(&quot;../util/token&quot;);module.exports=resolveText;
},{&quot;../util/token&quot;:95}],72:[function(require,module,exports){
    &quot;use strict&quot;;function PositionedGlyph(t,i,n,e){this.codePoint=t,this.x=i,this.y=n,this.glyph=e}function Shaping(t,i,n,e,o){this.positionedGlyphs=t,this.top=i,this.bottom=n,this.left=e,this.right=o}function shapeText(t,i,n,e,o,h,a,s,r){for(var l=[],f=new Shaping(l,r[1],r[1],r[0],r[0]),c=-17,p=r[0],u=r[1]+c,d=0;d&lt;t.length;d++){var g=t.charCodeAt(d),v=i[g];v&amp;&amp;(l.push(new PositionedGlyph(g,p,u,v)),p+=v.advance+s)}return l.length?(linewrap(f,i,e,n,o,h,a),f):!1}function linewrap(t,i,n,e,o,h,a){var s=null,r=0,l=0,f=0,c=0,p=t.positionedGlyphs;if(e)for(var u=0;u&lt;p.length;u++){var d=p[u];if(d.x-=r,d.y+=n*f,d.x&gt;e&amp;&amp;null!==s){var g=p[s+1].x;c=Math.max(g,c);for(var v=s+1;u&gt;=v;v++)p[v].y+=n,p[v].x-=g;a&amp;&amp;justifyLine(p,i,l,s-1,a),l=s+1,s=null,r+=g,f++}breakable[d.codePoint]&amp;&amp;(s=u)}var x=p[p.length-1],y=x.x+i[x.codePoint].advance;c=Math.max(c,y);var P=(f+1)*n;justifyLine(p,i,l,p.length-1,a),align(p,a,o,h,c,n,f),t.top+=-h*P,t.bottom=t.top+P,t.left+=-o*c,t.right=t.left+c}function justifyLine(t,i,n,e,o){for(var h=i[t[e].codePoint].advance,a=(t[e].x+h)*o,s=n;e&gt;=s;s++)t[s].x-=a}function align(t,i,n,e,o,h,a){for(var s=(i-n)*o,r=(-e*(a+1)+.5)*h,l=0;l&lt;t.length;l++)t[l].x+=s,t[l].y+=r}function shapeIcon(t,i){if(!t||!t.rect)return null;var n=i[&quot;icon-offset&quot;][0],e=i[&quot;icon-offset&quot;][1],o=n-t.width/2,h=o+t.width,a=e-t.height/2,s=a+t.height;return new PositionedIcon(t,a,s,o,h)}function PositionedIcon(t,i,n,e,o){this.image=t,this.top=i,this.bottom=n,this.left=e,this.right=o}module.exports={shapeText:shapeText,shapeIcon:shapeIcon};var breakable={32:!0};
},{}],73:[function(require,module,exports){
    &quot;use strict&quot;;function SpriteAtlas(t,i){this.width=t,this.height=i,this.bin=new BinPack(t,i),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0}function copyBitmap(t,i,e,h,a,s,r,o,n,l,p){var d,c,x=h*i+e,f=o*s+r;if(p)for(f-=s,c=-1;l&gt;=c;c++,x=((c+l)%l+h)*i+e,f+=s)for(d=-1;n&gt;=d;d++)a[f+d]=t[x+(d+n)%n];else for(c=0;l&gt;c;c++,x+=i,f+=s)for(d=0;n&gt;d;d++)a[f+d]=t[x+d]}function AtlasImage(t,i,e,h){this.rect=t,this.width=i,this.height=e,this.sdf=h}var BinPack=require(&quot;./bin_pack&quot;);module.exports=SpriteAtlas,SpriteAtlas.prototype={get debug(){return&quot;canvas&quot;in this},set debug(t){t&amp;&amp;!this.canvas?(this.canvas=document.createElement(&quot;canvas&quot;),this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.canvas.style.width=this.width+&quot;px&quot;,this.canvas.style.width=this.width+&quot;px&quot;,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext(&quot;2d&quot;)):!t&amp;&amp;this.canvas&amp;&amp;(this.canvas.parentNode.removeChild(this.canvas),delete this.ctx,delete this.canvas)}},SpriteAtlas.prototype.resize=function(t){if(this.pixelRatio===t)return!1;var i=this.pixelRatio;if(this.pixelRatio=t,this.canvas&amp;&amp;(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio),this.data){var e=this.data;this.data=!1,this.allocate(),this.texture=!1;for(var h=this.width*i,a=this.height*i,s=this.width*t,r=this.height*t,o=this.data,n=e,l=0;r&gt;l;l++)for(var p=Math.floor(l*a/r)*h,d=l*s,c=0;s&gt;c;c++){var x=Math.floor(c*h/s);o[d+c]=n[p+x]}e=null,this.dirty=!0}return this.dirty},SpriteAtlas.prototype.allocateImage=function(t,i){var e=2,h=t+e+(4-(t+e)%4),a=i+e+(4-(i+e)%4),s=this.bin.allocate(h,a);return 0===s.w?s:(s.originalWidth=t,s.originalHeight=i,s)},SpriteAtlas.prototype.getImage=function(t,i){if(this.images[t])return this.images[t];if(!this.sprite)return null;var e=this.sprite.getSpritePosition(t);if(!e.width||!e.height)return null;var h=e.width/e.pixelRatio,a=e.height/e.pixelRatio,s=this.allocateImage(h,a);if(0===s.w)return s;var r=new AtlasImage(s,h,a,e.sdf);return this.images[t]=r,this.copy(s,e,i),r},SpriteAtlas.prototype.getPosition=function(t,i){var e=this.getImage(t,i),h=e&amp;&amp;e.rect;if(!h)return null;var a=i?e.width:h.w,s=i?e.height:h.h,r=1;return{size:[a,s],tl:[(h.x+r)/this.width,(h.y+r)/this.height],br:[(h.x+r+a)/this.width,(h.y+r+s)/this.height]}},SpriteAtlas.prototype.allocate=function(){if(!this.data){var t=Math.floor(this.width*this.pixelRatio),i=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(t*i);for(var e=0;e&lt;this.data.length;e++)this.data[e]=0}},SpriteAtlas.prototype.copy=function(t,i,e){if(this.sprite.img.data){var h=new Uint32Array(this.sprite.img.data.buffer);this.allocate();var a=this.data,s=1;copyBitmap(h,this.sprite.img.width,i.x,i.y,a,this.width*this.pixelRatio,(t.x+s)*this.pixelRatio,(t.y+s)*this.pixelRatio,i.width,i.height,e),this.dirty=!0}},SpriteAtlas.prototype.setSprite=function(t){this.sprite=t},SpriteAtlas.prototype.addIcons=function(t,i){for(var e=0;e&lt;t.length;e++)this.getImage(t[e]);i(null,this.images)},SpriteAtlas.prototype.bind=function(t,i){var e=!1;this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e=!0);var h=i?t.LINEAR:t.NEAREST;if(h!==this.filter&amp;&amp;(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,h),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,h),this.filter=h),this.dirty&amp;&amp;(this.allocate(),e?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1,this.ctx)){var a=this.ctx.getImageData(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);a.data.set(new Uint8ClampedArray(this.data.buffer)),this.ctx.putImageData(a,0,0),this.ctx.strokeStyle=&quot;red&quot;;for(var s=0;s&lt;this.bin.free.length;s++){var r=this.bin.free[s];this.ctx.strokeRect(r.x*this.pixelRatio,r.y*this.pixelRatio,r.w*this.pixelRatio,r.h*this.pixelRatio)}}};
},{&quot;./bin_pack&quot;:59}],74:[function(require,module,exports){
    &quot;use strict&quot;;var util=require(&quot;../util/util&quot;),interpolate=require(&quot;../util/interpolate&quot;),browser=require(&quot;../util/browser&quot;),LatLng=require(&quot;../geo/lat_lng&quot;),LatLngBounds=require(&quot;../geo/lat_lng_bounds&quot;),Point=require(&quot;point-geometry&quot;),Camera=module.exports=function(){};util.extend(Camera.prototype,{getCenter:function(){return this.transform.center},setCenter:function(t){return this.jumpTo({center:t}),this},panBy:function(t,i){return this.panTo(this.transform.center,util.extend({offset:Point.convert(t).mult(-1)},i)),this},panTo:function(t,i){this.stop(),t=LatLng.convert(t),i=util.extend({duration:500,easing:util.ease,offset:[0,0]},i);var e=this.transform,n=Point.convert(i.offset).rotate(-e.angle),o=e.point,r=e.project(t).sub(n);return i.noMoveStart||this.fire(&quot;movestart&quot;),this._ease(function(t){e.center=e.unproject(o.add(r.sub(o).mult(t))),this.fire(&quot;move&quot;)},function(){this.fire(&quot;moveend&quot;)},i),this},getZoom:function(){return this.transform.zoom},setZoom:function(t){return this.jumpTo({zoom:t}),this},zoomTo:function(t,i){this.stop(),i=util.extend({duration:500},i),i.easing=this._updateEasing(i.duration,t,i.easing);var e=this.transform,n=e.center,o=e.zoom;return i.around?n=LatLng.convert(i.around):i.offset&amp;&amp;(n=e.pointLocation(e.centerPoint.add(Point.convert(i.offset)))),i.animate===!1&amp;&amp;(i.duration=0),this.zooming||(this.zooming=!0,this.fire(&quot;movestart&quot;)),this._ease(function(i){e.setZoomAround(interpolate(o,t,i),n),this.fire(&quot;move&quot;).fire(&quot;zoom&quot;)},function(){this.ease=null,i.duration&gt;=200&amp;&amp;(this.zooming=!1,this.fire(&quot;moveend&quot;))},i),i.duration&lt;200&amp;&amp;(clearTimeout(this._onZoomEnd),this._onZoomEnd=setTimeout(function(){this.zooming=!1,this.fire(&quot;moveend&quot;)}.bind(this),200)),this},zoomIn:function(t){return this.zoomTo(this.getZoom()+1,t),this},zoomOut:function(t){return this.zoomTo(this.getZoom()-1,t),this},getBearing:function(){return this.transform.bearing},setBearing:function(t){return this.jumpTo({bearing:t}),this},rotateTo:function(t,i){this.stop(),i=util.extend({duration:500,easing:util.ease},i);var e=this.transform,n=this.getBearing(),o=e.center;return i.around?o=LatLng.convert(i.around):i.offset&amp;&amp;(o=e.pointLocation(e.centerPoint.add(Point.convert(i.offset)))),t=this._normalizeBearing(t,n),this.rotating=!0,this.fire(&quot;movestart&quot;),this._ease(function(i){e.setBearingAround(interpolate(n,t,i),o),this.fire(&quot;move&quot;).fire(&quot;rotate&quot;)},function(){this.rotating=!1,this.fire(&quot;moveend&quot;)},i),this},resetNorth:function(t){return this.rotateTo(0,util.extend({duration:1e3},t)),this},getPitch:function(){return this.transform.pitch},setPitch:function(t){return this.jumpTo({pitch:t}),this},fitBounds:function(t,i){i=util.extend({padding:0,offset:[0,0],maxZoom:1/0},i),t=LatLngBounds.convert(t);var e=Point.convert(i.offset),n=this.transform,o=n.project(t.getNorthWest()),r=n.project(t.getSouthEast()),s=r.sub(o),a=(n.width-2*i.padding-2*Math.abs(e.x))/s.x,h=(n.height-2*i.padding-2*Math.abs(e.y))/s.y;return i.center=n.unproject(o.add(r).div(2)),i.zoom=Math.min(n.scaleZoom(n.scale*Math.min(a,h)),i.maxZoom),i.bearing=0,i.linear?this.easeTo(i):this.flyTo(i)},jumpTo:function(t){this.stop();var i=this.transform,e=!1,n=!1,o=!1;return&quot;center&quot;in t&amp;&amp;(i.center=LatLng.convert(t.center)),&quot;zoom&quot;in t&amp;&amp;i.zoom!==+t.zoom&amp;&amp;(e=!0,i.zoom=+t.zoom),&quot;bearing&quot;in t&amp;&amp;i.bearing!==+t.bearing&amp;&amp;(n=!0,i.bearing=+t.bearing),&quot;pitch&quot;in t&amp;&amp;i.pitch!==+t.pitch&amp;&amp;(o=!0,i.pitch=+t.pitch),this.fire(&quot;movestart&quot;).fire(&quot;move&quot;),e&amp;&amp;this.fire(&quot;zoom&quot;),n&amp;&amp;this.fire(&quot;rotate&quot;),o&amp;&amp;this.fire(&quot;pitch&quot;),this.fire(&quot;moveend&quot;)},easeTo:function(t){this.stop(),t=util.extend({offset:[0,0],duration:500,easing:util.ease},t);var i=this.transform,e=Point.convert(t.offset).rotate(-i.angle),n=i.point,o=this.getZoom(),r=this.getBearing(),s=this.getPitch(),a=&quot;zoom&quot;in t?+t.zoom:o,h=&quot;bearing&quot;in t?this._normalizeBearing(t.bearing,r):r,u=&quot;pitch&quot;in t?+t.pitch:s,f=i.zoomScale(a-o),c=&quot;center&quot;in t?i.project(LatLng.convert(t.center)).sub(e.div(f)):n,m=LatLng.convert(t.around);return a!==o&amp;&amp;(this.zooming=!0),r!==h&amp;&amp;(this.rotating=!0),this.zooming&amp;&amp;!m&amp;&amp;(m=i.pointLocation(i.centerPoint.add(c.sub(n).div(1-1/f)))),this.fire(&quot;movestart&quot;),this._ease(function(t){this.zooming?i.setZoomAround(interpolate(o,a,t),m):i.center=i.unproject(n.add(c.sub(n).mult(t))),this.rotating&amp;&amp;(i.bearing=interpolate(r,h,t)),u!==s&amp;&amp;(i.pitch=interpolate(s,u,t)),this.fire(&quot;move&quot;),this.zooming&amp;&amp;this.fire(&quot;zoom&quot;),this.rotating&amp;&amp;this.fire(&quot;rotate&quot;)},function(){this.zooming=!1,this.rotating=!1,this.fire(&quot;moveend&quot;)},t),this},flyTo:function(t){function i(t){var i=(z*z-b*b+(t?-1:1)*L*L*_*_)/(2*(t?z:b)*L*_);return Math.log(Math.sqrt(i*i+1)-i)}function e(t){return(Math.exp(t)-Math.exp(-t))/2}function n(t){return(Math.exp(t)+Math.exp(-t))/2}function o(t){return e(t)/n(t)}this.stop(),t=util.extend({offset:[0,0],speed:1.2,curve:1.42,easing:util.ease},t);var r=this.transform,s=Point.convert(t.offset),a=this.getZoom(),h=this.getBearing(),u=&quot;center&quot;in t?LatLng.convert(t.center):this.getCenter(),f=&quot;zoom&quot;in t?+t.zoom:a,c=&quot;bearing&quot;in t?this._normalizeBearing(t.bearing,h):h,m=r.zoomScale(f-a),g=r.point,d=r.project(u).sub(s.div(m)),l=r.worldSize,p=t.curve,v=t.speed,b=Math.max(r.width,r.height),z=b/m,_=d.sub(g).mag(),L=p*p,M=i(0),x=function(t){return n(M)/n(M+p*t)},T=function(t){return b*((n(M)*o(M+p*t)-e(M))/L)/_},j=(i(1)-M)/p;if(Math.abs(_)&lt;1e-6){if(Math.abs(b-z)&lt;1e-6)return this;var B=b&gt;z?-1:1;j=Math.abs(Math.log(z/b))/p,T=function(){return 0},x=function(t){return Math.exp(B*p*t)}}return t.duration=1e3*j/v,this.zooming=!0,h!==c&amp;&amp;(this.rotating=!0),this.fire(&quot;movestart&quot;),this._ease(function(t){var i=t*j,e=T(i);r.zoom=a+r.scaleZoom(1/x(i)),r.center=r.unproject(g.add(d.sub(g).mult(e)),l),c!==h&amp;&amp;(r.bearing=interpolate(h,c,t)),this.fire(&quot;move&quot;).fire(&quot;zoom&quot;),c!==h&amp;&amp;this.fire(&quot;rotate&quot;)},function(){this.zooming=!1,this.rotating=!1,this.fire(&quot;moveend&quot;)},t),this},isEasing:function(){return!!this._abortFn},stop:function(){return this._abortFn&amp;&amp;(this._abortFn.call(this),this._finishEase()),this},_ease:function(t,i,e){this._finishFn=i,this._abortFn=browser.timed(function(i){t.call(this,e.easing(i)),1===i&amp;&amp;this._finishEase()},e.animate===!1?0:e.duration,this)},_finishEase:function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t.call(this)},_normalizeBearing:function(t,i){t=util.wrap(t,-180,180);var e=Math.abs(t-i);return Math.abs(t-360-i)&lt;e&amp;&amp;(t-=360),Math.abs(t+360-i)&lt;e&amp;&amp;(t+=360),t},_updateEasing:function(t,i,e){var n;if(this.ease){var o=this.ease,r=(Date.now()-o.start)/o.duration,s=o.easing(r+.01)-o.easing(r),a=.27/Math.sqrt(s*s+1e-4)*.01,h=Math.sqrt(.0729-a*a);n=util.bezier(a,h,.25,1)}else n=e?util.bezier.apply(util,e):util.ease;return this.ease={start:(new Date).getTime(),to:Math.pow(2,i),duration:t,easing:n},n}});
},{&quot;../geo/lat_lng&quot;:18,&quot;../geo/lat_lng_bounds&quot;:19,&quot;../util/browser&quot;:85,&quot;../util/interpolate&quot;:92,&quot;../util/util&quot;:96,&quot;point-geometry&quot;:118}],75:[function(require,module,exports){
    &quot;use strict&quot;;function Attribution(){}var Control=require(&quot;./control&quot;),DOM=require(&quot;../../util/dom&quot;),util=require(&quot;../../util/util&quot;);module.exports=Attribution,Attribution.prototype=util.inherit(Control,{options:{position:&quot;bottom-right&quot;},onAdd:function(t){var i=&quot;mapboxgl-ctrl-attrib&quot;,e=this._container=DOM.create(&quot;div&quot;,i,t.getContainer());return this._update(),t.on(&quot;source.load&quot;,this._update.bind(this)),t.on(&quot;source.change&quot;,this._update.bind(this)),t.on(&quot;source.remove&quot;,this._update.bind(this)),t.on(&quot;moveend&quot;,this._updateEditLink.bind(this)),e},_update:function(){var t=[];if(this._map.style)for(var i in this._map.style.sources){var e=this._map.style.sources[i];e.attribution&amp;&amp;t.indexOf(e.attribution)&lt;0&amp;&amp;t.push(e.attribution)}this._container.innerHTML=t.join(&quot; | &quot;),this._editLink=this._container.getElementsByClassName(&quot;mapbox-improve-map&quot;)[0],this._updateEditLink()},_updateEditLink:function(){if(this._editLink){var t=this._map.getCenter();this._editLink.href=&quot;https://www.mapbox.com/map-feedback/#/&quot;+t.lng+&quot;/&quot;+t.lat+&quot;/&quot;+Math.round(this._map.getZoom()+1)}}});
},{&quot;../../util/dom&quot;:88,&quot;../../util/util&quot;:96,&quot;./control&quot;:76}],76:[function(require,module,exports){
    &quot;use strict&quot;;function Control(){}module.exports=Control,Control.prototype={addTo:function(o){this._map=o;var t=this._container=this.onAdd(o);if(this.options&amp;&amp;this.options.position){var i=this.options.position,n=o._controlCorners[i];t.className+=&quot; mapboxgl-ctrl&quot;,-1!==i.indexOf(&quot;bottom&quot;)?n.insertBefore(t,n.firstChild):n.appendChild(t)}return this},remove:function(){return this._container.parentNode.removeChild(this._container),this.onRemove&amp;&amp;this.onRemove(this._map),this._map=null,this}};
},{}],77:[function(require,module,exports){
    &quot;use strict&quot;;function Navigation(t){util.setOptions(this,t)}var Control=require(&quot;./control&quot;),DOM=require(&quot;../../util/dom&quot;),util=require(&quot;../../util/util&quot;);module.exports=Navigation,Navigation.prototype=util.inherit(Control,{options:{position:&quot;top-right&quot;},onAdd:function(t){var o=&quot;mapboxgl-ctrl&quot;,e=this._container=DOM.create(&quot;div&quot;,o+&quot;-group&quot;,t.getContainer());this._zoomInButton=this._createButton(o+&quot;-icon &quot;+o+&quot;-zoom-in&quot;,t.zoomIn.bind(t)),this._zoomOutButton=this._createButton(o+&quot;-icon &quot;+o+&quot;-zoom-out&quot;,t.zoomOut.bind(t)),this._compass=this._createButton(o+&quot;-compass&quot;,t.resetNorth.bind(t));var s=this._compassCanvas=DOM.create(&quot;canvas&quot;,o+&quot;-compass-canvas&quot;,this._compass);return s.style.cssText=&quot;width:30px; height:30px;&quot;,s.width=52,s.height=52,this._compass.addEventListener(&quot;mousedown&quot;,this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),this._compassCtx=s.getContext(&quot;2d&quot;),t.on(&quot;rotate&quot;,this._drawNorth.bind(this)),this._drawNorth(),e},_onCompassDown:function(t){DOM.disableDrag(),document.addEventListener(&quot;mousemove&quot;,this._onCompassMove),document.addEventListener(&quot;mouseup&quot;,this._onCompassUp),this._prevX=t.screenX,t.stopPropagation()},_onCompassMove:function(t){var o=t.screenX,e=2&gt;o?-5:o&gt;window.screen.width-2?5:(o-this._prevX)/4;this._map.setBearing(this._map.getBearing()-e),this._prevX=t.screenX,this._moved=!0,t.preventDefault()},_onCompassUp:function(){document.removeEventListener(&quot;mousemove&quot;,this._onCompassMove),document.removeEventListener(&quot;mouseup&quot;,this._onCompassUp),DOM.enableDrag(),this._moved&amp;&amp;(this._moved=!1,DOM.suppressClick())},_createButton:function(t,o){var e=DOM.create(&quot;button&quot;,t,this._container);return e.addEventListener(&quot;click&quot;,function(){o()}),e},_drawNorth:function(){var t=20,o=8,e=26,s=this._map.transform.angle+Math.PI/2,i=this._compassCtx;this._compassCanvas.width=this._compassCanvas.width,i.translate(e,e),i.rotate(s),i.beginPath(),i.fillStyle=&quot;#000&quot;,i.lineTo(0,-o),i.lineTo(-t,0),i.lineTo(0,o),i.fill(),i.beginPath(),i.fillStyle=&quot;#bbb&quot;,i.moveTo(0,0),i.lineTo(0,o),i.lineTo(t,0),i.lineTo(0,-o),i.fill(),i.beginPath(),i.strokeStyle=&quot;#fff&quot;,i.lineWidth=4,i.moveTo(0,-o),i.lineTo(0,o),i.stroke()}});
},{&quot;../../util/dom&quot;:88,&quot;../../util/util&quot;:96,&quot;./control&quot;:76}],78:[function(require,module,exports){
    &quot;use strict&quot;;function Handlers(t){function e(){r&amp;&amp;(r.parentNode.removeChild(r),t.getContainer().classList.remove(&quot;mapboxgl-crosshair&quot;),r=!1,DOM.enableDrag())}var n,o,a,r,i=.2,s=util.bezier(0,0,i,1);this.interaction=new Interaction(t.getCanvas()).on(&quot;click&quot;,function(e){e.latLng=t.unproject(e.point),t.fire(&quot;click&quot;,e)}).on(&quot;dblclick&quot;,function(e){e.latLng=t.unproject(e.point),t.fire(&quot;dblclick&quot;,e)}).on(&quot;mousemove&quot;,function(e){e.latLng=t.unproject(e.point),t.fire(&quot;mousemove&quot;,e)}).on(&quot;down&quot;,function(){t.fire(&quot;movestart&quot;)}).on(&quot;resize&quot;,function(){t.stop(),t.resize(),t.update()}).on(&quot;keydown&quot;,function(e){function n(n){t.zoomTo(Math.round(t.getZoom())+(e.shiftKey?2:1)*n)}function o(e){t.panBy(e)}function a(e){t.setBearing(t.getBearing()+e)}if(!(e.altKey||e.ctrlKey||e.metaKey)){var r=80,i=2;switch(e.keyCode){case 61:case 107:case 171:case 187:n(1);break;case 189:case 109:case 173:n(-1);break;case 37:e.shiftKey?a(-i):o([-r,0]);break;case 39:e.shiftKey?a(i):o([r,0]);break;case 38:o([0,-r]);break;case 40:o([0,r]);break;default:return}}}).on(&quot;pan&quot;,function(e){t.stop();var n=t.transform.pointLocation(e.point.add(e.offset));t.transform.setLocationAtPoint(n,e.point),t.fire(&quot;move&quot;)}).on(&quot;panend&quot;,function(e){if(e.inertia){var n=e.inertia.mult(1e3*i),o=n.mag(),a=4e3;o&gt;=a&amp;&amp;(o=a,n._unit()._mult(a));var r=8e3,c=o/(r*i),u=n.mult(-c/2).round();t.panBy(u,{duration:1e3*c,easing:s,noMoveStart:!0})}else t.fire(&quot;moveend&quot;)}).on(&quot;zoom&quot;,function(e){var n=2/(1+Math.exp(-Math.abs(e.delta/100)));e.delta&lt;0&amp;&amp;0!==n&amp;&amp;(n=1/n);var o=t.ease&amp;&amp;isFinite(e.delta)?t.ease.to:t.transform.scale,a=isFinite(e.delta)?0:800,r=t.transform.scaleZoom(o*n);t.zoomTo(r,{duration:a,around:t.unproject(e.point)})}).on(&quot;pinchstart&quot;,function(){o=t.transform.scale,a=t.transform.bearing}).on(&quot;pinch&quot;,function(e){t.easeTo({zoom:t.transform.scaleZoom(o*e.scale),bearing:a+e.bearing,duration:0,around:t.unproject(e.point)})}).on(&quot;rotate&quot;,function(e){var o=t.transform.centerPoint,a=e.start.sub(o),r=a.mag();t.rotating=!0,200&gt;r&amp;&amp;(o=e.start.add(new Point(-200,0)._rotate(a.angle())));var i=e.prev.sub(o).angleWith(e.current.sub(o))/Math.PI*180;t.transform.bearing=t.getBearing()-i,t.fire(&quot;move&quot;).fire(&quot;rotate&quot;),window.clearTimeout(n),n=window.setTimeout(function(){t.rotating=!1,t._rerender()},200)}).on(&quot;boxzoomstart&quot;,function(e){r||(r=DOM.create(&quot;div&quot;,&quot;mapboxgl-boxzoom&quot;,t.getContainer()),t.getContainer().classList.add(&quot;mapboxgl-crosshair&quot;),t.fire(&quot;boxzoomstart&quot;),DOM.disableDrag());var n=Math.min(e.start.x,e.current.x),o=Math.max(e.start.x,e.current.x),a=Math.min(e.start.y,e.current.y),i=Math.max(e.start.y,e.current.y);DOM.setTransform(r,&quot;translate(&quot;+n+&quot;px,&quot;+a+&quot;px)&quot;),r.style.width=o-n+&quot;px&quot;,r.style.height=i-a+&quot;px&quot;}).on(&quot;boxzoomend&quot;,function(n){e();var o=new LatLngBounds(t.unproject(n.start),t.unproject(n.current));t.fitBounds(o,{linear:!0}).fire(&quot;boxzoomend&quot;,{boxZoomBounds:o})}).on(&quot;boxzoomcancel&quot;,e)}var Interaction=require(&quot;./interaction&quot;),Point=require(&quot;point-geometry&quot;),util=require(&quot;../util/util&quot;),DOM=require(&quot;../util/dom&quot;),LatLngBounds=require(&quot;../geo/lat_lng_bounds&quot;);module.exports=Handlers;
},{&quot;../geo/lat_lng_bounds&quot;:19,&quot;../util/dom&quot;:88,&quot;../util/util&quot;:96,&quot;./interaction&quot;:80,&quot;point-geometry&quot;:118}],79:[function(require,module,exports){
    &quot;use strict&quot;;function Hash(){util.bindAll([&quot;_onHashChange&quot;,&quot;_updateHash&quot;],this)}module.exports=Hash;var util=require(&quot;../util/util&quot;);Hash.prototype={addTo:function(t){return this._map=t,window.addEventListener(&quot;hashchange&quot;,this._onHashChange,!1),this._map.on(&quot;moveend&quot;,this._updateHash),this},remove:function(){return window.removeEventListener(&quot;hashchange&quot;,this._onHashChange,!1),this._map.off(&quot;moveend&quot;,this._updateHash),delete this._map,this},_onHashChange:function(){var t=location.hash.replace(&quot;#&quot;,&quot;&quot;).split(&quot;/&quot;);return t.length&gt;=3?(this._map.jumpTo({center:[+t[1],+t[2]],zoom:+t[0],bearing:+(t[3]||0)}),!0):!1},_updateHash:function(){var t=this._map.getCenter(),e=this._map.getZoom(),a=this._map.getBearing(),h=Math.max(0,Math.ceil(Math.log(e)/Math.LN2)),n=&quot;#&quot;+Math.round(100*e)/100+&quot;/&quot;+t.lat.toFixed(h)+&quot;/&quot;+t.lng.toFixed(h)+(a?&quot;/&quot;+Math.round(10*a)/10:&quot;&quot;);window.history.replaceState(&quot;&quot;,&quot;&quot;,n)}};
},{&quot;../util/util&quot;:96}],80:[function(require,module,exports){
    &quot;use strict&quot;;function Interaction(e){function t(t){var n=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)}function n(e,t,n){g.fire(&quot;zoom&quot;,{source:e,delta:t,point:n}),M=null,L=null}function i(e,t){g.fire(&quot;click&quot;,{point:e,originalEvent:t})}function o(e,t,n){g.fire(&quot;pinch&quot;,{scale:e,bearing:t,point:n}),M=null,L=null}function r(e,t){g.fire(&quot;mousemove&quot;,{point:e,originalEvent:t})}function u(e){if(x){var t=x.sub(e);if(g.fire(&quot;pan&quot;,{offset:t,point:e}),M){var n=Date.now()-L;if(n){var i=n+L;for(M.push([i,e]);M.length&gt;2&amp;&amp;i-M[0][0]&gt;100;)M.shift()}}else M=[];L=Date.now(),x=e}}function l(){g.fire(&quot;resize&quot;)}function a(e){y&amp;&amp;27===e.keyCode&amp;&amp;(g.fire(&quot;boxzoomcancel&quot;),y=!1),g.fire(&quot;keydown&quot;,e)}function c(e){x&amp;&amp;(g.fire(&quot;rotate&quot;,{start:k,prev:x,current:e}),x=e)}function s(e,t){g.fire(&quot;dblclick&quot;,{point:e,originalEvent:t})}function f(e){k=x=t(e),g.fire(&quot;down&quot;),(e.shiftKey||1===e.which&amp;&amp;1===e.button)&amp;&amp;(y=!0)}function d(e){if(D=x&amp;&amp;k&amp;&amp;(x.x!==k.x||x.y!==k.y),b=!1,x=null,y)g.fire(&quot;boxzoomend&quot;,{start:k,current:t(e)}),y=!1;else if(M&amp;&amp;M.length&gt;=2&amp;&amp;L&gt;Date.now()-100){var n=M[M.length-1],i=M[0],o=n[1].sub(i[1]).div(n[0]-i[0]);g.fire(&quot;panend&quot;,{inertia:o})}else x&amp;&amp;g.fire(&quot;panend&quot;);M=null,L=null}function v(n){var i=t(n);if(y)g.fire(&quot;boxzoomstart&quot;,{start:k,current:i});else if(b)c(i);else if(x)u(i);else{for(var o=n.toElement||n.target;o&amp;&amp;o!==e&amp;&amp;o.parentNode;)o=o.parentNode;o===e&amp;&amp;r(i,n)}}function h(e){D||i(t(e),e)}function p(e){s(t(e),e),n(&quot;wheel&quot;,1/0*(e.shiftKey?-1:1),t(e)),e.preventDefault()}function m(e){1===e.touches.length?(f(e),z?(clearTimeout(z),z=null,p(e)):z=setTimeout(function(){z=null},300)):2===e.touches.length&amp;&amp;(T=t(e.touches[0]).sub(t(e.touches[1])),g.fire(&quot;pinchstart&quot;))}function w(e){if(1===e.touches.length)v(e);else if(2===e.touches.length){var n=t(e.touches[0]),i=t(e.touches[1]),r=n.add(i).div(2),u=n.sub(i),l=u.mag()/T.mag(),a=180*u.angleWith(T)/Math.PI;o(l,a,r)}e.preventDefault()}function E(n){function i(e,i){var o=a.now(),r=o-c;c=o;var u=t(i);0!==e&amp;&amp;e%4.000244140625===0?(s=&quot;wheel&quot;,e=Math.floor(e/4)):0!==e&amp;&amp;Math.abs(e)&lt;4?s=&quot;trackpad&quot;:r&gt;400?(s=null,d=e,f=setTimeout(function(){s=&quot;wheel&quot;,n(s,-d,u)},40)):null===s&amp;&amp;(s=Math.abs(r*e)&lt;200?&quot;trackpad&quot;:&quot;wheel&quot;,f&amp;&amp;(clearTimeout(f),f=null,e+=d)),i.shiftKey&amp;&amp;e&amp;&amp;(e/=4),null!==s&amp;&amp;n(s,-e,u)}function o(e){var t=e.deltaY;u&amp;&amp;e.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&amp;&amp;(t/=browser.devicePixelRatio),e.deltaMode===window.WheelEvent.DOM_DELTA_LINE&amp;&amp;(t*=40),i(t,e),e.preventDefault()}function r(e){var t=-e.wheelDeltaY;l&amp;&amp;(t/=3),i(t,e),e.preventDefault()}var u=/Firefox/i.test(navigator.userAgent),l=/Safari/i.test(navigator.userAgent)&amp;&amp;!/Chrom(ium|e)/i.test(navigator.userAgent),a=window.performance||Date;e.addEventListener(&quot;wheel&quot;,o,!1),e.addEventListener(&quot;mousewheel&quot;,r,!1);var c=0,s=null,f=null,d=null}var g=this;if(e){var L,b=!1,D=!1,y=!1,k=null,x=null,M=null;e.addEventListener(&quot;contextmenu&quot;,function(e){b=!0,k=x=t(e),e.preventDefault()},!1),e.addEventListener(&quot;mousedown&quot;,f,!1),e.addEventListener(&quot;touchstart&quot;,m,!1),document.addEventListener(&quot;mouseup&quot;,d,!1),document.addEventListener(&quot;touchend&quot;,d,!1),document.addEventListener(&quot;mousemove&quot;,v,!1),document.addEventListener(&quot;touchmove&quot;,w,!1),e.addEventListener(&quot;click&quot;,h,!1),E(n),e.addEventListener(&quot;dblclick&quot;,p,!1),window.addEventListener(&quot;resize&quot;,l,!1),e.addEventListener(&quot;keydown&quot;,a,!1);var T,z}}var Evented=require(&quot;../util/evented&quot;),browser=require(&quot;../util/browser&quot;),Point=require(&quot;point-geometry&quot;);module.exports=Interaction,Interaction.prototype=Object.create(Evented);
},{&quot;../util/browser&quot;:85,&quot;../util/evented&quot;:90,&quot;point-geometry&quot;:118}],81:[function(require,module,exports){
    &quot;use strict&quot;;var Canvas=require(&quot;../util/canvas&quot;),util=require(&quot;../util/util&quot;),browser=require(&quot;../util/browser&quot;),Evented=require(&quot;../util/evented&quot;),DOM=require(&quot;../util/dom&quot;),Style=require(&quot;../style/style&quot;),AnimationLoop=require(&quot;../style/animation_loop&quot;),Painter=require(&quot;../render/painter&quot;),Transform=require(&quot;../geo/transform&quot;),Hash=require(&quot;./hash&quot;),Handlers=require(&quot;./handlers&quot;),Camera=require(&quot;./camera&quot;),LatLng=require(&quot;../geo/lat_lng&quot;),LatLngBounds=require(&quot;../geo/lat_lng_bounds&quot;),Point=require(&quot;point-geometry&quot;),Attribution=require(&quot;./control/attribution&quot;),Map=module.exports=function(t){if(t=this.options=util.inherit(this.options,t),this.animationLoop=new AnimationLoop,this.transform=new Transform(t.minZoom,t.maxZoom),t.maxBounds){var e=LatLngBounds.convert(t.maxBounds);this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform.lngRange=[e.getWest(),e.getEast()]}util.bindAll([&quot;_forwardStyleEvent&quot;,&quot;_forwardSourceEvent&quot;,&quot;_forwardLayerEvent&quot;,&quot;_forwardTileEvent&quot;,&quot;_onStyleLoad&quot;,&quot;_onStyleChange&quot;,&quot;_onSourceAdd&quot;,&quot;_onSourceRemove&quot;,&quot;_onSourceUpdate&quot;,&quot;update&quot;,&quot;render&quot;],this),this._setupContainer(),this._setupPainter(),this.on(&quot;move&quot;,this.update),this.on(&quot;zoom&quot;,this.update.bind(this,!0)),this.on(&quot;moveend&quot;,function(){this.animationLoop.set(300),this._rerender()}.bind(this)),this.handlers=t.interactive&amp;&amp;new Handlers(this),this._hash=t.hash&amp;&amp;(new Hash).addTo(this),this._hash&amp;&amp;this._hash._onHashChange()||this.jumpTo(t),this.sources={},this.stacks={},this._classes={},this.resize(),t.classes&amp;&amp;this.setClasses(t.classes),t.style&amp;&amp;this.setStyle(t.style),t.attributionControl&amp;&amp;this.addControl(new Attribution)};util.extend(Map.prototype,Evented),util.extend(Map.prototype,Camera.prototype),util.extend(Map.prototype,{options:{center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:20,interactive:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1},addControl:function(t){return t.addTo(this),this},addClass:function(t,e){this._classes[t]||(this._classes[t]=!0,this.style&amp;&amp;this.style._cascade(this._classes,e))},removeClass:function(t,e){this._classes[t]&amp;&amp;(delete this._classes[t],this.style&amp;&amp;this.style._cascade(this._classes,e))},setClasses:function(t,e){this._classes={};for(var s=0;s&lt;t.length;s++)this._classes[t[s]]=!0;this.style&amp;&amp;this.style._cascade(this._classes,e)},hasClass:function(t){return!!this._classes[t]},getClasses:function(){return Object.keys(this._classes)},resize:function(){var t=0,e=0;return this._container&amp;&amp;(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),this._canvas.resize(t,e),this.transform.width=t,this.transform.height=e,this.transform._constrain(),this.painter.resize(t,e),this.fire(&quot;movestart&quot;).fire(&quot;move&quot;).fire(&quot;resize&quot;).fire(&quot;moveend&quot;)},getBounds:function(){return new LatLngBounds(this.transform.pointLocation(new Point(0,0)),this.transform.pointLocation(this.transform.size))},project:function(t){return this.transform.locationPoint(LatLng.convert(t))},unproject:function(t){return this.transform.pointLocation(Point.convert(t))},featuresAt:function(t,e,s){var i=this.transform.pointCoordinate(Point.convert(t));return this.style.featuresAt(i,e,s),this},setStyle:function(t){return this.style&amp;&amp;(this.style.off(&quot;load&quot;,this._onStyleLoad).off(&quot;error&quot;,this._forwardStyleEvent).off(&quot;change&quot;,this._onStyleChange).off(&quot;source.add&quot;,this._onSourceAdd).off(&quot;source.remove&quot;,this._onSourceRemove).off(&quot;source.load&quot;,this._onSourceUpdate).off(&quot;source.error&quot;,this._forwardSourceEvent).off(&quot;source.change&quot;,this._onSourceUpdate).off(&quot;layer.add&quot;,this._forwardLayerEvent).off(&quot;layer.remove&quot;,this._forwardLayerEvent).off(&quot;tile.add&quot;,this._forwardTileEvent).off(&quot;tile.remove&quot;,this._forwardTileEvent).off(&quot;tile.load&quot;,this.update).off(&quot;tile.error&quot;,this._forwardTileEvent)._remove(),this.off(&quot;rotate&quot;,this.style._redoPlacement),this.off(&quot;pitch&quot;,this.style._redoPlacement)),t?(this.style=t instanceof Style?t:new Style(t,this.animationLoop),this.style.on(&quot;load&quot;,this._onStyleLoad).on(&quot;error&quot;,this._forwardStyleEvent).on(&quot;change&quot;,this._onStyleChange).on(&quot;source.add&quot;,this._onSourceAdd).on(&quot;source.remove&quot;,this._onSourceRemove).on(&quot;source.load&quot;,this._onSourceUpdate).on(&quot;source.error&quot;,this._forwardSourceEvent).on(&quot;source.change&quot;,this._onSourceUpdate).on(&quot;layer.add&quot;,this._forwardLayerEvent).on(&quot;layer.remove&quot;,this._forwardLayerEvent).on(&quot;tile.add&quot;,this._forwardTileEvent).on(&quot;tile.remove&quot;,this._forwardTileEvent).on(&quot;tile.load&quot;,this.update).on(&quot;tile.error&quot;,this._forwardTileEvent),this.on(&quot;rotate&quot;,this.style._redoPlacement),this.on(&quot;pitch&quot;,this.style._redoPlacement),this):(this.style=null,this)},addSource:function(t,e){return this.style.addSource(t,e),this},removeSource:function(t){return this.style.removeSource(t),this},getSource:function(t){return this.style.getSource(t)},addLayer:function(t,e){return this.style.addLayer(t,e),this.style._cascade(this._classes),this},removeLayer:function(t){return this.style.removeLayer(t),this.style._cascade(this._classes),this},setFilter:function(t,e){return this.style.setFilter(t,e),this},getFilter:function(t){return this.style.getFilter(t)},setPaintProperty:function(t,e,s,i){return this.style.setPaintProperty(t,e,s,i),this.style._cascade(this._classes),this.update(!0),this},getPaintProperty:function(t,e,s){return this.style.getPaintProperty(t,e,s)},setLayoutProperty:function(t,e,s){return this.style.setLayoutProperty(t,e,s),this},getLayoutProperty:function(t,e){return this.style.getLayoutProperty(t,e)},getContainer:function(){return this._container},getCanvasContainer:function(){return this._canvasContainer},getCanvas:function(){return this._canvas.getElement()},_setupContainer:function(){var t=this.options.container,e=this._container=&quot;string&quot;==typeof t?document.getElementById(t):t;e.classList.add(&quot;mapboxgl-map&quot;);var s=this._canvasContainer=DOM.create(&quot;div&quot;,&quot;mapboxgl-canvas-container&quot;,e);this.options.interactive&amp;&amp;s.classList.add(&quot;mapboxgl-interactive&quot;),this._canvas=new Canvas(this,s);var i=DOM.create(&quot;div&quot;,&quot;mapboxgl-control-container&quot;,e),r=this._controlCorners={};[&quot;top-left&quot;,&quot;top-right&quot;,&quot;bottom-left&quot;,&quot;bottom-right&quot;].forEach(function(t){r[t]=DOM.create(&quot;div&quot;,&quot;mapboxgl-ctrl-&quot;+t,i)})},_setupPainter:function(){var t=this._canvas.getWebGLContext({failIfMajorPerformanceCaveat:this.options.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.options.preserveDrawingBuffer});return t?void(this.painter=new Painter(t,this.transform)):void console.error(&quot;Failed to initialize WebGL&quot;)},_contextLost:function(t){t.preventDefault(),this._frameId&amp;&amp;browser.cancelFrame(this._frameId)},_contextRestored:function(){this._setupPainter(),this.resize(),this.update()},loaded:function(){return this._styleDirty||this._sourcesDirty?!1:this.style&amp;&amp;!this.style.loaded()?!1:!0},update:function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},render:function(){return this.style&amp;&amp;this._styleDirty&amp;&amp;(this._styleDirty=!1,this.style._recalculate(this.transform.zoom)),this.style&amp;&amp;this._sourcesDirty&amp;&amp;!this._sourcesDirtyTimeout&amp;&amp;(this._sourcesDirty=!1,this._sourcesDirtyTimeout=setTimeout(function(){this._sourcesDirtyTimeout=null}.bind(this),50),this.style._updateSources(this.transform)),this.painter.render(this.style,{debug:this.debug,vertices:this.vertices,rotating:this.rotating,zooming:this.zooming}),this.fire(&quot;render&quot;),this.loaded()&amp;&amp;!this._loaded&amp;&amp;(this._loaded=!0,this.fire(&quot;load&quot;)),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||!this.animationLoop.stopped())&amp;&amp;this._rerender(),this},remove:function(){return this._hash&amp;&amp;this._hash.remove(),browser.cancelFrame(this._frameId),clearTimeout(this._sourcesDirtyTimeout),this.setStyle(null),this},_rerender:function(){this.style&amp;&amp;!this._frameId&amp;&amp;(this._frameId=browser.frame(this.render))},_forwardStyleEvent:function(t){this.fire(&quot;style.&quot;+t.type,util.extend({style:t.target},t))},_forwardSourceEvent:function(t){this.fire(t.type,util.extend({style:t.target},t))},_forwardLayerEvent:function(t){this.fire(t.type,util.extend({style:t.target},t))},_forwardTileEvent:function(t){this.fire(t.type,util.extend({style:t.target},t))},_onStyleLoad:function(t){this.style._cascade(this._classes,{transition:!1}),this._forwardStyleEvent(t)},_onStyleChange:function(t){this.update(!0),this._forwardStyleEvent(t)},_onSourceAdd:function(t){var e=t.source;e.onAdd&amp;&amp;e.onAdd(this),this._forwardSourceEvent(t)},_onSourceRemove:function(t){var e=t.source;e.onRemove&amp;&amp;e.onRemove(this),this._forwardSourceEvent(t)},_onSourceUpdate:function(t){this.update(),this._forwardSourceEvent(t)}}),util.extendAll(Map.prototype,{_debug:!1,get debug(){return this._debug},set debug(t){this._debug=t,this.update()},_collisionDebug:!1,get collisionDebug(){return this._collisionDebug},set collisionDebug(t){this._collisionDebug=t;for(var e in this.style.sources)this.style.sources[e].reload();this.update()},_repaint:!1,get repaint(){return this._repaint},set repaint(t){this._repaint=t,this.update()},_vertices:!1,get vertices(){return this._vertices},set vertices(t){this._vertices=t,this.update()}});
},{&quot;../geo/lat_lng&quot;:18,&quot;../geo/lat_lng_bounds&quot;:19,&quot;../geo/transform&quot;:20,&quot;../render/painter&quot;:34,&quot;../style/animation_loop&quot;:47,&quot;../style/style&quot;:52,&quot;../util/browser&quot;:85,&quot;../util/canvas&quot;:86,&quot;../util/dom&quot;:88,&quot;../util/evented&quot;:90,&quot;../util/util&quot;:96,&quot;./camera&quot;:74,&quot;./control/attribution&quot;:75,&quot;./handlers&quot;:78,&quot;./hash&quot;:79,&quot;point-geometry&quot;:118}],82:[function(require,module,exports){
    &quot;use strict&quot;;function Popup(t){util.setOptions(this,t),util.bindAll([&quot;_updatePosition&quot;,&quot;_onClickClose&quot;],this)}module.exports=Popup;var util=require(&quot;../util/util&quot;),Evented=require(&quot;../util/evented&quot;),DOM=require(&quot;../util/dom&quot;),LatLng=require(&quot;../geo/lat_lng&quot;);Popup.prototype=util.inherit(Evented,{options:{closeButton:!0,closeOnClick:!0},addTo:function(t){return this._map=t,this._map.on(&quot;move&quot;,this._updatePosition),this.options.closeOnClick&amp;&amp;this._map.on(&quot;click&quot;,this._onClickClose),this._update(),this},remove:function(){return this._container&amp;&amp;this._container.parentNode.removeChild(this._container),this._map&amp;&amp;(this._map.off(&quot;move&quot;,this._updatePosition),this._map.off(&quot;click&quot;,this._onClickClose),delete this._map),this},getLatLng:function(){return this._latLng},setLatLng:function(t){return this._latLng=LatLng.convert(t),this._update(),this},setText:function(t){return this._content=document.createTextNode(t),this._updateContent(),this},setHTML:function(t){this._content=document.createDocumentFragment();var i,e=document.createElement(&quot;body&quot;);for(e.innerHTML=t;;){if(i=e.firstChild,!i)break;this._content.appendChild(i)}return this._updateContent(),this},_update:function(){this._map&amp;&amp;(this._container||(this._container=DOM.create(&quot;div&quot;,&quot;mapboxgl-popup&quot;,this._map.getContainer()),this._tip=DOM.create(&quot;div&quot;,&quot;mapboxgl-popup-tip&quot;,this._container),this._wrapper=DOM.create(&quot;div&quot;,&quot;mapboxgl-popup-content&quot;,this._container),this.options.closeButton&amp;&amp;(this._closeButton=DOM.create(&quot;button&quot;,&quot;mapboxgl-popup-close-button&quot;,this._wrapper),this._closeButton.innerHTML=&quot;&amp;#215;&quot;,this._closeButton.addEventListener(&quot;click&quot;,this._onClickClose))),this._updateContent(),this._updatePosition())},_updateContent:function(){if(this._content&amp;&amp;this._container){for(var t=this._wrapper;t.hasChildNodes();)t.removeChild(t.firstChild);this.options.closeButton&amp;&amp;t.appendChild(this._closeButton),t.appendChild(this._content)}},_updatePosition:function(){if(this._latLng&amp;&amp;this._container){var t=this._map.project(this._latLng).round(),i=this.options.anchor;if(!i){var e=this._container.offsetWidth,o=this._container.offsetHeight;i=t.y&lt;o?[&quot;top&quot;]:t.y&gt;this._map.transform.height-o?[&quot;bottom&quot;]:[],t.x&lt;e/2?i.push(&quot;left&quot;):t.x&gt;this._map.transform.width-e/2&amp;&amp;i.push(&quot;right&quot;),i=0===i.length?&quot;bottom&quot;:i.join(&quot;-&quot;),this.options.anchor=i}var n={top:&quot;translate(-50%,0)&quot;,&quot;top-left&quot;:&quot;translate(0,0)&quot;,&quot;top-right&quot;:&quot;translate(-100%,0)&quot;,bottom:&quot;translate(-50%,-100%)&quot;,&quot;bottom-left&quot;:&quot;translate(0,-100%)&quot;,&quot;bottom-right&quot;:&quot;translate(-100%,-100%)&quot;,left:&quot;translate(0,-50%)&quot;,right:&quot;translate(-100%,-50%)&quot;},s=this._container.classList;for(var a in n)s.remove(&quot;mapboxgl-popup-anchor-&quot;+a);s.add(&quot;mapboxgl-popup-anchor-&quot;+i),DOM.setTransform(this._container,n[i]+&quot; translate(&quot;+t.x+&quot;px,&quot;+t.y+&quot;px)&quot;)}},_onClickClose:function(){this.remove()}});
},{&quot;../geo/lat_lng&quot;:18,&quot;../util/dom&quot;:88,&quot;../util/evented&quot;:90,&quot;../util/util&quot;:96}],83:[function(require,module,exports){
    &quot;use strict&quot;;function Actor(t,e){this.target=t,this.parent=e,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener(&quot;message&quot;,this.receive,!1)}module.exports=Actor,Actor.prototype.receive=function(t){var e,s=t.data;if(&quot;&lt;response&gt;&quot;===s.type)e=this.callbacks[s.id],delete this.callbacks[s.id],e(s.error||null,s.data);else if(&quot;undefined&quot;!=typeof s.id){var i=s.id;this.parent[s.type](s.data,function(t,e,s){this.postMessage({type:&quot;&lt;response&gt;&quot;,id:String(i),error:t?String(t):null,data:e},s)}.bind(this))}else this.parent[s.type](s.data)},Actor.prototype.send=function(t,e,s,i){var a=null;s&amp;&amp;(this.callbacks[a=this.callbackID++]=s),this.postMessage({type:t,id:String(a),data:e},i)},Actor.prototype.postMessage=function(t,e){try{this.target.postMessage(t,e)}catch(s){this.target.postMessage(t)}};
},{}],84:[function(require,module,exports){
    &quot;use strict&quot;;function sameOrigin(e){var t=document.createElement(&quot;a&quot;);return t.href=e,t.protocol===document.location.protocol&amp;&amp;t.host===document.location.host}exports.getJSON=function(e,t){var n=new XMLHttpRequest;return n.open(&quot;GET&quot;,e,!0),n.onerror=function(e){t(e)},n.onload=function(){if(n.status&gt;=200&amp;&amp;n.status&lt;300&amp;&amp;n.response){var e;try{e=JSON.parse(n.response)}catch(r){return t(r)}t(null,e)}else t(new Error(n.statusText))},n.send(),n},exports.getArrayBuffer=function(e,t){var n=new XMLHttpRequest;return n.open(&quot;GET&quot;,e,!0),n.responseType=&quot;arraybuffer&quot;,n.onerror=function(e){t(e)},n.onload=function(){n.status&gt;=200&amp;&amp;n.status&lt;300&amp;&amp;n.response?t(null,n.response):t(new Error(n.statusText))},n.send(),n},exports.getImage=function(e,t){var n=new Image;return sameOrigin(e)||(n.crossOrigin=&quot;Anonymous&quot;),n.onload=function(){t(null,n)},n.src=e,n.getData=function(){var e=document.createElement(&quot;canvas&quot;),t=e.getContext(&quot;2d&quot;);return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height).data},n},exports.getVideo=function(e,t){var n=document.createElement(&quot;video&quot;);n.onloadstart=function(){t(null,n)};for(var r=0;r&lt;e.length;r++){var o=document.createElement(&quot;source&quot;);sameOrigin(e[r])||(n.crossOrigin=&quot;Anonymous&quot;),o.src=e[r],n.appendChild(o)}return n.getData=function(){return n},n};
},{}],85:[function(require,module,exports){
    &quot;use strict&quot;;var Canvas=require(&quot;./canvas&quot;),frame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;exports.frame=function(e){return frame(e)};var cancel=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;exports.cancelFrame=function(e){cancel(e)},exports.timed=function(e,r,t){function n(a){o||(window.performance||(a=Date.now()),a&gt;=i+r?e.call(t,1):(e.call(t,(a-i)/r),exports.frame(n)))}if(!r)return e.call(t,1),null;var o=!1,i=window.performance?window.performance.now():Date.now();return exports.frame(n),function(){o=!0}},exports.supported=function(e){for(var r=([function(){return&quot;undefined&quot;!=typeof window},function(){return&quot;undefined&quot;!=typeof document},function(){return!!(Array.prototype&amp;&amp;Array.prototype.every&amp;&amp;Array.prototype.filter&amp;&amp;Array.prototype.forEach&amp;&amp;Array.prototype.indexOf&amp;&amp;Array.prototype.lastIndexOf&amp;&amp;Array.prototype.map&amp;&amp;Array.prototype.some&amp;&amp;Array.prototype.reduce&amp;&amp;Array.prototype.reduceRight&amp;&amp;Array.isArray)},function(){return!(!Function.prototype||!Function.prototype.bind||!(Object.keys&amp;&amp;Object.create&amp;&amp;Object.getPrototypeOf&amp;&amp;Object.getOwnPropertyNames&amp;&amp;Object.isSealed&amp;&amp;Object.isFrozen&amp;&amp;Object.isExtensible&amp;&amp;Object.getOwnPropertyDescriptor&amp;&amp;Object.defineProperty&amp;&amp;Object.defineProperties&amp;&amp;Object.seal&amp;&amp;Object.freeze&amp;&amp;Object.preventExtensions))},function(){return&quot;JSON&quot;in window&amp;&amp;&quot;parse&quot;in JSON&amp;&amp;&quot;stringify&quot;in JSON},function(){return(new Canvas).supportsWebGLContext(e&amp;&amp;e.failIfMajorPerformanceCaveat||!1)},function(){return&quot;Worker&quot;in window}]),t=0;t&lt;r.length;t++)if(!r[t]())return!1;return!0},exports.hardwareConcurrency=navigator.hardwareConcurrency||8,Object.defineProperty(exports,&quot;devicePixelRatio&quot;,{get:function(){return window.devicePixelRatio}});
},{&quot;./canvas&quot;:86}],86:[function(require,module,exports){
    &quot;use strict&quot;;function Canvas(t,e){this.canvas=document.createElement(&quot;canvas&quot;),t&amp;&amp;e&amp;&amp;(this.canvas.style.position=&quot;absolute&quot;,this.canvas.classList.add(&quot;mapboxgl-canvas&quot;),this.canvas.addEventListener(&quot;webglcontextlost&quot;,t._contextLost.bind(t),!1),this.canvas.addEventListener(&quot;webglcontextrestored&quot;,t._contextRestored.bind(t),!1),this.canvas.setAttribute(&quot;tabindex&quot;,0),e.appendChild(this.canvas))}var util=require(&quot;../util&quot;);module.exports=Canvas,Canvas.prototype.resize=function(t,e){var a=window.devicePixelRatio||1;this.canvas.width=a*t,this.canvas.height=a*e,this.canvas.style.width=t+&quot;px&quot;,this.canvas.style.height=e+&quot;px&quot;};var requiredContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!1};Canvas.prototype.getWebGLContext=function(t){return t=util.extend({},t,requiredContextAttributes),this.canvas.getContext(&quot;webgl&quot;,t)||this.canvas.getContext(&quot;experimental-webgl&quot;,t)},Canvas.prototype.supportsWebGLContext=function(t){var e=util.extend({failIfMajorPerformanceCaveat:t},requiredContextAttributes);return&quot;probablySupportsContext&quot;in this.canvas?this.canvas.probablySupportsContext(&quot;webgl&quot;,e)||this.canvas.probablySupportsContext(&quot;experimental-webgl&quot;,e):&quot;supportsContext&quot;in this.canvas?this.canvas.supportsContext(&quot;webgl&quot;,e)||this.canvas.supportsContext(&quot;experimental-webgl&quot;,e):!!window.WebGLRenderingContext&amp;&amp;!!this.getWebGLContext(t)},Canvas.prototype.getElement=function(){return this.canvas};
},{&quot;../util&quot;:96}],87:[function(require,module,exports){
    &quot;use strict&quot;;function Dispatcher(r,t){this.actors=[],this.currentActor=0;for(var e=0;r&gt;e;e++){var o=new WebWorkify(require(&quot;../../source/worker&quot;)),s=new Actor(o,t);s.name=&quot;Worker &quot;+e,this.actors.push(s)}}var Actor=require(&quot;../actor&quot;),WebWorkify=require(&quot;webworkify&quot;);module.exports=Dispatcher,Dispatcher.prototype={broadcast:function(r,t){for(var e=0;e&lt;this.actors.length;e++)this.actors[e].send(r,t)},send:function(r,t,e,o,s){return(&quot;number&quot;!=typeof o||isNaN(o))&amp;&amp;(o=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[o].send(r,t,e,s),o},remove:function(){for(var r=0;r&lt;this.actors.length;r++)this.actors[r].target.terminate();this.actors=[]}};
},{&quot;../../source/worker&quot;:45,&quot;../actor&quot;:83,&quot;webworkify&quot;:126}],88:[function(require,module,exports){
    &quot;use strict&quot;;function testProp(e){for(var t=0;t&lt;e.length;t++)if(e[t]in docStyle)return e[t]}function suppressClick(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener(&quot;click&quot;,suppressClick,!0)}exports.create=function(e,t,r){var s=document.createElement(e);return t&amp;&amp;(s.className=t),r&amp;&amp;r.appendChild(s),s};var docStyle=document.documentElement.style,selectProp=testProp([&quot;userSelect&quot;,&quot;MozUserSelect&quot;,&quot;WebkitUserSelect&quot;,&quot;msUserSelect&quot;]),userSelect;exports.disableDrag=function(){selectProp&amp;&amp;(userSelect=docStyle[selectProp],docStyle[selectProp]=&quot;none&quot;)},exports.enableDrag=function(){selectProp&amp;&amp;(docStyle[selectProp]=userSelect)};var transformProp=testProp([&quot;transform&quot;,&quot;WebkitTransform&quot;]);exports.setTransform=function(e,t){e.style[transformProp]=t},exports.suppressClick=function(){window.addEventListener(&quot;click&quot;,suppressClick,!0),window.setTimeout(function(){window.removeEventListener(&quot;click&quot;,suppressClick,!0)},0)};
},{}],89:[function(require,module,exports){
    &quot;use strict&quot;;module.exports={HTTP_URL:&quot;http://a.tiles.mapbox.com&quot;,HTTPS_URL:&quot;https://a.tiles.mapbox.com&quot;,FORCE_HTTPS:!0,REQUIRE_ACCESS_TOKEN:!0};
},{}],90:[function(require,module,exports){
    &quot;use strict&quot;;var util=require(&quot;./util&quot;),Evented={on:function(t,e){return this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e),this},off:function(t,e){if(!t)return delete this._events,this;if(!this.listens(t))return this;if(e){var s=this._events[t].indexOf(e);s&gt;=0&amp;&amp;this._events[t].splice(s,1),this._events[t].length||delete this._events[t]}else delete this._events[t];return this},once:function(t,e){var s=function(i){this.off(t,s),e.call(this,i)}.bind(this);return this.on(t,s),this},fire:function(t,e){if(!this.listens(t))return this;e=util.extend({},e),util.extend(e,{type:t,target:this});for(var s=this._events[t].slice(),i=0;i&lt;s.length;i++)s[i].call(this,e);return this},listens:function(t){return!(!this._events||!this._events[t])}};module.exports=Evented;
},{&quot;./util&quot;:96}],91:[function(require,module,exports){
    &quot;use strict&quot;;function Glyphs(a,e){this.stacks=a.readFields(readFontstacks,[],e)}function readFontstacks(a,e,r){if(1===a){var t=r.readMessage(readFontstack,{glyphs:{}});e.push(t)}}function readFontstack(a,e,r){if(1===a)e.name=r.readString();else if(2===a)e.range=r.readString();else if(3===a){var t=r.readMessage(readGlyph,{});e.glyphs[t.id]=t}}function readGlyph(a,e,r){1===a?e.id=r.readVarint():2===a?e.bitmap=r.readBytes():3===a?e.width=r.readVarint():4===a?e.height=r.readVarint():5===a?e.left=r.readSVarint():6===a?e.top=r.readSVarint():7===a&amp;&amp;(e.advance=r.readVarint())}module.exports=Glyphs;
},{}],92:[function(require,module,exports){
    &quot;use strict&quot;;function interpolate(t,e,n){return t*(1-n)+e*n}module.exports=interpolate,interpolate.number=interpolate,interpolate.vec2=function(t,e,n){return[interpolate(t[0],e[0],n),interpolate(t[1],e[1],n)]},interpolate.color=function(t,e,n){return[interpolate(t[0],e[0],n),interpolate(t[1],e[1],n),interpolate(t[2],e[2],n),interpolate(t[3],e[3],n)]},interpolate.array=function(t,e,n){return t.map(function(t,r){return interpolate(t,e[r],n)})};
},{}],93:[function(require,module,exports){
    &quot;use strict&quot;;function normalizeURL(e,o,r){if(r=r||config.ACCESS_TOKEN,!r&amp;&amp;config.REQUIRE_ACCESS_TOKEN)throw new Error(&quot;An API access token is required to use Mapbox GL. See https://www.mapbox.com/developers/api/#access-tokens&quot;);var n=config.FORCE_HTTPS||&quot;undefined&quot;!=typeof document&amp;&amp;&quot;https:&quot;===document.location.protocol;if(e=e.replace(/^mapbox:\/\//,(n?config.HTTPS_URL:config.HTTP_URL)+o),e+=-1!==e.indexOf(&quot;?&quot;)?&quot;&amp;access_token=&quot;:&quot;?access_token=&quot;,config.REQUIRE_ACCESS_TOKEN){if(&quot;s&quot;===r[0])throw new Error(&quot;Use a public access token (pk.*) with Mapbox GL JS, not a secret access token (sk.*). See https://www.mapbox.com/developers/api/#access-tokens&quot;);e+=r}return e}var config=require(&quot;./config&quot;),browser=require(&quot;./browser&quot;);module.exports.normalizeStyleURL=function(e,o){var r=e.match(/^mapbox:\/\/([^.]+)/);return r?normalizeURL(e,&quot;/styles/v1/&quot;+r[1]+&quot;/&quot;,o):e},module.exports.normalizeSourceURL=function(e,o){return e.match(/^mapbox:\/\//)?(e=normalizeURL(e+&quot;.json&quot;,&quot;/v4/&quot;,o),0===e.indexOf(&quot;https&quot;)&amp;&amp;(e+=&quot;&amp;secure&quot;),e):e},module.exports.normalizeGlyphsURL=function(e,o){return e.match(/^mapbox:\/\//)?normalizeURL(e,&quot;/v4/&quot;,o):e},module.exports.normalizeTileURL=function(e,o){return o&amp;&amp;o.match(/^mapbox:\/\//)?e.replace(/\.((?:png|jpg)\d*)(?=$|\?)/,browser.devicePixelRatio&gt;=2?&quot;@2x.$1&quot;:&quot;.$1&quot;):e};
},{&quot;./browser&quot;:85,&quot;./config&quot;:89}],94:[function(require,module,exports){
    &quot;use strict&quot;;function MRUCache(t,e){this.max=t,this.onRemove=e,this.reset()}module.exports=MRUCache,MRUCache.prototype.reset=function(){for(var t in this.list)this.onRemove(this.list[t]);return this.list={},this.order=[],this},MRUCache.prototype.add=function(t,e){if(this.list[t]=e,this.order.push(t),this.order.length&gt;this.max){var i=this.get(this.order[0]);i&amp;&amp;this.onRemove(i)}return this},MRUCache.prototype.has=function(t){return t in this.list},MRUCache.prototype.keys=function(){return this.order},MRUCache.prototype.get=function(t){if(!this.has(t))return null;var e=this.list[t];return delete this.list[t],this.order.splice(this.order.indexOf(t),1),e};
},{}],95:[function(require,module,exports){
    &quot;use strict&quot;;function resolveTokens(e,n){return n.replace(/{([^{}()\[\]&lt;&gt;$=:;.,^]+)}/g,function(n,r){return r in e?e[r]:&quot;&quot;})}module.exports=resolveTokens;
},{}],96:[function(require,module,exports){
    &quot;use strict&quot;;var UnitBezier=require(&quot;unitbezier&quot;);exports.easeCubicInOut=function(r){if(0&gt;=r)return 0;if(r&gt;=1)return 1;var t=r*r,n=t*r;return 4*(.5&gt;r?n:3*(r-t)+n-.75)},exports.bezier=function(r,t,n,e){var o=new UnitBezier(r,t,n,e);return function(r){return o.solve(r)}},exports.ease=exports.bezier(.25,.1,.25,1),exports.premultiply=function(r){return r[0]*=r[3],r[1]*=r[3],r[2]*=r[3],r},exports.clamp=function(r,t,n){return Math.min(n,Math.max(t,r))},exports.wrap=function(r,t,n){var e=n-t;return r===n?r:((r-t)%e+e)%e+t},exports.coalesce=function(){for(var r=0;r&lt;arguments.length;r++){var t=arguments[r];if(null!==t&amp;&amp;void 0!==t)return t}},exports.asyncEach=function(r,t,n){function e(){0===--o&amp;&amp;n()}var o=r.length;if(0===o)return n();for(var i=0;i&lt;r.length;i++)t(r[i],e)},exports.keysDifference=function(r,t){var n=[];for(var e in r)e in t||n.push(e);return n},exports.extend=function(r){for(var t=1;t&lt;arguments.length;t++){var n=arguments[t];for(var e in n)r[e]=n[e]}return r},exports.extendAll=function(r,t){for(var n in t)Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n));return r},exports.inherit=function(r,t){var n=&quot;function&quot;==typeof r?r.prototype:r,e=Object.create(n);return exports.extendAll(e,t),e},exports.pick=function(r,t){for(var n={},e=0;e&lt;t.length;e++){var o=t[e];o in r&amp;&amp;(n[o]=r[o])}return n};var id=1;exports.uniqueId=function(){return id++},exports.throttle=function(r,t,n){var e,o,i,u;return u=function(){e=!1,o&amp;&amp;(i.apply(n,o),o=!1)},i=function(){e?o=arguments:(r.apply(n,arguments),setTimeout(u,t),e=!0)}},exports.debounce=function(r,t){var n,e;return function(){e=arguments,clearTimeout(n),n=setTimeout(function(){r.apply(null,e)},t)}},exports.bindAll=function(r,t){r.forEach(function(r){t[r]=t[r].bind(t)})},exports.setOptions=function(r,t){r.hasOwnProperty(&quot;options&quot;)||(r.options=r.options?Object.create(r.options):{});for(var n in t)r.options[n]=t[n];return r.options};
},{&quot;unitbezier&quot;:121}],97:[function(require,module,exports){
    module.exports=&quot;function&quot;==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],98:[function(require,module,exports){
    function drainQueue(){if(!draining){draining=!0;for(var e,o=queue.length;o;){e=queue,queue=[];for(var r=-1;++r&lt;o;)e[r]();o=queue.length}draining=!1}}function noop(){}var process=module.exports={},queue=[],draining=!1;process.nextTick=function(e){queue.push(e),draining||setTimeout(drainQueue,0)},process.title=&quot;browser&quot;,process.browser=!0,process.env={},process.argv=[],process.version=&quot;&quot;,process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(){throw new Error(&quot;process.binding is not supported&quot;)},process.cwd=function(){return&quot;/&quot;},process.chdir=function(){throw new Error(&quot;process.chdir is not supported&quot;)},process.umask=function(){return 0};
},{}],99:[function(require,module,exports){
    module.exports=function(o){return o&amp;&amp;&quot;object&quot;==typeof o&amp;&amp;&quot;function&quot;==typeof o.copy&amp;&amp;&quot;function&quot;==typeof o.fill&amp;&amp;&quot;function&quot;==typeof o.readUInt8};
},{}],100:[function(require,module,exports){
    (function (process,global){
        function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length&gt;=3&amp;&amp;(t.depth=arguments[2]),arguments.length&gt;=4&amp;&amp;(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&amp;&amp;exports._extend(t,r),isUndefined(t.showHidden)&amp;&amp;(t.showHidden=!1),isUndefined(t.depth)&amp;&amp;(t.depth=2),isUndefined(t.colors)&amp;&amp;(t.colors=!1),isUndefined(t.customInspect)&amp;&amp;(t.customInspect=!0),t.colors&amp;&amp;(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?&quot;[&quot;+inspect.colors[t][0]+&quot;m&quot;+e+&quot;[&quot;+inspect.colors[t][1]+&quot;m&quot;:e}function stylizeNoColor(e){return e}function arrayToHash(e){var r={};return e.forEach(function(e){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&amp;&amp;r&amp;&amp;isFunction(r.inspect)&amp;&amp;r.inspect!==exports.inspect&amp;&amp;(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&amp;&amp;(o=Object.getOwnPropertyNames(r)),isError(r)&amp;&amp;(o.indexOf(&quot;message&quot;)&gt;=0||o.indexOf(&quot;description&quot;)&gt;=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?&quot;: &quot;+r.name:&quot;&quot;;return e.stylize(&quot;[Function&quot;+u+&quot;]&quot;,&quot;special&quot;)}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),&quot;regexp&quot;);if(isDate(r))return e.stylize(Date.prototype.toString.call(r),&quot;date&quot;);if(isError(r))return formatError(r)}var a=&quot;&quot;,c=!1,l=[&quot;{&quot;,&quot;}&quot;];if(isArray(r)&amp;&amp;(c=!0,l=[&quot;[&quot;,&quot;]&quot;]),isFunction(r)){var p=r.name?&quot;: &quot;+r.name:&quot;&quot;;a=&quot; [Function&quot;+p+&quot;]&quot;}if(isRegExp(r)&amp;&amp;(a=&quot; &quot;+RegExp.prototype.toString.call(r)),isDate(r)&amp;&amp;(a=&quot; &quot;+Date.prototype.toUTCString.call(r)),isError(r)&amp;&amp;(a=&quot; &quot;+formatError(r)),0===o.length&amp;&amp;(!c||0==r.length))return l[0]+a+l[1];if(0&gt;t)return isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),&quot;regexp&quot;):e.stylize(&quot;[Object]&quot;,&quot;special&quot;);e.seen.push(r);var f;return f=c?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,c)}),e.seen.pop(),reduceToSingleString(f,a,l)}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize(&quot;undefined&quot;,&quot;undefined&quot;);if(isString(r)){var t=&quot;&#039;&quot;+JSON.stringify(r).replace(/^&quot;|&quot;$/g,&quot;&quot;).replace(/&#039;/g,&quot;\\&#039;&quot;).replace(/\\&quot;/g,&#039;&quot;&#039;)+&quot;&#039;&quot;;return e.stylize(t,&quot;string&quot;)}return isNumber(r)?e.stylize(&quot;&quot;+r,&quot;number&quot;):isBoolean(r)?e.stylize(&quot;&quot;+r,&quot;boolean&quot;):isNull(r)?e.stylize(&quot;null&quot;,&quot;null&quot;):void 0}function formatError(e){return&quot;[&quot;+Error.prototype.toString.call(e)+&quot;]&quot;}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;u&gt;s;++s)o.push(hasOwnProperty(r,String(s))?formatProperty(e,r,t,n,String(s),!0):&quot;&quot;);return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,a;if(a=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]},a.get?u=a.set?e.stylize(&quot;[Getter/Setter]&quot;,&quot;special&quot;):e.stylize(&quot;[Getter]&quot;,&quot;special&quot;):a.set&amp;&amp;(u=e.stylize(&quot;[Setter]&quot;,&quot;special&quot;)),hasOwnProperty(n,i)||(s=&quot;[&quot;+i+&quot;]&quot;),u||(e.seen.indexOf(a.value)&lt;0?(u=isNull(t)?formatValue(e,a.value,null):formatValue(e,a.value,t-1),u.indexOf(&quot;\n&quot;)&gt;-1&amp;&amp;(u=o?u.split(&quot;\n&quot;).map(function(e){return&quot;  &quot;+e}).join(&quot;\n&quot;).substr(2):&quot;\n&quot;+u.split(&quot;\n&quot;).map(function(e){return&quot;   &quot;+e}).join(&quot;\n&quot;))):u=e.stylize(&quot;[Circular]&quot;,&quot;special&quot;)),isUndefined(s)){if(o&amp;&amp;i.match(/^\d+$/))return u;s=JSON.stringify(&quot;&quot;+i),s.match(/^&quot;([a-zA-Z_][a-zA-Z_0-9]*)&quot;$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,&quot;name&quot;)):(s=s.replace(/&#039;/g,&quot;\\&#039;&quot;).replace(/\\&quot;/g,&#039;&quot;&#039;).replace(/(^&quot;|&quot;$)/g,&quot;&#039;&quot;),s=e.stylize(s,&quot;string&quot;))}return s+&quot;: &quot;+u}function reduceToSingleString(e,r,t){var n=0,i=e.reduce(function(e,r){return n++,r.indexOf(&quot;\n&quot;)&gt;=0&amp;&amp;n++,e+r.replace(/\u001b\[\d\d?m/g,&quot;&quot;).length+1},0);return i&gt;60?t[0]+(&quot;&quot;===r?&quot;&quot;:r+&quot;\n &quot;)+&quot; &quot;+e.join(&quot;,\n  &quot;)+&quot; &quot;+t[1]:t[0]+r+&quot; &quot;+e.join(&quot;, &quot;)+&quot; &quot;+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return&quot;boolean&quot;==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return&quot;number&quot;==typeof e}function isString(e){return&quot;string&quot;==typeof e}function isSymbol(e){return&quot;symbol&quot;==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&amp;&amp;&quot;[object RegExp]&quot;===objectToString(e)}function isObject(e){return&quot;object&quot;==typeof e&amp;&amp;null!==e}function isDate(e){return isObject(e)&amp;&amp;&quot;[object Date]&quot;===objectToString(e)}function isError(e){return isObject(e)&amp;&amp;(&quot;[object Error]&quot;===objectToString(e)||e instanceof Error)}function isFunction(e){return&quot;function&quot;==typeof e}function isPrimitive(e){return null===e||&quot;boolean&quot;==typeof e||&quot;number&quot;==typeof e||&quot;string&quot;==typeof e||&quot;symbol&quot;==typeof e||&quot;undefined&quot;==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return 10&gt;e?&quot;0&quot;+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(&quot;:&quot;);return[e.getDate(),months[e.getMonth()],r].join(&quot; &quot;)}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t&lt;arguments.length;t++)r.push(inspect(arguments[t]));return r.join(&quot; &quot;)}for(var t=1,n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if(&quot;%%&quot;===e)return&quot;%&quot;;if(t&gt;=i)return e;switch(e){case&quot;%s&quot;:return String(n[t++]);case&quot;%d&quot;:return Number(n[t++]);case&quot;%j&quot;:try{return JSON.stringify(n[t++])}catch(r){return&quot;[Circular]&quot;}default:return e}}),s=n[t];i&gt;t;s=n[++t])o+=isNull(s)||!isObject(s)?&quot; &quot;+s:&quot; &quot;+inspect(s);return o},exports.deprecate=function(e,r){function t(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(process.noDeprecation===!0)return e;var n=!1;return t};var debugs={},debugEnviron;exports.debuglog=function(e){if(isUndefined(debugEnviron)&amp;&amp;(debugEnviron=process.env.NODE_DEBUG||&quot;&quot;),e=e.toUpperCase(),!debugs[e])if(new RegExp(&quot;\\b&quot;+e+&quot;\\b&quot;,&quot;i&quot;).test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error(&quot;%s %d: %s&quot;,e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:&quot;cyan&quot;,number:&quot;yellow&quot;,&quot;boolean&quot;:&quot;yellow&quot;,undefined:&quot;grey&quot;,&quot;null&quot;:&quot;bold&quot;,string:&quot;green&quot;,date:&quot;magenta&quot;,regexp:&quot;red&quot;},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require(&quot;./support/isBuffer&quot;);var months=[&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;,&quot;Jun&quot;,&quot;Jul&quot;,&quot;Aug&quot;,&quot;Sep&quot;,&quot;Oct&quot;,&quot;Nov&quot;,&quot;Dec&quot;];exports.log=function(){console.log(&quot;%s - %s&quot;,timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require(&quot;inherits&quot;),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};
    }).call(this,require(&#039;_process&#039;),typeof global !== &quot;undefined&quot; ? global : typeof self !== &quot;undefined&quot; ? self : typeof window !== &quot;undefined&quot; ? window : {})

},{&quot;./support/isBuffer&quot;:99,&quot;_process&quot;:98,&quot;inherits&quot;:97}],101:[function(require,module,exports){
    function clamp_css_byte(e){return e=Math.round(e),0&gt;e?0:e&gt;255?255:e}function clamp_css_float(e){return 0&gt;e?0:e&gt;1?1:e}function parse_css_int(e){return clamp_css_byte(&quot;%&quot;===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function parse_css_float(e){return clamp_css_float(&quot;%&quot;===e[e.length-1]?parseFloat(e)/100:parseFloat(e))}function css_hue_to_rgb(e,r,l){return 0&gt;l?l+=1:l&gt;1&amp;&amp;(l-=1),1&gt;6*l?e+(r-e)*l*6:1&gt;2*l?r:2&gt;3*l?e+(r-e)*(2/3-l)*6:e}function parseCSSColor(e){var r=e.replace(/ /g,&quot;&quot;).toLowerCase();if(r in kCSSColorTable)return kCSSColorTable[r].slice();if(&quot;#&quot;===r[0]){if(4===r.length){var l=parseInt(r.substr(1),16);return l&gt;=0&amp;&amp;4095&gt;=l?[(3840&amp;l)&gt;&gt;4|(3840&amp;l)&gt;&gt;8,240&amp;l|(240&amp;l)&gt;&gt;4,15&amp;l|(15&amp;l)&lt;&lt;4,1]:null}if(7===r.length){var l=parseInt(r.substr(1),16);return l&gt;=0&amp;&amp;16777215&gt;=l?[(16711680&amp;l)&gt;&gt;16,(65280&amp;l)&gt;&gt;8,255&amp;l,1]:null}return null}var a=r.indexOf(&quot;(&quot;),t=r.indexOf(&quot;)&quot;);if(-1!==a&amp;&amp;t+1===r.length){var n=r.substr(0,a),s=r.substr(a+1,t-(a+1)).split(&quot;,&quot;),o=1;switch(n){case&quot;rgba&quot;:if(4!==s.length)return null;o=parse_css_float(s.pop());case&quot;rgb&quot;:return 3!==s.length?null:[parse_css_int(s[0]),parse_css_int(s[1]),parse_css_int(s[2]),o];case&quot;hsla&quot;:if(4!==s.length)return null;o=parse_css_float(s.pop());case&quot;hsl&quot;:if(3!==s.length)return null;var i=(parseFloat(s[0])%360+360)%360/360,u=parse_css_float(s[1]),g=parse_css_float(s[2]),d=.5&gt;=g?g*(u+1):g+u-g*u,c=2*g-d;return[clamp_css_byte(255*css_hue_to_rgb(c,d,i+1/3)),clamp_css_byte(255*css_hue_to_rgb(c,d,i)),clamp_css_byte(255*css_hue_to_rgb(c,d,i-1/3)),o];default:return null}}return null}var kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{exports.parseCSSColor=parseCSSColor}catch(e){}
},{}],102:[function(require,module,exports){
    &quot;use strict&quot;;function infix(t){return function(n,r,i){return&quot;$type&quot;===r?&quot;t&quot;+t+VectorTileFeatureTypes.indexOf(i):&quot;p[&quot;+JSON.stringify(r)+&quot;]&quot;+t+JSON.stringify(i)}}function strictInfix(t){var n=infix(t);return function(t,r,i){return&quot;$type&quot;===r?n(t,r,i):&quot;typeof(p[&quot;+JSON.stringify(r)+&quot;]) === typeof(&quot;+JSON.stringify(i)+&quot;) &amp;&amp; &quot;+n(t,r,i)}}function compile(t){return operators[t[0]].apply(t,t)}function truth(){return!0}var VectorTileFeatureTypes=[&quot;Unknown&quot;,&quot;Point&quot;,&quot;LineString&quot;,&quot;Polygon&quot;],operators={&quot;==&quot;:infix(&quot;===&quot;),&quot;!=&quot;:infix(&quot;!==&quot;),&quot;&gt;&quot;:strictInfix(&quot;&gt;&quot;),&quot;&lt;&quot;:strictInfix(&quot;&lt;&quot;),&quot;&lt;=&quot;:strictInfix(&quot;&lt;=&quot;),&quot;&gt;=&quot;:strictInfix(&quot;&gt;=&quot;),&quot;in&quot;:function(t,n){return Array.prototype.slice.call(arguments,2).map(function(r){return&quot;(&quot;+operators[&quot;==&quot;](t,n,r)+&quot;)&quot;}).join(&quot;||&quot;)||&quot;false&quot;},&quot;!in&quot;:function(){return&quot;!(&quot;+operators[&quot;in&quot;].apply(this,arguments)+&quot;)&quot;},any:function(){return Array.prototype.slice.call(arguments,1).map(function(t){return&quot;(&quot;+compile(t)+&quot;)&quot;}).join(&quot;||&quot;)||&quot;false&quot;},all:function(){return Array.prototype.slice.call(arguments,1).map(function(t){return&quot;(&quot;+compile(t)+&quot;)&quot;}).join(&quot;&amp;&amp;&quot;)||&quot;true&quot;},none:function(){return&quot;!(&quot;+operators.any.apply(this,arguments)+&quot;)&quot;}};module.exports=function(t){if(!t)return truth;var n=&quot;var p = f.properties || f.tags || {}, t = f.type; return &quot;+compile(t)+&quot;;&quot;;return new Function(&quot;f&quot;,n)};
},{}],103:[function(require,module,exports){
    &quot;use strict&quot;;function clip(e,n,t,r,l,u,i,s){if(t/=n,r/=n,i&gt;=t&amp;&amp;r&gt;=s)return e;if(i&gt;r||t&gt;s)return null;for(var p=[],h=0;h&lt;e.length;h++){var c,a,o=e[h],f=o.geometry,g=o.type;if(c=o.min[l],a=o.max[l],c&gt;=t&amp;&amp;r&gt;=a)p.push(o);else if(!(c&gt;r||t&gt;a)){var m=1===g?clipPoints(f,t,r,l):clipGeometry(f,t,r,l,u,3===g);m.length&amp;&amp;p.push({geometry:m,type:g,tags:e[h].tags||null,min:o.min,max:o.max})}}return p.length?p:null}function clipPoints(e,n,t,r){for(var l=[],u=0;u&lt;e.length;u++){var i=e[u],s=i[r];s&gt;=n&amp;&amp;t&gt;=s&amp;&amp;l.push(i)}return l}function clipGeometry(e,n,t,r,l,u){for(var i=[],s=0;s&lt;e.length;s++){var p,h,c=0,a=0,o=null,f=e[s],g=f.area,m=f.dist,v=f.length,w=[];for(h=0;v-1&gt;h;h++)p=o||f[h],o=f[h+1],c=a||p[r],a=o[r],n&gt;c?a&gt;t?(w.push(l(p,o,n),l(p,o,t)),u||(w=newSlice(i,w,g,m))):a&gt;=n&amp;&amp;w.push(l(p,o,n)):c&gt;t?n&gt;a?(w.push(l(p,o,t),l(p,o,n)),u||(w=newSlice(i,w,g,m))):t&gt;=a&amp;&amp;w.push(l(p,o,t)):(w.push(p),n&gt;a?(w.push(l(p,o,n)),u||(w=newSlice(i,w,g,m))):a&gt;t&amp;&amp;(w.push(l(p,o,t)),u||(w=newSlice(i,w,g,m))));p=f[v-1],c=p[r],c&gt;=n&amp;&amp;t&gt;=c&amp;&amp;w.push(p),u&amp;&amp;w[0]!==w[w.length-1]&amp;&amp;w.push(w[0]),newSlice(i,w,g,m)}return i}function newSlice(e,n,t,r){return n.length&amp;&amp;(n.area=t,n.dist=r,e.push(n)),[]}module.exports=clip;
},{}],104:[function(require,module,exports){
    &quot;use strict&quot;;function convert(e,t){var r=[];if(&quot;FeatureCollection&quot;===e.type)for(var o=0;o&lt;e.features.length;o++)convertFeature(r,e.features[o],t);else&quot;Feature&quot;===e.type?convertFeature(r,e,t):convertFeature(r,{geometry:e},t);return r}function convertFeature(e,t,r){var o,n,a,i=t.geometry,c=i.type,l=i.coordinates,u=t.properties;if(&quot;Point&quot;===c)e.push(create(u,1,[projectPoint(l)]));else if(&quot;MultiPoint&quot;===c)e.push(create(u,1,project(l)));else if(&quot;LineString&quot;===c)e.push(create(u,2,[project(l,r)]));else if(&quot;MultiLineString&quot;===c||&quot;Polygon&quot;===c){for(a=[],o=0;o&lt;l.length;o++)a.push(project(l[o],r));e.push(create(u,&quot;Polygon&quot;===c?3:2,a))}else if(&quot;MultiPolygon&quot;===c){for(a=[],o=0;o&lt;l.length;o++)for(n=0;n&lt;l[o].length;n++)a.push(project(l[o][n],r));e.push(create(u,3,a))}else if(&quot;GeometryCollection&quot;===c)for(o=0;o&lt;i.geometries.length;o++)convertFeature(e,{geometry:i.geometries[o],properties:u},r);else console.warn(&quot;Unsupported GeoJSON type: &quot;+i.type)}function create(e,t,r){var o={geometry:r,type:t,tags:e||null,min:[2,1],max:[-1,0]};return calcBBox(o),o}function project(e,t){for(var r=[],o=0;o&lt;e.length;o++)r.push(projectPoint(e[o]));return t&amp;&amp;(simplify(r,t),calcSize(r)),r}function projectPoint(e){var t=Math.sin(e[1]*Math.PI/180),r=e[0]/360+.5,o=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return o=-1&gt;o?-1:o&gt;1?1:o,[r,o,0]}function calcSize(e){for(var t,r,o=0,n=0,a=0;a&lt;e.length-1;a++)t=r||e[a],r=e[a+1],o+=t[0]*r[1]-r[0]*t[1],n+=Math.abs(r[0]-t[0])+Math.abs(r[1]-t[1]);e.area=Math.abs(o/2),e.dist=n}function calcBBox(e){var t=e.geometry,r=e.min,o=e.max;if(1===e.type)calcRingBBox(r,o,t);else for(var n=0;n&lt;t.length;n++)calcRingBBox(r,o,t[n]);return e}function calcRingBBox(e,t,r){for(var o,n=0;n&lt;r.length;n++)o=r[n],e[0]=Math.min(o[0],e[0]),t[0]=Math.max(o[0],t[0]),e[1]=Math.min(o[1],e[1]),t[1]=Math.max(o[1],t[1])}module.exports=convert;var simplify=require(&quot;./simplify&quot;);
},{&quot;./simplify&quot;:106}],105:[function(require,module,exports){
    &quot;use strict&quot;;function geojsonvt(e,t){return new GeoJSONVT(e,t)}function GeoJSONVT(e,t){t=this.options=extend(Object.create(this.options),t);var i=t.debug;i&amp;&amp;console.time(&quot;preprocess data&quot;);var o=1&lt;&lt;t.maxZoom,n=convert(e,t.tolerance/(o*t.extent));this.tiles={},i&amp;&amp;(console.timeEnd(&quot;preprocess data&quot;),console.log(&quot;index: maxZoom: %d, maxPoints: %d&quot;,t.indexMaxZoom,t.indexMaxPoints),console.time(&quot;generate tiles&quot;),this.stats={},this.total=0),n=wrap(n,t.buffer/t.extent,intersectX),this.splitTile(n,0,0,0),i&amp;&amp;(console.log(&quot;features: %d, points: %d&quot;,this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd(&quot;generate tiles&quot;),console.log(&quot;tiles generated:&quot;,this.total,JSON.stringify(this.stats)))}function transformTile(e,t){if(!e||e.transformed)return e;var i,o,n,r=e.z2,s=e.x,l=e.y;for(i=0;i&lt;e.features.length;i++){var a=e.features[i],u=a.geometry,c=a.type;if(1===c)for(o=0;o&lt;u.length;o++)u[o]=transformPoint(u[o],t,r,s,l);else for(o=0;o&lt;u.length;o++){var f=u[o];for(n=0;n&lt;f.length;n++)f[n]=transformPoint(f[n],t,r,s,l)}}return e.transformed=!0,e}function transformPoint(e,t,i,o,n){var r=Math.round(t*(e[0]*i-o)),s=Math.round(t*(e[1]*i-n));return[r,s]}function isClippedSquare(e,t,i){if(1!==e.length)return!1;var o=e[0];if(3!==o.type||o.geometry.length&gt;1)return!1;for(var n=0;n&lt;o.geometry[0].length;n++){var r=o.geometry[0][n];if(r[0]!==-i&amp;&amp;r[0]!==t+i||r[1]!==-i&amp;&amp;r[1]!==t+i)return!1}return!0}function toID(e,t,i){return 32*((1&lt;&lt;e)*i+t)+e}function intersectX(e,t,i){return[i,(i-e[0])*(t[1]-e[1])/(t[0]-e[0])+e[1],1]}function intersectY(e,t,i){return[(i-e[1])*(t[0]-e[0])/(t[1]-e[1])+e[0],i,1]}function extend(e,t){for(var i in t)e[i]=t[i];return e}module.exports=geojsonvt;var convert=require(&quot;./convert&quot;),clip=require(&quot;./clip&quot;),wrap=require(&quot;./wrap&quot;),createTile=require(&quot;./tile&quot;);GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,debug:0},GeoJSONVT.prototype.splitTile=function(e,t,i,o,n,r,s){for(var l=[e,t,i,o],a=this.options,u=a.debug,c=a.extent,f=a.buffer;l.length;){e=l.shift(),t=l.shift(),i=l.shift(),o=l.shift();var m=1&lt;&lt;t,d=toID(t,i,o),p=this.tiles[d],h=t===a.maxZoom?0:a.tolerance/(m*c);if(!p&amp;&amp;(u&gt;1&amp;&amp;console.time(&quot;creation&quot;),p=this.tiles[d]=createTile(e,m,i,o,h,t===a.maxZoom),u)){u&gt;1&amp;&amp;(console.log(&quot;tile z%d-%d-%d (features: %d, points: %d, simplified: %d)&quot;,t,i,o,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd(&quot;creation&quot;));var x=&quot;z&quot;+t;this.stats[x]=(this.stats[x]||0)+1,this.total++}if(p.source=e,!isClippedSquare(p.features,c,f)){if(n){if(t===a.maxZoom||t===n)continue;var g=1&lt;&lt;n-t;if(i!==Math.floor(r/g)&amp;&amp;o!==Math.floor(s/g))continue}else if(t===a.indexMaxZoom||p.numPoints&lt;=a.indexMaxPoints)continue;p.source=null,u&gt;1&amp;&amp;console.time(&quot;clipping&quot;);var v,T,M,y,P,S,b=.5*f/c,Z=.5-b,q=.5+b,w=1+b;v=T=M=y=null,P=clip(e,m,i-b,i+q,0,intersectX,p.min[0],p.max[0]),S=clip(e,m,i+Z,i+w,0,intersectX,p.min[0],p.max[0]),P&amp;&amp;(v=clip(P,m,o-b,o+q,1,intersectY,p.min[1],p.max[1]),T=clip(P,m,o+Z,o+w,1,intersectY,p.min[1],p.max[1])),S&amp;&amp;(M=clip(S,m,o-b,o+q,1,intersectY,p.min[1],p.max[1]),y=clip(S,m,o+Z,o+w,1,intersectY,p.min[1],p.max[1])),u&gt;1&amp;&amp;console.timeEnd(&quot;clipping&quot;),v&amp;&amp;l.push(v,t+1,2*i,2*o),T&amp;&amp;l.push(T,t+1,2*i,2*o+1),M&amp;&amp;l.push(M,t+1,2*i+1,2*o),y&amp;&amp;l.push(y,t+1,2*i+1,2*o+1)}}},GeoJSONVT.prototype.getTile=function(e,t,i){var o=this.options,n=o.extent,r=o.debug,s=1&lt;&lt;e;t=(t%s+s)%s;var l=toID(e,t,i);if(this.tiles[l])return transformTile(this.tiles[l],n);r&gt;1&amp;&amp;console.log(&quot;drilling down to z%d-%d-%d&quot;,e,t,i);for(var a,u=e,c=t,f=i;!a&amp;&amp;u&gt;0;)u--,c=Math.floor(c/2),f=Math.floor(f/2),a=this.tiles[toID(u,c,f)];if(r&gt;1&amp;&amp;console.log(&quot;found parent tile z%d-%d-%d&quot;,u,c,f),a.source){if(isClippedSquare(a.features,o.extent,o.buffer))return transformTile(a,n);r&gt;1&amp;&amp;console.time(&quot;drilling down&quot;),this.splitTile(a.source,u,c,f,e,t,i),r&gt;1&amp;&amp;console.timeEnd(&quot;drilling down&quot;)}return transformTile(this.tiles[l],n)};
},{&quot;./clip&quot;:103,&quot;./convert&quot;:104,&quot;./tile&quot;:107,&quot;./wrap&quot;:108}],106:[function(require,module,exports){
    &quot;use strict&quot;;function simplify(t,i){var e,p,r,s,o=i*i,f=t.length,u=0,n=f-1,g=[];for(t[u][2]=1,t[n][2]=1;n;){for(p=0,e=u+1;n&gt;e;e++)r=getSqSegDist(t[e],t[u],t[n]),r&gt;p&amp;&amp;(s=e,p=r);p&gt;o?(t[s][2]=p,g.push(u),g.push(s),u=s):(n=g.pop(),u=g.pop())}}function getSqSegDist(t,i,e){var p=i[0],r=i[1],s=e[0],o=e[1],f=t[0],u=t[1],n=s-p,g=o-r;if(0!==n||0!==g){var l=((f-p)*n+(u-r)*g)/(n*n+g*g);l&gt;1?(p=s,r=o):l&gt;0&amp;&amp;(p+=n*l,r+=g*l)}return n=f-p,g=u-r,n*n+g*g}module.exports=simplify;
},{}],107:[function(require,module,exports){
    &quot;use strict&quot;;function createTile(e,n,t,m,i,u){for(var r={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:t,y:m,z2:n,transformed:!1,min:[2,1],max:[-1,0]},a=0;a&lt;e.length;a++){r.numFeatures++,addFeature(r,e[a],i,u);var s=e[a].min,l=e[a].max;s[0]&lt;r.min[0]&amp;&amp;(r.min[0]=s[0]),s[1]&lt;r.min[1]&amp;&amp;(r.min[1]=s[1]),l[0]&gt;r.max[0]&amp;&amp;(r.max[0]=l[0]),l[1]&gt;r.max[1]&amp;&amp;(r.max[1]=l[1])}return r}function addFeature(e,n,t,m){var i,u,r,a,s=n.geometry,l=n.type,o=[],f=t*t;if(1===l)for(i=0;i&lt;s.length;i++)o.push(s[i]),e.numPoints++,e.numSimplified++;else for(i=0;i&lt;s.length;i++)if(r=s[i],m||!(2===l&amp;&amp;r.dist&lt;t||3===l&amp;&amp;r.area&lt;f)){var d=[];for(u=0;u&lt;r.length;u++)a=r[u],(m||a[2]&gt;f)&amp;&amp;(d.push(a),e.numSimplified++),e.numPoints++;o.push(d)}else e.numPoints+=r.length;o.length&amp;&amp;e.features.push({geometry:o,type:l,tags:n.tags||null})}module.exports=createTile;
},{}],108:[function(require,module,exports){
    &quot;use strict&quot;;function wrap(r,t,e){var o=r,a=clip(r,1,-1-t,t,0,e,-1,2),s=clip(r,1,1-t,2+t,0,e,-1,2);return(a||s)&amp;&amp;(o=clip(r,1,-t,1+t,0,e,-1,2),a&amp;&amp;(o=shiftFeatureCoords(a,1).concat(o)),s&amp;&amp;(o=o.concat(shiftFeatureCoords(s,-1)))),o}function shiftFeatureCoords(r,t){for(var e=[],o=0;o&lt;r.length;o++){var a,s=r[o],i=s.type;if(1===i)a=shiftCoords(s.geometry,t);else{a=[];for(var n=0;n&lt;s.geometry.length;n++)a.push(shiftCoords(s.geometry[n],t))}e.push({geometry:a,type:i,tags:s.tags,min:[s.min[0]+t,s.min[1]],max:[s.max[0]+t,s.max[1]]})}return e}function shiftCoords(r,t){var e=[];e.area=r.area,e.dist=r.dist;for(var o=0;o&lt;r.length;o++)e.push([r[o][0]+t,r[o][1],r[o][2]]);return e}var clip=require(&quot;./clip&quot;);module.exports=wrap;
},{&quot;./clip&quot;:103}],109:[function(require,module,exports){
    !function(t){&quot;use strict&quot;;var n={};&quot;undefined&quot;==typeof exports?&quot;function&quot;==typeof define&amp;&amp;&quot;object&quot;==typeof define.amd&amp;&amp;define.amd?(n.exports={},define(function(){return n.exports})):n.exports=&quot;undefined&quot;!=typeof window?window:t:n.exports=exports,function(t){if(!n)var n=1e-6;if(!r)var r=&quot;undefined&quot;!=typeof Float32Array?Float32Array:Array;if(!e)var e=Math.random;var a={};a.setMatrixArrayType=function(t){r=t},&quot;undefined&quot;!=typeof t&amp;&amp;(t.glMatrix=a);var u=Math.PI/180;a.toRadian=function(t){return t*u};var o={};o.create=function(){var t=new r(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var n=new r(2);return n[0]=t[0],n[1]=t[1],n},o.fromValues=function(t,n){var e=new r(2);return e[0]=t,e[1]=n,e},o.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},o.set=function(t,n,r){return t[0]=n,t[1]=r,t},o.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t},o.subtract=function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t},o.sub=o.subtract,o.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t},o.mul=o.multiply,o.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t},o.div=o.divide,o.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t},o.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t},o.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t},o.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t},o.distance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)},o.dist=o.distance,o.squaredDistance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1];return r*r+e*e},o.sqrDist=o.squaredDistance,o.length=function(t){var n=t[0],r=t[1];return Math.sqrt(n*n+r*r)},o.len=o.length,o.squaredLength=function(t){var n=t[0],r=t[1];return n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},o.normalize=function(t,n){var r=n[0],e=n[1],a=r*r+e*e;return a&gt;0&amp;&amp;(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a),t},o.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},o.cross=function(t,n,r){var e=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=e,t},o.lerp=function(t,n,r,e){var a=n[0],u=n[1];return t[0]=a+e*(r[0]-a),t[1]=u+e*(r[1]-u),t},o.random=function(t,n){n=n||1;var r=2*e()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t},o.transformMat2=function(t,n,r){var e=n[0],a=n[1];return t[0]=r[0]*e+r[2]*a,t[1]=r[1]*e+r[3]*a,t},o.transformMat2d=function(t,n,r){var e=n[0],a=n[1];return t[0]=r[0]*e+r[2]*a+r[4],t[1]=r[1]*e+r[3]*a+r[5],t},o.transformMat3=function(t,n,r){var e=n[0],a=n[1];return t[0]=r[0]*e+r[3]*a+r[6],t[1]=r[1]*e+r[4]*a+r[7],t},o.transformMat4=function(t,n,r){var e=n[0],a=n[1];return t[0]=r[0]*e+r[4]*a+r[12],t[1]=r[1]*e+r[5]*a+r[13],t},o.forEach=function(){var t=o.create();return function(n,r,e,a,u,o){var i,c;for(r||(r=2),e||(e=0),c=a?Math.min(a*r+e,n.length):n.length,i=e;c&gt;i;i+=r)t[0]=n[i],t[1]=n[i+1],u(t,t,o),n[i]=t[0],n[i+1]=t[1];return n}}(),o.str=function(t){return&quot;vec2(&quot;+t[0]+&quot;, &quot;+t[1]+&quot;)&quot;},&quot;undefined&quot;!=typeof t&amp;&amp;(t.vec2=o);var i={};i.create=function(){var t=new r(3);return t[0]=0,t[1]=0,t[2]=0,t},i.clone=function(t){var n=new r(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},i.fromValues=function(t,n,e){var a=new r(3);return a[0]=t,a[1]=n,a[2]=e,a},i.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},i.set=function(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t},i.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t},i.subtract=function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t},i.sub=i.subtract,i.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t},i.mul=i.multiply,i.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t},i.div=i.divide,i.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t},i.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t},i.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t},i.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t},i.distance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2];return Math.sqrt(r*r+e*e+a*a)},i.dist=i.distance,i.squaredDistance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2];return r*r+e*e+a*a},i.sqrDist=i.squaredDistance,i.length=function(t){var n=t[0],r=t[1],e=t[2];return Math.sqrt(n*n+r*r+e*e)},i.len=i.length,i.squaredLength=function(t){var n=t[0],r=t[1],e=t[2];return n*n+r*r+e*e},i.sqrLen=i.squaredLength,i.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},i.normalize=function(t,n){var r=n[0],e=n[1],a=n[2],u=r*r+e*e+a*a;return u&gt;0&amp;&amp;(u=1/Math.sqrt(u),t[0]=n[0]*u,t[1]=n[1]*u,t[2]=n[2]*u),t},i.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},i.cross=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=r[0],i=r[1],c=r[2];return t[0]=a*c-u*i,t[1]=u*o-e*c,t[2]=e*i-a*o,t},i.lerp=function(t,n,r,e){var a=n[0],u=n[1],o=n[2];return t[0]=a+e*(r[0]-a),t[1]=u+e*(r[1]-u),t[2]=o+e*(r[2]-o),t},i.random=function(t,n){n=n||1;var r=2*e()*Math.PI,a=2*e()-1,u=Math.sqrt(1-a*a)*n;return t[0]=Math.cos(r)*u,t[1]=Math.sin(r)*u,t[2]=a*n,t},i.transformMat4=function(t,n,r){var e=n[0],a=n[1],u=n[2];return t[0]=r[0]*e+r[4]*a+r[8]*u+r[12],t[1]=r[1]*e+r[5]*a+r[9]*u+r[13],t[2]=r[2]*e+r[6]*a+r[10]*u+r[14],t},i.transformMat3=function(t,n,r){var e=n[0],a=n[1],u=n[2];return t[0]=e*r[0]+a*r[3]+u*r[6],t[1]=e*r[1]+a*r[4]+u*r[7],t[2]=e*r[2]+a*r[5]+u*r[8],t},i.transformQuat=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=r[0],i=r[1],c=r[2],f=r[3],s=f*e+i*u-c*a,h=f*a+c*e-o*u,v=f*u+o*a-i*e,M=-o*e-i*a-c*u;return t[0]=s*f+M*-o+h*-c-v*-i,t[1]=h*f+M*-i+v*-o-s*-c,t[2]=v*f+M*-c+s*-i-h*-o,t},i.rotateX=function(t,n,r,e){var a=[],u=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],u[0]=a[0],u[1]=a[1]*Math.cos(e)-a[2]*Math.sin(e),u[2]=a[1]*Math.sin(e)+a[2]*Math.cos(e),t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},i.rotateY=function(t,n,r,e){var a=[],u=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],u[0]=a[2]*Math.sin(e)+a[0]*Math.cos(e),u[1]=a[1],u[2]=a[2]*Math.cos(e)-a[0]*Math.sin(e),t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},i.rotateZ=function(t,n,r,e){var a=[],u=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],u[0]=a[0]*Math.cos(e)-a[1]*Math.sin(e),u[1]=a[0]*Math.sin(e)+a[1]*Math.cos(e),u[2]=a[2],t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},i.forEach=function(){var t=i.create();return function(n,r,e,a,u,o){var i,c;for(r||(r=3),e||(e=0),c=a?Math.min(a*r+e,n.length):n.length,i=e;c&gt;i;i+=r)t[0]=n[i],t[1]=n[i+1],t[2]=n[i+2],u(t,t,o),n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2];return n}}(),i.str=function(t){return&quot;vec3(&quot;+t[0]+&quot;, &quot;+t[1]+&quot;, &quot;+t[2]+&quot;)&quot;},&quot;undefined&quot;!=typeof t&amp;&amp;(t.vec3=i);var c={};c.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},c.clone=function(t){var n=new r(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},c.fromValues=function(t,n,e,a){var u=new r(4);return u[0]=t,u[1]=n,u[2]=e,u[3]=a,u},c.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},c.set=function(t,n,r,e,a){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t},c.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},c.subtract=function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t},c.sub=c.subtract,c.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t},c.mul=c.multiply,c.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t},c.div=c.divide,c.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t},c.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t},c.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},c.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t},c.distance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2],u=n[3]-t[3];return Math.sqrt(r*r+e*e+a*a+u*u)},c.dist=c.distance,c.squaredDistance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2],u=n[3]-t[3];return r*r+e*e+a*a+u*u},c.sqrDist=c.squaredDistance,c.length=function(t){var n=t[0],r=t[1],e=t[2],a=t[3];return Math.sqrt(n*n+r*r+e*e+a*a)},c.len=c.length,c.squaredLength=function(t){var n=t[0],r=t[1],e=t[2],a=t[3];return n*n+r*r+e*e+a*a},c.sqrLen=c.squaredLength,c.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},c.normalize=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=r*r+e*e+a*a+u*u;return o&gt;0&amp;&amp;(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t[3]=n[3]*o),t},c.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},c.lerp=function(t,n,r,e){var a=n[0],u=n[1],o=n[2],i=n[3];return t[0]=a+e*(r[0]-a),t[1]=u+e*(r[1]-u),t[2]=o+e*(r[2]-o),t[3]=i+e*(r[3]-i),t},c.random=function(t,n){return n=n||1,t[0]=e(),t[1]=e(),t[2]=e(),t[3]=e(),c.normalize(t,t),c.scale(t,t,n),t},c.transformMat4=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3];return t[0]=r[0]*e+r[4]*a+r[8]*u+r[12]*o,t[1]=r[1]*e+r[5]*a+r[9]*u+r[13]*o,t[2]=r[2]*e+r[6]*a+r[10]*u+r[14]*o,t[3]=r[3]*e+r[7]*a+r[11]*u+r[15]*o,t},c.transformQuat=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=r[0],i=r[1],c=r[2],f=r[3],s=f*e+i*u-c*a,h=f*a+c*e-o*u,v=f*u+o*a-i*e,M=-o*e-i*a-c*u;return t[0]=s*f+M*-o+h*-c-v*-i,t[1]=h*f+M*-i+v*-o-s*-c,t[2]=v*f+M*-c+s*-i-h*-o,t},c.forEach=function(){var t=c.create();return function(n,r,e,a,u,o){var i,c;for(r||(r=4),e||(e=0),c=a?Math.min(a*r+e,n.length):n.length,i=e;c&gt;i;i+=r)t[0]=n[i],t[1]=n[i+1],t[2]=n[i+2],t[3]=n[i+3],u(t,t,o),n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2],n[i+3]=t[3];return n}}(),c.str=function(t){return&quot;vec4(&quot;+t[0]+&quot;, &quot;+t[1]+&quot;, &quot;+t[2]+&quot;, &quot;+t[3]+&quot;)&quot;},&quot;undefined&quot;!=typeof t&amp;&amp;(t.vec4=c);var f={};f.create=function(){var t=new r(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},f.clone=function(t){var n=new r(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},f.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},f.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},f.transpose=function(t,n){if(t===n){var r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},f.invert=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=r*u-a*e;return o?(o=1/o,t[0]=u*o,t[1]=-e*o,t[2]=-a*o,t[3]=r*o,t):null},f.adjoint=function(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t},f.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},f.multiply=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*i+u*c,t[1]=a*i+o*c,t[2]=e*f+u*s,t[3]=a*f+o*s,t},f.mul=f.multiply,f.rotate=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c+u*i,t[1]=a*c+o*i,t[2]=e*-i+u*c,t[3]=a*-i+o*c,t},f.scale=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=r[0],c=r[1];return t[0]=e*i,t[1]=a*i,t[2]=u*c,t[3]=o*c,t},f.str=function(t){return&quot;mat2(&quot;+t[0]+&quot;, &quot;+t[1]+&quot;, &quot;+t[2]+&quot;, &quot;+t[3]+&quot;)&quot;},f.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},f.LDU=function(t,n,r,e){return t[2]=e[2]/e[0],r[0]=e[0],r[1]=e[1],r[3]=e[3]-t[2]*r[1],[t,n,r]},&quot;undefined&quot;!=typeof t&amp;&amp;(t.mat2=f);var s={};s.create=function(){var t=new r(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},s.clone=function(t){var n=new r(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},s.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},s.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},s.invert=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=r*u-e*a;return c?(c=1/c,t[0]=u*c,t[1]=-e*c,t[2]=-a*c,t[3]=r*c,t[4]=(a*i-u*o)*c,t[5]=(e*o-r*i)*c,t):null},s.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},s.multiply=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=r[0],s=r[1],h=r[2],v=r[3],M=r[4],l=r[5];return t[0]=e*f+u*s,t[1]=a*f+o*s,t[2]=e*h+u*v,t[3]=a*h+o*v,t[4]=e*M+u*l+i,t[5]=a*M+o*l+c,t},s.mul=s.multiply,s.rotate=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=Math.sin(r),s=Math.cos(r);return t[0]=e*s+u*f,t[1]=a*s+o*f,t[2]=e*-f+u*s,t[3]=a*-f+o*s,t[4]=i,t[5]=c,t},s.scale=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=r[0],s=r[1];return t[0]=e*f,t[1]=a*f,t[2]=u*s,t[3]=o*s,t[4]=i,t[5]=c,t},s.translate=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=r[0],s=r[1];return t[0]=e,t[1]=a,t[2]=u,t[3]=o,t[4]=e*f+u*s+i,t[5]=a*f+o*s+c,t},s.str=function(t){return&quot;mat2d(&quot;+t[0]+&quot;, &quot;+t[1]+&quot;, &quot;+t[2]+&quot;, &quot;+t[3]+&quot;, &quot;+t[4]+&quot;, &quot;+t[5]+&quot;)&quot;},s.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},&quot;undefined&quot;!=typeof t&amp;&amp;(t.mat2d=s);var h={};h.create=function(){var t=new r(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},h.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},h.clone=function(t){var n=new r(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},h.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},h.transpose=function(t,n){if(t===n){var r=n[1],e=n[2],a=n[5];t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=e,t[7]=a}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},h.invert=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=s*o-i*f,v=-s*u+i*c,M=f*u-o*c,l=r*h+e*v+a*M;return l?(l=1/l,t[0]=h*l,t[1]=(-s*e+a*f)*l,t[2]=(i*e-a*o)*l,t[3]=v*l,t[4]=(s*r-a*c)*l,t[5]=(-i*r+a*u)*l,t[6]=M*l,t[7]=(-f*r+e*c)*l,t[8]=(o*r-e*u)*l,t):null},h.adjoint=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8];return t[0]=o*s-i*f,t[1]=a*f-e*s,t[2]=e*i-a*o,t[3]=i*c-u*s,t[4]=r*s-a*c,t[5]=a*u-r*i,t[6]=u*f-o*c,t[7]=e*c-r*f,t[8]=r*o-e*u,t},h.determinant=function(t){var n=t[0],r=t[1],e=t[2],a=t[3],u=t[4],o=t[5],i=t[6],c=t[7],f=t[8];return n*(f*u-o*c)+r*(-f*a+o*i)+e*(c*a-u*i)},h.multiply=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],v=r[0],M=r[1],l=r[2],d=r[3],m=r[4],p=r[5],w=r[6],y=r[7],q=r[8];return t[0]=v*e+M*o+l*f,t[1]=v*a+M*i+l*s,t[2]=v*u+M*c+l*h,t[3]=d*e+m*o+p*f,t[4]=d*a+m*i+p*s,t[5]=d*u+m*c+p*h,t[6]=w*e+y*o+q*f,t[7]=w*a+y*i+q*s,t[8]=w*u+y*c+q*h,t},h.mul=h.multiply,h.translate=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],v=r[0],M=r[1];return t[0]=e,t[1]=a,t[2]=u,t[3]=o,t[4]=i,t[5]=c,t[6]=v*e+M*o+f,t[7]=v*a+M*i+s,t[8]=v*u+M*c+h,t},h.rotate=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],v=Math.sin(r),M=Math.cos(r);return t[0]=M*e+v*o,t[1]=M*a+v*i,t[2]=M*u+v*c,t[3]=M*o-v*e,t[4]=M*i-v*a,t[5]=M*c-v*u,t[6]=f,t[7]=s,t[8]=h,t},h.scale=function(t,n,r){var e=r[0],a=r[1];return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=a*n[3],t[4]=a*n[4],t[5]=a*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},h.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},h.fromQuat=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=r+r,i=e+e,c=a+a,f=r*o,s=e*o,h=e*i,v=a*o,M=a*i,l=a*c,d=u*o,m=u*i,p=u*c;return t[0]=1-h-l,t[3]=s-p,t[6]=v+m,t[1]=s+p,t[4]=1-f-l,t[7]=M-d,t[2]=v-m,t[5]=M+d,t[8]=1-f-h,t},h.normalFromMat4=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],v=n[10],M=n[11],l=n[12],d=n[13],m=n[14],p=n[15],w=r*i-e*o,y=r*c-a*o,q=r*f-u*o,g=e*c-a*i,x=e*f-u*i,b=a*f-u*c,A=s*d-h*l,L=s*m-v*l,D=s*p-M*l,z=h*m-v*d,V=h*p-M*d,j=v*p-M*m,I=w*j-y*V+q*z+g*D-x*L+b*A;return I?(I=1/I,t[0]=(i*j-c*V+f*z)*I,t[1]=(c*D-o*j-f*L)*I,t[2]=(o*V-i*D+f*A)*I,t[3]=(a*V-e*j-u*z)*I,t[4]=(r*j-a*D+u*L)*I,t[5]=(e*D-r*V-u*A)*I,t[6]=(d*b-m*x+p*g)*I,t[7]=(m*q-l*b-p*y)*I,t[8]=(l*x-d*q+p*w)*I,t):null},h.str=function(t){return&quot;mat3(&quot;+t[0]+&quot;, &quot;+t[1]+&quot;, &quot;+t[2]+&quot;, &quot;+t[3]+&quot;, &quot;+t[4]+&quot;, &quot;+t[5]+&quot;, &quot;+t[6]+&quot;, &quot;+t[7]+&quot;, &quot;+t[8]+&quot;)&quot;},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},&quot;undefined&quot;!=typeof t&amp;&amp;(t.mat3=h);var v={};v.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},v.clone=function(t){var n=new r(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},v.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},v.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},v.transpose=function(t,n){if(t===n){var r=n[1],e=n[2],a=n[3],u=n[6],o=n[7],i=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=u,t[11]=n[14],t[12]=a,t[13]=o,t[14]=i}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},v.invert=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],v=n[10],M=n[11],l=n[12],d=n[13],m=n[14],p=n[15],w=r*i-e*o,y=r*c-a*o,q=r*f-u*o,g=e*c-a*i,x=e*f-u*i,b=a*f-u*c,A=s*d-h*l,L=s*m-v*l,D=s*p-M*l,z=h*m-v*d,V=h*p-M*d,j=v*p-M*m,I=w*j-y*V+q*z+g*D-x*L+b*A;return I?(I=1/I,t[0]=(i*j-c*V+f*z)*I,t[1]=(a*V-e*j-u*z)*I,t[2]=(d*b-m*x+p*g)*I,t[3]=(v*x-h*b-M*g)*I,t[4]=(c*D-o*j-f*L)*I,t[5]=(r*j-a*D+u*L)*I,t[6]=(m*q-l*b-p*y)*I,t[7]=(s*b-v*q+M*y)*I,t[8]=(o*V-i*D+f*A)*I,t[9]=(e*D-r*V-u*A)*I,t[10]=(l*x-d*q+p*w)*I,t[11]=(h*q-s*x-M*w)*I,t[12]=(i*L-o*z-c*A)*I,t[13]=(r*z-e*L+a*A)*I,t[14]=(d*y-l*g-m*w)*I,t[15]=(s*g-h*y+v*w)*I,t):null},v.adjoint=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],v=n[10],M=n[11],l=n[12],d=n[13],m=n[14],p=n[15];return t[0]=i*(v*p-M*m)-h*(c*p-f*m)+d*(c*M-f*v),t[1]=-(e*(v*p-M*m)-h*(a*p-u*m)+d*(a*M-u*v)),t[2]=e*(c*p-f*m)-i*(a*p-u*m)+d*(a*f-u*c),t[3]=-(e*(c*M-f*v)-i*(a*M-u*v)+h*(a*f-u*c)),t[4]=-(o*(v*p-M*m)-s*(c*p-f*m)+l*(c*M-f*v)),t[5]=r*(v*p-M*m)-s*(a*p-u*m)+l*(a*M-u*v),t[6]=-(r*(c*p-f*m)-o*(a*p-u*m)+l*(a*f-u*c)),t[7]=r*(c*M-f*v)-o*(a*M-u*v)+s*(a*f-u*c),t[8]=o*(h*p-M*d)-s*(i*p-f*d)+l*(i*M-f*h),t[9]=-(r*(h*p-M*d)-s*(e*p-u*d)+l*(e*M-u*h)),t[10]=r*(i*p-f*d)-o*(e*p-u*d)+l*(e*f-u*i),t[11]=-(r*(i*M-f*h)-o*(e*M-u*h)+s*(e*f-u*i)),t[12]=-(o*(h*m-v*d)-s*(i*m-c*d)+l*(i*v-c*h)),t[13]=r*(h*m-v*d)-s*(e*m-a*d)+l*(e*v-a*h),t[14]=-(r*(i*m-c*d)-o*(e*m-a*d)+l*(e*c-a*i)),t[15]=r*(i*v-c*h)-o*(e*v-a*h)+s*(e*c-a*i),t},v.determinant=function(t){var n=t[0],r=t[1],e=t[2],a=t[3],u=t[4],o=t[5],i=t[6],c=t[7],f=t[8],s=t[9],h=t[10],v=t[11],M=t[12],l=t[13],d=t[14],m=t[15],p=n*o-r*u,w=n*i-e*u,y=n*c-a*u,q=r*i-e*o,g=r*c-a*o,x=e*c-a*i,b=f*l-s*M,A=f*d-h*M,L=f*m-v*M,D=s*d-h*l,z=s*m-v*l,V=h*m-v*d;return p*V-w*z+y*D+q*L-g*A+x*b},v.multiply=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],v=n[9],M=n[10],l=n[11],d=n[12],m=n[13],p=n[14],w=n[15],y=r[0],q=r[1],g=r[2],x=r[3];return t[0]=y*e+q*i+g*h+x*d,t[1]=y*a+q*c+g*v+x*m,t[2]=y*u+q*f+g*M+x*p,t[3]=y*o+q*s+g*l+x*w,y=r[4],q=r[5],g=r[6],x=r[7],t[4]=y*e+q*i+g*h+x*d,t[5]=y*a+q*c+g*v+x*m,t[6]=y*u+q*f+g*M+x*p,t[7]=y*o+q*s+g*l+x*w,y=r[8],q=r[9],g=r[10],x=r[11],t[8]=y*e+q*i+g*h+x*d,t[9]=y*a+q*c+g*v+x*m,t[10]=y*u+q*f+g*M+x*p,t[11]=y*o+q*s+g*l+x*w,y=r[12],q=r[13],g=r[14],x=r[15],t[12]=y*e+q*i+g*h+x*d,t[13]=y*a+q*c+g*v+x*m,t[14]=y*u+q*f+g*M+x*p,t[15]=y*o+q*s+g*l+x*w,t},v.mul=v.multiply,v.translate=function(t,n,r){var e,a,u,o,i,c,f,s,h,v,M,l,d=r[0],m=r[1],p=r[2];return n===t?(t[12]=n[0]*d+n[4]*m+n[8]*p+n[12],t[13]=n[1]*d+n[5]*m+n[9]*p+n[13],t[14]=n[2]*d+n[6]*m+n[10]*p+n[14],t[15]=n[3]*d+n[7]*m+n[11]*p+n[15]):(e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],v=n[9],M=n[10],l=n[11],t[0]=e,t[1]=a,t[2]=u,t[3]=o,t[4]=i,t[5]=c,t[6]=f,t[7]=s,t[8]=h,t[9]=v,t[10]=M,t[11]=l,t[12]=e*d+i*m+h*p+n[12],t[13]=a*d+c*m+v*p+n[13],t[14]=u*d+f*m+M*p+n[14],t[15]=o*d+s*m+l*p+n[15]),t},v.scale=function(t,n,r){var e=r[0],a=r[1],u=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*u,t[9]=n[9]*u,t[10]=n[10]*u,t[11]=n[11]*u,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},v.rotate=function(t,r,e,a){var u,o,i,c,f,s,h,v,M,l,d,m,p,w,y,q,g,x,b,A,L,D,z,V,j=a[0],I=a[1],P=a[2],Q=Math.sqrt(j*j+I*I+P*P);return Math.abs(Q)&lt;n?null:(Q=1/Q,j*=Q,I*=Q,P*=Q,u=Math.sin(e),o=Math.cos(e),i=1-o,c=r[0],f=r[1],s=r[2],h=r[3],v=r[4],M=r[5],l=r[6],d=r[7],m=r[8],p=r[9],w=r[10],y=r[11],q=j*j*i+o,g=I*j*i+P*u,x=P*j*i-I*u,b=j*I*i-P*u,A=I*I*i+o,L=P*I*i+j*u,D=j*P*i+I*u,z=I*P*i-j*u,V=P*P*i+o,t[0]=c*q+v*g+m*x,t[1]=f*q+M*g+p*x,t[2]=s*q+l*g+w*x,t[3]=h*q+d*g+y*x,t[4]=c*b+v*A+m*L,t[5]=f*b+M*A+p*L,t[6]=s*b+l*A+w*L,t[7]=h*b+d*A+y*L,t[8]=c*D+v*z+m*V,t[9]=f*D+M*z+p*V,t[10]=s*D+l*z+w*V,t[11]=h*D+d*z+y*V,r!==t&amp;&amp;(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},v.rotateX=function(t,n,r){var e=Math.sin(r),a=Math.cos(r),u=n[4],o=n[5],i=n[6],c=n[7],f=n[8],s=n[9],h=n[10],v=n[11];return n!==t&amp;&amp;(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=u*a+f*e,t[5]=o*a+s*e,t[6]=i*a+h*e,t[7]=c*a+v*e,t[8]=f*a-u*e,t[9]=s*a-o*e,t[10]=h*a-i*e,t[11]=v*a-c*e,t},v.rotateY=function(t,n,r){var e=Math.sin(r),a=Math.cos(r),u=n[0],o=n[1],i=n[2],c=n[3],f=n[8],s=n[9],h=n[10],v=n[11];return n!==t&amp;&amp;(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=u*a-f*e,t[1]=o*a-s*e,t[2]=i*a-h*e,t[3]=c*a-v*e,t[8]=u*e+f*a,t[9]=o*e+s*a,t[10]=i*e+h*a,t[11]=c*e+v*a,t},v.rotateZ=function(t,n,r){var e=Math.sin(r),a=Math.cos(r),u=n[0],o=n[1],i=n[2],c=n[3],f=n[4],s=n[5],h=n[6],v=n[7];return n!==t&amp;&amp;(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=u*a+f*e,t[1]=o*a+s*e,t[2]=i*a+h*e,t[3]=c*a+v*e,t[4]=f*a-u*e,t[5]=s*a-o*e,t[6]=h*a-i*e,t[7]=v*a-c*e,t},v.fromRotationTranslation=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=e+e,c=a+a,f=u+u,s=e*i,h=e*c,v=e*f,M=a*c,l=a*f,d=u*f,m=o*i,p=o*c,w=o*f;return t[0]=1-(M+d),t[1]=h+w,t[2]=v-p,t[3]=0,t[4]=h-w,t[5]=1-(s+d),t[6]=l+m,t[7]=0,t[8]=v+p,t[9]=l-m,t[10]=1-(s+M),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},v.fromQuat=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=r+r,i=e+e,c=a+a,f=r*o,s=e*o,h=e*i,v=a*o,M=a*i,l=a*c,d=u*o,m=u*i,p=u*c;return t[0]=1-h-l,t[1]=s+p,t[2]=v-m,t[3]=0,t[4]=s-p,t[5]=1-f-l,t[6]=M+d,t[7]=0,t[8]=v+m,t[9]=M-d,t[10]=1-f-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},v.frustum=function(t,n,r,e,a,u,o){var i=1/(r-n),c=1/(a-e),f=1/(u-o);return t[0]=2*u*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*u*c,t[6]=0,t[7]=0,t[8]=(r+n)*i,t[9]=(a+e)*c,t[10]=(o+u)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*u*2*f,t[15]=0,t},v.perspective=function(t,n,r,e,a){var u=1/Math.tan(n/2),o=1/(e-a);return t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+e)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*e*o,t[15]=0,t},v.ortho=function(t,n,r,e,a,u,o){var i=1/(n-r),c=1/(e-a),f=1/(u-o);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(n+r)*i,t[13]=(a+e)*c,t[14]=(o+u)*f,t[15]=1,t},v.lookAt=function(t,r,e,a){var u,o,i,c,f,s,h,M,l,d,m=r[0],p=r[1],w=r[2],y=a[0],q=a[1],g=a[2],x=e[0],b=e[1],A=e[2];return Math.abs(m-x)&lt;n&amp;&amp;Math.abs(p-b)&lt;n&amp;&amp;Math.abs(w-A)&lt;n?v.identity(t):(h=m-x,M=p-b,l=w-A,d=1/Math.sqrt(h*h+M*M+l*l),h*=d,M*=d,l*=d,u=q*l-g*M,o=g*h-y*l,i=y*M-q*h,d=Math.sqrt(u*u+o*o+i*i),d?(d=1/d,u*=d,o*=d,i*=d):(u=0,o=0,i=0),c=M*i-l*o,f=l*u-h*i,s=h*o-M*u,d=Math.sqrt(c*c+f*f+s*s),d?(d=1/d,c*=d,f*=d,s*=d):(c=0,f=0,s=0),t[0]=u,t[1]=c,t[2]=h,t[3]=0,t[4]=o,t[5]=f,t[6]=M,t[7]=0,t[8]=i,t[9]=s,t[10]=l,t[11]=0,t[12]=-(u*m+o*p+i*w),t[13]=-(c*m+f*p+s*w),t[14]=-(h*m+M*p+l*w),t[15]=1,t)},v.str=function(t){return&quot;mat4(&quot;+t[0]+&quot;, &quot;+t[1]+&quot;, &quot;+t[2]+&quot;, &quot;+t[3]+&quot;, &quot;+t[4]+&quot;, &quot;+t[5]+&quot;, &quot;+t[6]+&quot;, &quot;+t[7]+&quot;, &quot;+t[8]+&quot;, &quot;+t[9]+&quot;, &quot;+t[10]+&quot;, &quot;+t[11]+&quot;, &quot;+t[12]+&quot;, &quot;+t[13]+&quot;, &quot;+t[14]+&quot;, &quot;+t[15]+&quot;)&quot;},v.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},&quot;undefined&quot;!=typeof t&amp;&amp;(t.mat4=v);var M={};M.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},M.rotationTo=function(){var t=i.create(),n=i.fromValues(1,0,0),r=i.fromValues(0,1,0);return function(e,a,u){var o=i.dot(a,u);return-.999999&gt;o?(i.cross(t,n,a),i.length(t)&lt;1e-6&amp;&amp;i.cross(t,r,a),i.normalize(t,t),M.setAxisAngle(e,t,Math.PI),e):o&gt;.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(i.cross(t,a,u),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+o,M.normalize(e,e))}}(),M.setAxes=function(){var t=h.create();return function(n,r,e,a){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],M.normalize(n,M.fromMat3(n,t))}}(),M.clone=c.clone,M.fromValues=c.fromValues,M.copy=c.copy,M.set=c.set,M.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},M.setAxisAngle=function(t,n,r){r=.5*r;var e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t},M.add=c.add,M.multiply=function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*s+o*i+a*f-u*c,t[1]=a*s+o*c+u*i-e*f,t[2]=u*s+o*f+e*c-a*i,t[3]=o*s-e*i-a*c-u*f,t},M.mul=M.multiply,M.scale=c.scale,M.rotateX=function(t,n,r){r*=.5;var e=n[0],a=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c+o*i,t[1]=a*c+u*i,t[2]=u*c-a*i,t[3]=o*c-e*i,t},M.rotateY=function(t,n,r){r*=.5;var e=n[0],a=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c-u*i,t[1]=a*c+o*i,t[2]=u*c+e*i,t[3]=o*c-a*i,t},M.rotateZ=function(t,n,r){r*=.5;var e=n[0],a=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c+a*i,t[1]=a*c-e*i,t[2]=u*c+o*i,t[3]=o*c-u*i,t},M.calculateW=function(t,n){var r=n[0],e=n[1],a=n[2];return t[0]=r,t[1]=e,t[2]=a,t[3]=-Math.sqrt(Math.abs(1-r*r-e*e-a*a)),t},M.dot=c.dot,M.lerp=c.lerp,M.slerp=function(t,n,r,e){var a,u,o,i,c,f=n[0],s=n[1],h=n[2],v=n[3],M=r[0],l=r[1],d=r[2],m=r[3];return u=f*M+s*l+h*d+v*m,0&gt;u&amp;&amp;(u=-u,M=-M,l=-l,d=-d,m=-m),1-u&gt;1e-6?(a=Math.acos(u),o=Math.sin(a),i=Math.sin((1-e)*a)/o,c=Math.sin(e*a)/o):(i=1-e,c=e),t[0]=i*f+c*M,t[1]=i*s+c*l,t[2]=i*h+c*d,t[3]=i*v+c*m,t},M.invert=function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=r*r+e*e+a*a+u*u,i=o?1/o:0;return t[0]=-r*i,t[1]=-e*i,t[2]=-a*i,t[3]=u*i,t},M.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},M.length=c.length,M.len=M.length,M.squaredLength=c.squaredLength,M.sqrLen=M.squaredLength,M.normalize=c.normalize,M.fromMat3=function(t,n){var r,e=n[0]+n[4]+n[8];if(e&gt;0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[7]-n[5])*r,t[1]=(n[2]-n[6])*r,t[2]=(n[3]-n[1])*r;else{var a=0;n[4]&gt;n[0]&amp;&amp;(a=1),n[8]&gt;n[3*a+a]&amp;&amp;(a=2);var u=(a+1)%3,o=(a+2)%3;r=Math.sqrt(n[3*a+a]-n[3*u+u]-n[3*o+o]+1),t[a]=.5*r,r=.5/r,t[3]=(n[3*o+u]-n[3*u+o])*r,t[u]=(n[3*u+a]+n[3*a+u])*r,t[o]=(n[3*o+a]+n[3*a+o])*r}return t},M.str=function(t){return&quot;quat(&quot;+t[0]+&quot;, &quot;+t[1]+&quot;, &quot;+t[2]+&quot;, &quot;+t[3]+&quot;)&quot;},&quot;undefined&quot;!=typeof t&amp;&amp;(t.quat=M)}(n.exports)}(this);
},{}],110:[function(require,module,exports){
    &quot;use strict&quot;;function constant(r){return function(){return r}}function interpolateNumber(r,t,n){return r*(1-n)+t*n}function interpolateArray(r,t,n){for(var e=[],o=0;o&lt;r.length;o++)e[o]=interpolateNumber(r[o],t[o],n);return e}exports.interpolated=function(r){if(!r.stops)return constant(r);var t=r.stops,n=r.base||1,e=Array.isArray(t[0][1])?interpolateArray:interpolateNumber;return function(r){for(var o,a,i=0;i&lt;t.length;i++){var u=t[i];if(u[0]&lt;=r&amp;&amp;(o=u),u[0]&gt;r){a=u;break}}if(o&amp;&amp;a){var s=a[0]-o[0],f=r-o[0],p=1===n?f/s:(Math.pow(n,f)-1)/(Math.pow(n,s)-1);return e(o[1],a[1],p)}return o?o[1]:a?a[1]:void 0}},exports[&quot;piecewise-constant&quot;]=function(r){if(!r.stops)return constant(r);var t=r.stops;return function(r){for(var n=0;n&lt;t.length;n++)if(t[n][0]&gt;r)return t[0===n?0:n-1][1];return t[t.length-1][1]}};
},{}],111:[function(require,module,exports){
    &quot;use strict&quot;;var reference=require(&quot;../../reference/latest.js&quot;),validate=require(&quot;./parsed&quot;);module.exports=function(e){return validate(e,reference)};
},{&quot;../../reference/latest.js&quot;:113,&quot;./parsed&quot;:112}],112:[function(require,module,exports){
    &quot;use strict&quot;;function typeof_(e){return e instanceof Number?&quot;number&quot;:e instanceof String?&quot;string&quot;:e instanceof Boolean?&quot;boolean&quot;:Array.isArray(e)?&quot;array&quot;:null===e?&quot;null&quot;:typeof e}function unbundle(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}var parseCSSColor=require(&quot;csscolorparser&quot;).parseCSSColor,format=require(&quot;util&quot;).format;module.exports=function(e,r){function t(e,r){var t={message:(e?e+&quot;: &quot;:&quot;&quot;)+format.apply(format,Array.prototype.slice.call(arguments,2))};null!==r&amp;&amp;void 0!==r&amp;&amp;r.__line__&amp;&amp;(t.line=r.__line__),s.push(t)}function n(e,o,i){var s=typeof_(o);if(&quot;string&quot;===s&amp;&amp;&quot;@&quot;===o[0]){if(!(o in a))return t(e,o,&#039;constant &quot;%s&quot; not found&#039;,o);o=a[o],s=typeof_(o)}if(i[&quot;function&quot;]&amp;&amp;&quot;object&quot;===s)return n[&quot;function&quot;](e,o,i);if(i.type){var u=n[i.type];if(u)return u(e,o,i);i=r[i.type]}n.object(e,o,i)}function o(e){return function(r,n,o){var a=typeof_(n);a!==e&amp;&amp;t(r,n,&quot;%s expected, %s found&quot;,e,a),&quot;minimum&quot;in o&amp;&amp;n&lt;o.minimum&amp;&amp;t(r,n,&quot;%s is less than the minimum value %s&quot;,n,o.minimum),&quot;maximum&quot;in o&amp;&amp;n&gt;o.maximum&amp;&amp;t(r,n,&quot;%s is greater than the maximum value %s&quot;,n,o.maximum)}}var a=e.constants||{},i={},s=[];return n.constants=function(e,r){var n=typeof_(r);if(&quot;object&quot;!==n)return t(e,r,&quot;object expected, %s found&quot;,n);for(var o in r)&quot;@&quot;!==o[0]&amp;&amp;t(e+&quot;.&quot;+o,r[o],&#039;constants must start with &quot;@&quot;&#039;)},n.source=function(e,o){if(!o.type)return void t(e,o,&#039;&quot;type&quot; is required&#039;);var a=unbundle(o.type);switch(a){case&quot;vector&quot;:case&quot;raster&quot;:if(n.object(e,o,r.source_tile),&quot;url&quot;in o)for(var i in o)[&quot;type&quot;,&quot;url&quot;,&quot;tileSize&quot;].indexOf(i)&lt;0&amp;&amp;t(e+&quot;.&quot;+i,o[i],&#039;a source with a &quot;url&quot; property may not include a &quot;%s&quot; property&#039;,i);break;case&quot;geojson&quot;:n.object(e,o,r.source_geojson);break;case&quot;video&quot;:n.object(e,o,r.source_video);break;default:n[&quot;enum&quot;](e+&quot;.type&quot;,o.type,{values:[&quot;vector&quot;,&quot;raster&quot;,&quot;geojson&quot;,&quot;video&quot;]})}},n.layer=function(o,a){a.type||a.ref||t(o,a,&#039;either &quot;type&quot; or &quot;ref&quot; is required&#039;);var s=unbundle(a.type),u=unbundle(a.ref);if(a.id&amp;&amp;(i[a.id]?t(o,a.id,&#039;duplicate layer id &quot;%s&quot;, previously used at line %d&#039;,a.id,i[a.id]):i[a.id]=a.id.__line__),&quot;ref&quot;in a){[&quot;type&quot;,&quot;source&quot;,&quot;source-layer&quot;,&quot;filter&quot;,&quot;layout&quot;].forEach(function(e){e in a&amp;&amp;t(o,a[e],&#039;&quot;%s&quot; is prohibited for ref layers&#039;,e)});var c;e.layers.forEach(function(e){e.id==u&amp;&amp;(c=e)}),c?c.ref?t(o,a.ref,&quot;ref cannot reference another ref layer&quot;):s=c.type:t(o,a.ref,&#039;ref layer &quot;%s&quot; not found&#039;,u)}else if(&quot;background&quot;!==s)if(a.source){var f=e.sources[a.source];f?&quot;vector&quot;==f.type&amp;&amp;&quot;raster&quot;==s?t(o,a.source,&#039;layer &quot;%s&quot; requires a raster source&#039;,a.id):&quot;raster&quot;==f.type&amp;&amp;&quot;raster&quot;!=s&amp;&amp;t(o,a.source,&#039;layer &quot;%s&quot; requires a vector source&#039;,a.id):t(o,a.source,&#039;source &quot;%s&quot; not found&#039;,a.source)}else t(o,a,&#039;missing required property &quot;source&quot;&#039;);n.object(o,a,r.layer,{filter:n.filter,layout:function(e,t){var o=r[&quot;layout_&quot;+s];return s&amp;&amp;o&amp;&amp;n(e,t,o)},paint:function(e,t){var o=r[&quot;paint_&quot;+s];return s&amp;&amp;o&amp;&amp;n(e,t,o)}})},n.object=function(e,o,a,i){i=i||{};var s=typeof_(o);if(&quot;object&quot;!==s)return t(e,o,&quot;object expected, %s found&quot;,s);for(var u in o){var c=u.split(&quot;.&quot;)[0],f=a[c]||a[&quot;*&quot;],l=c.match(/^(.*)-transition$/);f?(i[c]||n)((e?e+&quot;.&quot;:e)+u,o[u],f):l&amp;&amp;a[l[1]]&amp;&amp;a[l[1]].transition?n((e?e+&quot;.&quot;:e)+u,o[u],r.transition):&quot;&quot;!==e&amp;&amp;1!==e.split(&quot;.&quot;).length&amp;&amp;t(e,o[u],&#039;unknown property &quot;%s&quot;&#039;,u)}for(var p in a)a[p].required&amp;&amp;void 0===a[p][&quot;default&quot;]&amp;&amp;void 0===o[p]&amp;&amp;t(e,o,&#039;missing required property &quot;%s&quot;&#039;,p)},n.array=function(r,o,a,i){if(&quot;array&quot;!==typeof_(o))return t(r,o,&quot;array expected, %s found&quot;,typeof_(o));if(a.length&amp;&amp;o.length!==a.length)return t(r,o,&quot;array length %d expected, length %d found&quot;,a.length,o.length);var s={type:a.value};e.version&lt;7&amp;&amp;(s[&quot;function&quot;]=a[&quot;function&quot;]),&quot;object&quot;===typeof_(a.value)&amp;&amp;(s=a.value);for(var u=0;u&lt;o.length;u++)(i||n)(r+&quot;[&quot;+u+&quot;]&quot;,o[u],s)},n.filter=function(e,o){var a;if(&quot;array&quot;!==typeof_(o))return t(e,o,&quot;array expected, %s found&quot;,typeof_(o));if(o.length&lt;1)return t(e,o,&quot;filter array must have at least 1 element&quot;);switch(n[&quot;enum&quot;](e+&quot;[0]&quot;,o[0],r.filter_operator),unbundle(o[0])){case&quot;&lt;&quot;:case&quot;&lt;=&quot;:case&quot;&gt;&quot;:case&quot;&gt;=&quot;:o.length&gt;=2&amp;&amp;&quot;$type&quot;==o[1]&amp;&amp;t(e,o,&#039;&quot;$type&quot; cannot be use with operator &quot;%s&quot;&#039;,o[0]);case&quot;==&quot;:case&quot;!=&quot;:3!=o.length&amp;&amp;t(e,o,&#039;filter array for operator &quot;%s&quot; must have 3 elements&#039;,o[0]);case&quot;in&quot;:case&quot;!in&quot;:o.length&gt;=2&amp;&amp;(a=typeof_(o[1]),&quot;string&quot;!==a?t(e+&quot;[1]&quot;,o[1],&quot;string expected, %s found&quot;,a):&quot;@&quot;===o[1][0]&amp;&amp;t(e+&quot;[1]&quot;,o[1],&quot;filter key cannot be a constant&quot;));for(var i=2;i&lt;o.length;i++)a=typeof_(o[i]),&quot;$type&quot;==o[1]?n[&quot;enum&quot;](e+&quot;[&quot;+i+&quot;]&quot;,o[i],r.geometry_type):&quot;string&quot;===a&amp;&amp;&quot;@&quot;===o[i][0]?t(e+&quot;[&quot;+i+&quot;]&quot;,o[i],&quot;filter value cannot be a constant&quot;):&quot;string&quot;!==a&amp;&amp;&quot;number&quot;!==a&amp;&amp;&quot;boolean&quot;!==a&amp;&amp;t(e+&quot;[&quot;+i+&quot;]&quot;,o[i],&quot;string, number, or boolean expected, %s found&quot;,a);break;case&quot;any&quot;:case&quot;all&quot;:case&quot;none&quot;:for(i=1;i&lt;o.length;i++)n.filter(e+&quot;[&quot;+i+&quot;]&quot;,o[i])}},n[&quot;function&quot;]=function(e,o,a){n.object(e,o,r[&quot;function&quot;],{stops:function(e,r,o){var i=-(1/0);n.array(e,r,o,function(e,r){return&quot;array&quot;!==typeof_(r)?t(e,r,&quot;array expected, %s found&quot;,typeof_(r)):2!==r.length?t(e,r,&quot;array length %d expected, length %d found&quot;,2,r.length):(n(e+&quot;[0]&quot;,r[0],{type:&quot;number&quot;}),n(e+&quot;[1]&quot;,r[1],a),void(&quot;number&quot;===typeof_(r[0])&amp;&amp;(&quot;piecewise-constant&quot;===a[&quot;function&quot;]&amp;&amp;r[0]%1!==0&amp;&amp;t(e+&quot;[0]&quot;,r[0],&quot;zoom level for piecewise-constant functions must be an integer&quot;),r[0]&lt;i&amp;&amp;t(e+&quot;[0]&quot;,r[0],&quot;array stops must appear in ascending order&quot;),i=r[0])))}),&quot;array&quot;===typeof_(r)&amp;&amp;0===r.length&amp;&amp;t(e,r,&quot;array must have at least one stop&quot;)}})},n[&quot;enum&quot;]=function(e,r,n){-1===n.values.indexOf(unbundle(r))&amp;&amp;t(e,r,&quot;expected one of [%s], %s found&quot;,n.values.join(&quot;, &quot;),r)},n.color=function(e,r){var n=typeof_(r);&quot;string&quot;!==n?t(e,r,&quot;color expected, %s found&quot;,n):null===parseCSSColor(r)&amp;&amp;t(e,r,&#039;color expected, &quot;%s&quot; found&#039;,r)},n.number=o(&quot;number&quot;),n.string=o(&quot;string&quot;),n[&quot;boolean&quot;]=o(&quot;boolean&quot;),n[&quot;*&quot;]=function(){},n(&quot;&quot;,e,r.$root),s};
},{&quot;csscolorparser&quot;:101,&quot;util&quot;:100}],113:[function(require,module,exports){
    module.exports=require(&quot;./v7.json&quot;);
},{&quot;./v7.json&quot;:114}],114:[function(require,module,exports){
    module.exports={&quot;$version&quot;:7,&quot;$root&quot;:{&quot;version&quot;:{&quot;required&quot;:true,&quot;type&quot;:&quot;enum&quot;,&quot;values&quot;:[7],&quot;doc&quot;:&quot;Stylesheet version number. Must be 7.&quot;},&quot;name&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;doc&quot;:&quot;A human-readable name for the style.&quot;},&quot;constants&quot;:{&quot;type&quot;:&quot;constants&quot;,&quot;doc&quot;:&quot;An object of constants to be referenced in layers.&quot;},&quot;sources&quot;:{&quot;required&quot;:true,&quot;type&quot;:&quot;sources&quot;,&quot;doc&quot;:&quot;Data source specifications.&quot;},&quot;sprite&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;doc&quot;:&quot;A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended.&quot;},&quot;glyphs&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;doc&quot;:&quot;A URL template for loading signed-distance-field glyph sets in PBF format. Valid tokens are {fontstack} and {range}.&quot;},&quot;transition&quot;:{&quot;type&quot;:&quot;transition&quot;,&quot;doc&quot;:&quot;A global transition definition to use as a default across properties.&quot;},&quot;layers&quot;:{&quot;required&quot;:true,&quot;type&quot;:&quot;array&quot;,&quot;value&quot;:&quot;layer&quot;,&quot;doc&quot;:&quot;Layers will be drawn in the order of this array.&quot;}},&quot;constants&quot;:{&quot;*&quot;:{&quot;type&quot;:&quot;*&quot;,&quot;doc&quot;:&quot;A constant that will be replaced verbatim in the referencing place. This can be anything, including objects and arrays. All variable names must be prefixed with an `@` symbol.&quot;}},&quot;sources&quot;:{&quot;*&quot;:{&quot;type&quot;:&quot;source&quot;,&quot;doc&quot;:&quot;Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For GeoJSON and video sources, a URL must be provided.&quot;}},&quot;source&quot;:[&quot;source_tile&quot;,&quot;source_geojson&quot;,&quot;source_video&quot;],&quot;source_tile&quot;:{&quot;type&quot;:{&quot;required&quot;:true,&quot;type&quot;:&quot;enum&quot;,&quot;values&quot;:[&quot;vector&quot;,&quot;raster&quot;],&quot;doc&quot;:&quot;The data type of the source.&quot;},&quot;url&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;doc&quot;:&quot;A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://&lt;mapid&gt;`.&quot;},&quot;tiles&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;value&quot;:&quot;string&quot;,&quot;doc&quot;:&quot;An array of one or more tile source URLs, as in the TileJSON spec.&quot;},&quot;minzoom&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;doc&quot;:&quot;Minimum zoom level for which tiles are available, as in the TileJSON spec.&quot;},&quot;maxzoom&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:22,&quot;doc&quot;:&quot;Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels.&quot;},&quot;tileSize&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:512,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;The minimum visual size to display tiles for this layer. Only configurable for raster layers.&quot;},&quot;*&quot;:{&quot;type&quot;:&quot;*&quot;,&quot;doc&quot;:&quot;Other keys to configure the data source.&quot;}},&quot;source_geojson&quot;:{&quot;type&quot;:{&quot;required&quot;:true,&quot;type&quot;:&quot;enum&quot;,&quot;values&quot;:[&quot;geojson&quot;]},&quot;data&quot;:{&quot;type&quot;:&quot;*&quot;}},&quot;source_video&quot;:{&quot;type&quot;:{&quot;required&quot;:true,&quot;type&quot;:&quot;enum&quot;,&quot;values&quot;:[&quot;video&quot;]},&quot;url&quot;:{&quot;required&quot;:true,&quot;type&quot;:&quot;array&quot;,&quot;value&quot;:&quot;string&quot;,&quot;doc&quot;:&quot;URLs to video content in order of preferred format.&quot;},&quot;coordinates&quot;:{&quot;required&quot;:true,&quot;type&quot;:&quot;array&quot;,&quot;length&quot;:4,&quot;value&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;length&quot;:2,&quot;value&quot;:&quot;number&quot;}}},&quot;layer&quot;:{&quot;id&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;doc&quot;:&quot;Unique layer name.&quot;},&quot;type&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;values&quot;:[&quot;fill&quot;,&quot;line&quot;,&quot;symbol&quot;,&quot;raster&quot;,&quot;background&quot;],&quot;doc&quot;:&quot;Rendering type of this layer.&quot;},&quot;ref&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;doc&quot;:&quot;References another layer to copy `type`, `source`, `source-layer`, `minzoom`, `maxzoom`, `filter`, and `layout` properties from. This allows the layers to share processing and be more efficient.&quot;},&quot;source&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;doc&quot;:&quot;Name of a source description to be used for this layer.&quot;},&quot;source-layer&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;doc&quot;:&quot;Layer to use from a vector tile source. Required if the source supports multiple layers.&quot;},&quot;minzoom&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;minimum&quot;:0,&quot;maximum&quot;:22,&quot;doc&quot;:&quot;The minimum zoom level on which the layer gets parsed and appears on.&quot;},&quot;maxzoom&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;minimum&quot;:0,&quot;maximum&quot;:22,&quot;doc&quot;:&quot;The maximum zoom level on which the layer gets parsed and appears on.&quot;},&quot;interactive&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;doc&quot;:&quot;Enable querying of feature data from this layer for interactivity.&quot;,&quot;default&quot;:false},&quot;filter&quot;:{&quot;type&quot;:&quot;filter&quot;,&quot;doc&quot;:&quot;A expression specifying conditions on source features. Only features that match the filter are displayed.&quot;},&quot;layout&quot;:{&quot;type&quot;:&quot;layout&quot;,&quot;doc&quot;:&quot;Layout properties for the layer.&quot;},&quot;paint&quot;:{&quot;type&quot;:&quot;paint&quot;,&quot;doc&quot;:&quot;Default paint properties for this layer.&quot;},&quot;paint.*&quot;:{&quot;type&quot;:&quot;paint&quot;,&quot;doc&quot;:&quot;Class-specific paint properties for this layer. The class name is the part after the first dot.&quot;}},&quot;layout&quot;:[&quot;layout_fill&quot;,&quot;layout_line&quot;,&quot;layout_symbol&quot;,&quot;layout_raster&quot;,&quot;layout_background&quot;],&quot;layout_background&quot;:{&quot;visibility&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;visible&quot;,&quot;none&quot;],&quot;default&quot;:&quot;visible&quot;,&quot;doc&quot;:&quot;The display of this layer. `none` hides this layer.&quot;}},&quot;layout_fill&quot;:{&quot;visibility&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;visible&quot;,&quot;none&quot;],&quot;default&quot;:&quot;visible&quot;,&quot;doc&quot;:&quot;The display of this layer. `none` hides this layer.&quot;}},&quot;layout_line&quot;:{&quot;line-cap&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;butt&quot;,&quot;round&quot;,&quot;square&quot;],&quot;default&quot;:&quot;butt&quot;,&quot;doc&quot;:&quot;The display of line endings.&quot;},&quot;line-join&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;bevel&quot;,&quot;round&quot;,&quot;miter&quot;],&quot;default&quot;:&quot;miter&quot;,&quot;doc&quot;:&quot;The display of lines when joining.&quot;},&quot;line-miter-limit&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:2,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;Used to automatically convert miter joins to bevel joins for sharp angles.&quot;,&quot;requires&quot;:[{&quot;line-join&quot;:&quot;miter&quot;}]},&quot;line-round-limit&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:1,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;Used to automatically convert round joins to miter joins for shallow angles.&quot;,&quot;requires&quot;:[{&quot;line-join&quot;:&quot;round&quot;}]},&quot;visibility&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;visible&quot;,&quot;none&quot;],&quot;default&quot;:&quot;visible&quot;,&quot;doc&quot;:&quot;The display of this layer. `none` hides this layer.&quot;}},&quot;layout_symbol&quot;:{&quot;symbol-placement&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;point&quot;,&quot;line&quot;],&quot;default&quot;:&quot;point&quot;,&quot;doc&quot;:&quot;Label placement relative to its geometry. `line` can only be used on LineStrings and Polygons.&quot;},&quot;symbol-min-distance&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:250,&quot;minimum&quot;:1,&quot;function&quot;:&quot;interpolated&quot;,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;Minimum distance between two symbol anchors.&quot;,&quot;requires&quot;:[{&quot;symbol-placement&quot;:&quot;line&quot;}]},&quot;symbol-avoid-edges&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:false,&quot;doc&quot;:&quot;If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don&#039;t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer.&quot;},&quot;icon-allow-overlap&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:false,&quot;doc&quot;:&quot;If true, the icon will be visible even if it collides with other icons and text.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-ignore-placement&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:false,&quot;doc&quot;:&quot;If true, the icon won&#039;t affect placement of other icons and text.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-optional&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:false,&quot;doc&quot;:&quot;If true, text can be shown without its corresponding icon.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;,&quot;text-field&quot;]},&quot;icon-rotation-alignment&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;map&quot;,&quot;viewport&quot;],&quot;default&quot;:&quot;viewport&quot;,&quot;doc&quot;:&quot;Orientation of icon when map is rotated.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-max-size&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:1,&quot;minimum&quot;:0,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;The maximum factor to scale the icon.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-image&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;doc&quot;:&quot;A string with {tokens} replaced, referencing the data property to pull from.&quot;,&quot;tokens&quot;:true},&quot;icon-rotate&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;period&quot;:360,&quot;function&quot;:&quot;interpolated&quot;,&quot;units&quot;:&quot;degrees&quot;,&quot;doc&quot;:&quot;Rotates the icon clockwise.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-padding&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:2,&quot;minimum&quot;:0,&quot;function&quot;:&quot;interpolated&quot;,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;Padding value around icon bounding box to avoid icon collisions.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-keep-upright&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:false,&quot;doc&quot;:&quot;If true, the icon may be flipped to prevent it from being rendered upside-down&quot;,&quot;requires&quot;:[&quot;icon-image&quot;,{&quot;icon-rotation-alignment&quot;:&quot;map&quot;}]},&quot;icon-offset&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;value&quot;:&quot;number&quot;,&quot;length&quot;:2,&quot;default&quot;:[0,0],&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;Icon&#039;s offset distance. Values are [x, y] where negatives indicate left and up, respectively.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;text-rotation-alignment&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;map&quot;,&quot;viewport&quot;],&quot;default&quot;:&quot;viewport&quot;,&quot;doc&quot;:&quot;Orientation of icon or text when map is rotated.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-field&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:&quot;&quot;,&quot;tokens&quot;:true,&quot;doc&quot;:&quot;Value to use for a text label. Feature properties are specified using tokens like {field_name}.&quot;},&quot;text-font&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:&quot;Open Sans Regular, Arial Unicode MS Regular&quot;,&quot;doc&quot;:&quot;Font stack to use for displaying text.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-max-size&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:16,&quot;minimum&quot;:0,&quot;units&quot;:&quot;pixels&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;The maximum size text will be laid out, to calculate collisions with.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-max-width&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:15,&quot;minimum&quot;:0,&quot;units&quot;:&quot;em&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;The maximum line width for text wrapping.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-line-height&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:1.2,&quot;units&quot;:&quot;em&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;Text leading value for multi-line text.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-letter-spacing&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;units&quot;:&quot;em&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;Text kerning value.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-justify&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;left&quot;,&quot;center&quot;,&quot;right&quot;],&quot;default&quot;:&quot;center&quot;,&quot;doc&quot;:&quot;Text justification options.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-anchor&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;center&quot;,&quot;left&quot;,&quot;right&quot;,&quot;top&quot;,&quot;bottom&quot;,&quot;top-left&quot;,&quot;top-right&quot;,&quot;bottom-left&quot;,&quot;bottom-right&quot;],&quot;default&quot;:&quot;center&quot;,&quot;doc&quot;:&quot;Which part of the text to place closest to the anchor.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-max-angle&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:45,&quot;units&quot;:&quot;degrees&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;Maximum angle change between adjacent characters.&quot;,&quot;requires&quot;:[&quot;text-field&quot;,{&quot;symbol-placement&quot;:&quot;line&quot;}]},&quot;text-rotate&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;period&quot;:360,&quot;units&quot;:&quot;degrees&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;Rotates the text clockwise.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-padding&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:2,&quot;minimum&quot;:0,&quot;units&quot;:&quot;pixels&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;Padding value around text bounding box to avoid label collisions.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-keep-upright&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:true,&quot;doc&quot;:&quot;If true, the text may be flipped vertically to prevent it from being rendered upside-down.&quot;,&quot;requires&quot;:[&quot;text-field&quot;,{&quot;text-rotation-alignment&quot;:&quot;map&quot;}]},&quot;text-transform&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;none&quot;,&quot;uppercase&quot;,&quot;lowercase&quot;],&quot;default&quot;:&quot;none&quot;,&quot;doc&quot;:&quot;Specifies how to capitalize text, similar to the CSS `text-transform` property.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-offset&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;doc&quot;:&quot;Specifies the distance that text is offset from its anchor horizontally and vertically.&quot;,&quot;value&quot;:&quot;number&quot;,&quot;units&quot;:&quot;ems&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;length&quot;:2,&quot;default&quot;:[0,0],&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-allow-overlap&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:false,&quot;doc&quot;:&quot;If true, the text will be visible even if it collides with other icons and labels.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-ignore-placement&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:false,&quot;doc&quot;:&quot;If true, the text won&#039;t affect placement of other icons and labels.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-optional&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:false,&quot;doc&quot;:&quot;If true, icons can be shown without their corresponding text.&quot;,&quot;requires&quot;:[&quot;text-field&quot;,&quot;icon-image&quot;]},&quot;visibility&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;visible&quot;,&quot;none&quot;],&quot;default&quot;:&quot;visible&quot;,&quot;doc&quot;:&quot;The display of this layer. `none` hides this layer.&quot;}},&quot;layout_raster&quot;:{&quot;visibility&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;visible&quot;,&quot;none&quot;],&quot;default&quot;:&quot;visible&quot;,&quot;doc&quot;:&quot;The display of this layer. `none` hides this layer.&quot;}},&quot;filter&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;value&quot;:&quot;*&quot;},&quot;filter_operator&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;values&quot;:[&quot;==&quot;,&quot;!=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;in&quot;,&quot;!in&quot;,&quot;all&quot;,&quot;any&quot;,&quot;none&quot;]},&quot;geometry_type&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;values&quot;:[&quot;Point&quot;,&quot;LineString&quot;,&quot;Polygon&quot;]},&quot;function&quot;:{&quot;stops&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;required&quot;:true,&quot;doc&quot;:&quot;An array of stops.&quot;,&quot;value&quot;:&quot;function_stop&quot;},&quot;base&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:1,&quot;minimum&quot;:0,&quot;doc&quot;:&quot;The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly.&quot;}},&quot;function_stop&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;minimum&quot;:0,&quot;maximum&quot;:22,&quot;value&quot;:[&quot;number&quot;,&quot;color&quot;],&quot;length&quot;:2,&quot;doc&quot;:&quot;Zoom level and value pair.&quot;},&quot;paint&quot;:[&quot;paint_fill&quot;,&quot;paint_line&quot;,&quot;paint_symbol&quot;,&quot;paint_raster&quot;,&quot;paint_background&quot;],&quot;paint_fill&quot;:{&quot;fill-antialias&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;default&quot;:true,&quot;doc&quot;:&quot;Whether or not the fill should be antialiased.&quot;},&quot;fill-opacity&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;default&quot;:1,&quot;minimum&quot;:0,&quot;maximum&quot;:1,&quot;doc&quot;:&quot;The opacity given to the fill color.&quot;,&quot;transition&quot;:true},&quot;fill-color&quot;:{&quot;type&quot;:&quot;color&quot;,&quot;default&quot;:&quot;#000000&quot;,&quot;doc&quot;:&quot;The color of the fill.&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;requires&quot;:[{&quot;!&quot;:&quot;fill-image&quot;}]},&quot;fill-outline-color&quot;:{&quot;type&quot;:&quot;color&quot;,&quot;doc&quot;:&quot;The outline color of the fill. Matches the value of `fill-color` if unspecified.&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;requires&quot;:[{&quot;!&quot;:&quot;fill-image&quot;},{&quot;fill-antialias&quot;:true}]},&quot;fill-translate&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;value&quot;:&quot;number&quot;,&quot;length&quot;:2,&quot;default&quot;:[0,0],&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;The geometry&#039;s offset. Values are [x, y] where negatives indicate left and up, respectively.&quot;},&quot;fill-translate-anchor&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;map&quot;,&quot;viewport&quot;],&quot;doc&quot;:&quot;Control whether the translation is relative to the map (north) or viewport (screen)&quot;,&quot;default&quot;:&quot;map&quot;,&quot;requires&quot;:[&quot;fill-translate&quot;]},&quot;fill-image&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;transition&quot;:true,&quot;doc&quot;:&quot;Name of image in sprite to use for drawing image fills.&quot;}},&quot;paint_line&quot;:{&quot;line-opacity&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;doc&quot;:&quot;The opacity at which the line will be drawn.&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;default&quot;:1,&quot;minimum&quot;:0,&quot;maximum&quot;:1,&quot;transition&quot;:true},&quot;line-color&quot;:{&quot;type&quot;:&quot;color&quot;,&quot;doc&quot;:&quot;The color with which the line will be drawn.&quot;,&quot;default&quot;:&quot;#000000&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;requires&quot;:[{&quot;!&quot;:&quot;line-image&quot;}]},&quot;line-translate&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;value&quot;:&quot;number&quot;,&quot;length&quot;:2,&quot;default&quot;:[0,0],&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;The geometry&#039;s offset. Values are [x, y] where negatives indicate left and up, respectively.&quot;},&quot;line-translate-anchor&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;map&quot;,&quot;viewport&quot;],&quot;doc&quot;:&quot;Control whether the translation is relative to the map (north) or viewport (screen)&quot;,&quot;default&quot;:&quot;map&quot;,&quot;requires&quot;:[&quot;line-translate&quot;]},&quot;line-width&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:1,&quot;minimum&quot;:0,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;Stroke thickness.&quot;},&quot;line-gap-width&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;minimum&quot;:0,&quot;doc&quot;:&quot;Draws a line casing outside of a line&#039;s actual path. Value indicates the width of the inner gap.&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;},&quot;line-blur&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;minimum&quot;:0,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;Blur applied to the line, in pixels.&quot;},&quot;line-dasharray&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;value&quot;:&quot;number&quot;,&quot;doc&quot;:&quot;Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width.&quot;,&quot;minimum&quot;:0,&quot;transition&quot;:true,&quot;units&quot;:&quot;line widths&quot;,&quot;requires&quot;:[{&quot;!&quot;:&quot;line-image&quot;}]},&quot;line-image&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;transition&quot;:true,&quot;doc&quot;:&quot;Name of image in sprite to use for drawing image lines.&quot;}},&quot;paint_symbol&quot;:{&quot;icon-opacity&quot;:{&quot;doc&quot;:&quot;The opacity at which the icon will be drawn.&quot;,&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:1,&quot;minimum&quot;:0,&quot;maximum&quot;:1,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-size&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:1,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;doc&quot;:&quot;Scale factor for icon. 1 is original size, 3 triples the size.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-color&quot;:{&quot;type&quot;:&quot;color&quot;,&quot;default&quot;:&quot;#000000&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;doc&quot;:&quot;The color of the icon. This can only be used with sdf icons.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-halo-color&quot;:{&quot;type&quot;:&quot;color&quot;,&quot;default&quot;:&quot;rgba(0, 0, 0, 0)&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;doc&quot;:&quot;The color of the icon&#039;s halo. Icon halos can only be used with sdf icons.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-halo-width&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;minimum&quot;:0,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;Distance of halo to the icon outline.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-halo-blur&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;minimum&quot;:0,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;Fade out the halo towards the outside.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-translate&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;value&quot;:&quot;number&quot;,&quot;length&quot;:2,&quot;default&quot;:[0,0],&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;An icon&#039;s offset distance. Values are [x, y] where negatives indicate left and up, respectively.&quot;,&quot;requires&quot;:[&quot;icon-image&quot;]},&quot;icon-translate-anchor&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;map&quot;,&quot;viewport&quot;],&quot;doc&quot;:&quot;Control whether the translation is relative to the map (north) or viewport (screen)&quot;,&quot;default&quot;:&quot;map&quot;,&quot;requires&quot;:[&quot;icon-image&quot;,&quot;icon-translate&quot;]},&quot;text-opacity&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;doc&quot;:&quot;The opacity at which the text will be drawn.&quot;,&quot;default&quot;:1,&quot;minimum&quot;:0,&quot;maximum&quot;:1,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-size&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:16,&quot;minimum&quot;:0,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;Font size. If unspecified, the text will be as big as allowed by the layer definition.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-color&quot;:{&quot;type&quot;:&quot;color&quot;,&quot;doc&quot;:&quot;The color with which the text will be drawn.&quot;,&quot;default&quot;:&quot;#000000&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-halo-color&quot;:{&quot;type&quot;:&quot;color&quot;,&quot;default&quot;:&quot;rgba(0, 0, 0, 0)&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;doc&quot;:&quot;The color of the text&#039;s halo, which helps it stand out from backgrounds.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-halo-width&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;minimum&quot;:0,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-halo-blur&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;minimum&quot;:0,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;The halo&#039;s fadeout distance towards the outside.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-translate&quot;:{&quot;type&quot;:&quot;array&quot;,&quot;value&quot;:&quot;number&quot;,&quot;length&quot;:2,&quot;default&quot;:[0,0],&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;pixels&quot;,&quot;doc&quot;:&quot;Label offset. Values are [x, y] where negatives indicate left and up, respectively.&quot;,&quot;requires&quot;:[&quot;text-field&quot;]},&quot;text-translate-anchor&quot;:{&quot;type&quot;:&quot;enum&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;values&quot;:[&quot;map&quot;,&quot;viewport&quot;],&quot;doc&quot;:&quot;Control whether the translation is relative to the map (north) or viewport (screen)&quot;,&quot;default&quot;:&quot;map&quot;,&quot;requires&quot;:[&quot;text-field&quot;,&quot;text-translate&quot;]}},&quot;paint_raster&quot;:{&quot;raster-opacity&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;doc&quot;:&quot;The opacity at which the image will be drawn.&quot;,&quot;default&quot;:1,&quot;minimum&quot;:0,&quot;maximum&quot;:1,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true},&quot;raster-hue-rotate&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;period&quot;:360,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;degrees&quot;,&quot;doc&quot;:&quot;Rotates hues around the color wheel.&quot;},&quot;raster-brightness-min&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;Increase or reduce the brightness of the image. The value is the minimum brightness.&quot;,&quot;default&quot;:0,&quot;minimum&quot;:0,&quot;maximum&quot;:1,&quot;transition&quot;:true},&quot;raster-brightness-max&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;doc&quot;:&quot;Increase or reduce the brightness of the image. The value is the maximum brightness.&quot;,&quot;default&quot;:1,&quot;minimum&quot;:0,&quot;maximum&quot;:1,&quot;transition&quot;:true},&quot;raster-saturation&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;doc&quot;:&quot;Increase or reduce the saturation of the image.&quot;,&quot;default&quot;:0,&quot;minimum&quot;:-1,&quot;maximum&quot;:1,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true},&quot;raster-contrast&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;doc&quot;:&quot;Increase or reduce the contrast of the image.&quot;,&quot;default&quot;:0,&quot;minimum&quot;:-1,&quot;maximum&quot;:1,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true},&quot;raster-fade-duration&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:300,&quot;minimum&quot;:0,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;units&quot;:&quot;milliseconds&quot;,&quot;doc&quot;:&quot;Fade duration when a new tile is added.&quot;}},&quot;paint_background&quot;:{&quot;background-color&quot;:{&quot;type&quot;:&quot;color&quot;,&quot;default&quot;:&quot;#000000&quot;,&quot;doc&quot;:&quot;The color with which the background will be drawn.&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true,&quot;requires&quot;:[{&quot;!&quot;:&quot;background-image&quot;}]},&quot;background-image&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;function&quot;:&quot;piecewise-constant&quot;,&quot;transition&quot;:true,&quot;doc&quot;:&quot;Optionally an image which is drawn as the background.&quot;},&quot;background-opacity&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:1,&quot;minimum&quot;:0,&quot;maximum&quot;:1,&quot;doc&quot;:&quot;The opacity at which the background will be drawn.&quot;,&quot;function&quot;:&quot;interpolated&quot;,&quot;transition&quot;:true}},&quot;transition&quot;:{&quot;duration&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:300,&quot;minimum&quot;:0,&quot;units&quot;:&quot;milliseconds&quot;,&quot;doc&quot;:&quot;Time allotted for transitions to complete.&quot;},&quot;delay&quot;:{&quot;type&quot;:&quot;number&quot;,&quot;default&quot;:0,&quot;minimum&quot;:0,&quot;units&quot;:&quot;milliseconds&quot;,&quot;doc&quot;:&quot;Length of time before a transition begins.&quot;}}}
},{}],115:[function(require,module,exports){
    &quot;use strict&quot;;function Buffer(t){var e;t&amp;&amp;t.length&amp;&amp;(e=t,t=e.length);var r=new Uint8Array(t||0);return e&amp;&amp;r.set(e),r.readUInt32LE=BufferMethods.readUInt32LE,r.writeUInt32LE=BufferMethods.writeUInt32LE,r.readInt32LE=BufferMethods.readInt32LE,r.writeInt32LE=BufferMethods.writeInt32LE,r.readFloatLE=BufferMethods.readFloatLE,r.writeFloatLE=BufferMethods.writeFloatLE,r.readDoubleLE=BufferMethods.readDoubleLE,r.writeDoubleLE=BufferMethods.writeDoubleLE,r.toString=BufferMethods.toString,r.write=BufferMethods.write,r.slice=BufferMethods.slice,r.copy=BufferMethods.copy,r._isBuffer=!0,r}function encodeString(t){for(var e,r,n=t.length,i=[],o=0;n&gt;o;o++){if(e=t.charCodeAt(o),e&gt;55295&amp;&amp;57344&gt;e){if(!r){e&gt;56319||o+1===n?i.push(239,191,189):r=e;continue}if(56320&gt;e){i.push(239,191,189),r=e;continue}e=r-55296&lt;&lt;10|e-56320|65536,r=null}else r&amp;&amp;(i.push(239,191,189),r=null);128&gt;e?i.push(e):2048&gt;e?i.push(e&gt;&gt;6|192,63&amp;e|128):65536&gt;e?i.push(e&gt;&gt;12|224,e&gt;&gt;6&amp;63|128,63&amp;e|128):i.push(e&gt;&gt;18|240,e&gt;&gt;12&amp;63|128,e&gt;&gt;6&amp;63|128,63&amp;e|128)}return i}module.exports=Buffer;var ieee754=require(&quot;ieee754&quot;),BufferMethods,lastStr,lastStrEncoded;BufferMethods={readUInt32LE:function(t){return(this[t]|this[t+1]&lt;&lt;8|this[t+2]&lt;&lt;16)+16777216*this[t+3]},writeUInt32LE:function(t,e){this[e]=t,this[e+1]=t&gt;&gt;&gt;8,this[e+2]=t&gt;&gt;&gt;16,this[e+3]=t&gt;&gt;&gt;24},readInt32LE:function(t){return(this[t]|this[t+1]&lt;&lt;8|this[t+2]&lt;&lt;16)+(this[t+3]&lt;&lt;24)},readFloatLE:function(t){return ieee754.read(this,t,!0,23,4)},readDoubleLE:function(t){return ieee754.read(this,t,!0,52,8)},writeFloatLE:function(t,e){return ieee754.write(this,t,e,!0,23,4)},writeDoubleLE:function(t,e){return ieee754.write(this,t,e,!0,52,8)},toString:function(t,e,r){var n=&quot;&quot;,i=&quot;&quot;;e=e||0,r=Math.min(this.length,r||this.length);for(var o=e;r&gt;o;o++){var u=this[o];127&gt;=u?(n+=decodeURIComponent(i)+String.fromCharCode(u),i=&quot;&quot;):i+=&quot;%&quot;+u.toString(16)}return n+=decodeURIComponent(i)},write:function(t,e){for(var r=t===lastStr?lastStrEncoded:encodeString(t),n=0;n&lt;r.length;n++)this[e+n]=r[n]},slice:function(t,e){return this.subarray(t,e)},copy:function(t,e){e=e||0;for(var r=0;r&lt;this.length;r++)t[e+r]=this[r]}},BufferMethods.writeInt32LE=BufferMethods.writeUInt32LE,Buffer.byteLength=function(t){return lastStr=t,lastStrEncoded=encodeString(t),lastStrEncoded.length},Buffer.isBuffer=function(t){return!(!t||!t._isBuffer)};
},{&quot;ieee754&quot;:117}],116:[function(require,module,exports){
    (function (global){
        &quot;use strict&quot;;function Pbf(t){this.buf=Buffer.isBuffer(t)?t:new Buffer(t||0),this.pos=0,this.length=this.buf.length}function writePackedVarint(t,i){for(var e=0;e&lt;t.length;e++)i.writeVarint(t[e])}function writePackedSVarint(t,i){for(var e=0;e&lt;t.length;e++)i.writeSVarint(t[e])}function writePackedFloat(t,i){for(var e=0;e&lt;t.length;e++)i.writeFloat(t[e])}function writePackedDouble(t,i){for(var e=0;e&lt;t.length;e++)i.writeDouble(t[e])}function writePackedBoolean(t,i){for(var e=0;e&lt;t.length;e++)i.writeBoolean(t[e])}function writePackedFixed32(t,i){for(var e=0;e&lt;t.length;e++)i.writeFixed32(t[e])}function writePackedSFixed32(t,i){for(var e=0;e&lt;t.length;e++)i.writeSFixed32(t[e])}function writePackedFixed64(t,i){for(var e=0;e&lt;t.length;e++)i.writeFixed64(t[e])}function writePackedSFixed64(t,i){for(var e=0;e&lt;t.length;e++)i.writeSFixed64(t[e])}module.exports=Pbf;var Buffer=global.Buffer||require(&quot;./buffer&quot;);Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,POW_2_63=Math.pow(2,63);Pbf.prototype={destroy:function(){this.buf=null},readFields:function(t,i,e){for(e=e||this.length;this.pos&lt;e;){var r=this.readVarint(),s=r&gt;&gt;3,n=this.pos;t(s,i,this),this.pos===n&amp;&amp;this.skip(r)}return i},readMessage:function(t,i){return this.readFields(t,i,this.readVarint()+this.pos)},readFixed32:function(){var t=this.buf.readUInt32LE(this.pos);return this.pos+=4,t},readSFixed32:function(){var t=this.buf.readInt32LE(this.pos);return this.pos+=4,t},readFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,t},readSFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,t},readFloat:function(){var t=this.buf.readFloatLE(this.pos);return this.pos+=4,t},readDouble:function(){var t=this.buf.readDoubleLE(this.pos);return this.pos+=8,t},readVarint:function(){var t,i,e,r,s,n,o=this.buf;if(e=o[this.pos++],128&gt;e)return e;if(e=127&amp;e,r=o[this.pos++],128&gt;r)return e|r&lt;&lt;7;if(r=(127&amp;r)&lt;&lt;7,s=o[this.pos++],128&gt;s)return e|r|s&lt;&lt;14;if(s=(127&amp;s)&lt;&lt;14,n=o[this.pos++],128&gt;n)return e|r|s|n&lt;&lt;21;if(t=e|r|s|(127&amp;n)&lt;&lt;21,i=o[this.pos++],t+=268435456*(127&amp;i),128&gt;i)return t;if(i=o[this.pos++],t+=34359738368*(127&amp;i),128&gt;i)return t;if(i=o[this.pos++],t+=4398046511104*(127&amp;i),128&gt;i)return t;if(i=o[this.pos++],t+=562949953421312*(127&amp;i),128&gt;i)return t;if(i=o[this.pos++],t+=72057594037927940*(127&amp;i),128&gt;i)return t;if(i=o[this.pos++],t+=0x8000000000000000*(127&amp;i),128&gt;i)return t;throw new Error(&quot;Expected varint not more than 10 bytes&quot;)},readVarint64:function(){var t=this.pos,i=this.readVarint();if(POW_2_63&gt;i)return i;for(var e=this.pos-2;255===this.buf[e];)e--;t&gt;e&amp;&amp;(e=t),i=0;for(var r=0;e-t+1&gt;r;r++){var s=127&amp;~this.buf[t+r];i+=4&gt;r?s&lt;&lt;7*r:s*Math.pow(2,7*r)}return-i-1},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,i=this.buf.toString(&quot;utf8&quot;,this.pos,t);return this.pos=t,i},readBytes:function(){var t=this.readVarint()+this.pos,i=this.buf.slice(this.pos,t);return this.pos=t,i},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,i=[];this.pos&lt;t;)i.push(this.readVarint());return i},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,i=[];this.pos&lt;t;)i.push(this.readSVarint());return i},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,i=[];this.pos&lt;t;)i.push(this.readBoolean());return i},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,i=[];this.pos&lt;t;)i.push(this.readFloat());return i},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,i=[];this.pos&lt;t;)i.push(this.readDouble());return i},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,i=[];this.pos&lt;t;)i.push(this.readFixed32());return i},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,i=[];this.pos&lt;t;)i.push(this.readSFixed32());return i},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,i=[];this.pos&lt;t;)i.push(this.readFixed64());return i},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,i=[];this.pos&lt;t;)i.push(this.readSFixed64());return i},skip:function(t){var i=7&amp;t;if(i===Pbf.Varint)for(;this.buf[this.pos++]&gt;127;);else if(i===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Pbf.Fixed32)this.pos+=4;else{if(i!==Pbf.Fixed64)throw new Error(&quot;Unimplemented type: &quot;+i);this.pos+=8}},writeTag:function(t,i){this.writeVarint(t&lt;&lt;3|i)},realloc:function(t){for(var i=this.length||16;i&lt;this.pos+t;)i*=2;if(i!==this.length){var e=new Buffer(i);this.buf.copy(e),this.buf=e,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(t){this.realloc(4),this.buf.writeUInt32LE(t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),this.buf.writeInt32LE(t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&amp;t,this.pos),this.buf.writeUInt32LE(Math.floor(t*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&amp;t,this.pos),this.buf.writeInt32LE(Math.floor(t*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t,127&gt;=t)this.realloc(1),this.buf[this.pos++]=t;else if(16383&gt;=t)this.realloc(2),this.buf[this.pos++]=t&gt;&gt;&gt;0&amp;127|128,this.buf[this.pos++]=t&gt;&gt;&gt;7&amp;127;else if(2097151&gt;=t)this.realloc(3),this.buf[this.pos++]=t&gt;&gt;&gt;0&amp;127|128,this.buf[this.pos++]=t&gt;&gt;&gt;7&amp;127|128,this.buf[this.pos++]=t&gt;&gt;&gt;14&amp;127;else if(268435455&gt;=t)this.realloc(4),this.buf[this.pos++]=t&gt;&gt;&gt;0&amp;127|128,this.buf[this.pos++]=t&gt;&gt;&gt;7&amp;127|128,this.buf[this.pos++]=t&gt;&gt;&gt;14&amp;127|128,this.buf[this.pos++]=t&gt;&gt;&gt;21&amp;127;else{for(var i=this.pos;t&gt;=128;)this.realloc(1),this.buf[this.pos++]=255&amp;t|128,t/=128;if(this.realloc(1),this.buf[this.pos++]=0|t,this.pos-i&gt;10)throw new Error(&quot;Given varint doesn&#039;t fit into 10 bytes&quot;)}},writeSVarint:function(t){this.writeVarint(0&gt;t?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t);var i=Buffer.byteLength(t);this.writeVarint(i),this.realloc(i),this.buf.write(t,this.pos),this.pos+=i},writeFloat:function(t){this.realloc(4),this.buf.writeFloatLE(t,this.pos),this.pos+=4},writeDouble:function(t){this.realloc(8),this.buf.writeDoubleLE(t,this.pos),this.pos+=8},writeBytes:function(t){var i=t.length;this.writeVarint(i),this.realloc(i);for(var e=0;i&gt;e;e++)this.buf[this.pos++]=t[e]},writeMessage:function(t,i,e){this.writeTag(t,Pbf.Bytes),this.pos++;var r=this.pos;i(e,this);var s=this.pos-r,n=127&gt;=s?1:16383&gt;=s?2:2097151&gt;=s?3:268435455&gt;=s?4:Math.ceil(Math.log(s)/(7*Math.LN2));if(n&gt;1){this.realloc(n-1);for(var o=this.pos-1;o&gt;=r;o--)this.buf[o+n-1]=this.buf[o]}this.pos=r-1,this.writeVarint(s),this.pos+=s},writePackedVarint:function(t,i){this.writeMessage(t,writePackedVarint,i)},writePackedSVarint:function(t,i){this.writeMessage(t,writePackedSVarint,i)},writePackedBoolean:function(t,i){this.writeMessage(t,writePackedBoolean,i)},writePackedFloat:function(t,i){this.writeMessage(t,writePackedFloat,i)},writePackedDouble:function(t,i){this.writeMessage(t,writePackedDouble,i)},writePackedFixed32:function(t,i){this.writeMessage(t,writePackedFixed32,i)},writePackedSFixed32:function(t,i){this.writeMessage(t,writePackedSFixed32,i)},writePackedFixed64:function(t,i){this.writeMessage(t,writePackedFixed64,i)},writePackedSFixed64:function(t,i){this.writeMessage(t,writePackedSFixed64,i)},writeBytesField:function(t,i){this.writeTag(t,Pbf.Bytes),this.writeBytes(i)},writeFixed32Field:function(t,i){this.writeTag(t,Pbf.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(t,i){this.writeTag(t,Pbf.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(t,i){this.writeTag(t,Pbf.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(t,i){this.writeTag(t,Pbf.Fixed64),this.writeSFixed64(i)},writeVarintField:function(t,i){this.writeTag(t,Pbf.Varint),this.writeVarint(i)},writeSVarintField:function(t,i){this.writeTag(t,Pbf.Varint),this.writeSVarint(i)},writeStringField:function(t,i){this.writeTag(t,Pbf.Bytes),this.writeString(i)},writeFloatField:function(t,i){this.writeTag(t,Pbf.Fixed32),this.writeFloat(i)},writeDoubleField:function(t,i){this.writeTag(t,Pbf.Fixed64),this.writeDouble(i)},writeBooleanField:function(t,i){this.writeVarintField(t,Boolean(i))}};
    }).call(this,typeof global !== &quot;undefined&quot; ? global : typeof self !== &quot;undefined&quot; ? self : typeof window !== &quot;undefined&quot; ? window : {})

},{&quot;./buffer&quot;:115}],117:[function(require,module,exports){
    exports.read=function(o,t,a,r,h){var M,p,w=8*h-r-1,f=(1&lt;&lt;w)-1,e=f&gt;&gt;1,i=-7,n=a?h-1:0,s=a?-1:1,N=o[t+n];for(n+=s,M=N&amp;(1&lt;&lt;-i)-1,N&gt;&gt;=-i,i+=w;i&gt;0;M=256*M+o[t+n],n+=s,i-=8);for(p=M&amp;(1&lt;&lt;-i)-1,M&gt;&gt;=-i,i+=r;i&gt;0;p=256*p+o[t+n],n+=s,i-=8);if(0===M)M=1-e;else{if(M===f)return p?0/0:(N?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(N?-1:1)*p*Math.pow(2,M-r)},exports.write=function(o,t,a,r,h,M){var p,w,f,e=8*M-h-1,i=(1&lt;&lt;e)-1,n=i&gt;&gt;1,s=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,N=r?0:M-1,u=r?1:-1,l=0&gt;t||0===t&amp;&amp;0&gt;1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(w=isNaN(t)?1:0,p=i):(p=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-p))&lt;1&amp;&amp;(p--,f*=2),t+=p+n&gt;=1?s/f:s*Math.pow(2,1-n),t*f&gt;=2&amp;&amp;(p++,f/=2),p+n&gt;=i?(w=0,p=i):p+n&gt;=1?(w=(t*f-1)*Math.pow(2,h),p+=n):(w=t*Math.pow(2,n-1)*Math.pow(2,h),p=0));h&gt;=8;o[a+N]=255&amp;w,N+=u,w/=256,h-=8);for(p=p&lt;&lt;h|w,e+=h;e&gt;0;o[a+N]=255&amp;p,N+=u,p/=256,e-=8);o[a+N-u]|=128*l};
},{}],118:[function(require,module,exports){
    &quot;use strict&quot;;function Point(t,n){this.x=t,this.y=n}module.exports=Point,Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&amp;&amp;this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var n=t.x-this.x,i=t.y-this.y;return n*n+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,n){return Math.atan2(this.x*n-this.y*t,this.x*t+this.y*n)},_matMult:function(t){var n=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=n,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var n=Math.cos(t),i=Math.sin(t),s=n*this.x-i*this.y,r=i*this.x+n*this.y;return this.x=s,this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(t){return t instanceof Point?t:Array.isArray(t)?new Point(t[0],t[1]):t};
},{}],119:[function(require,module,exports){
    !function(){&quot;use strict&quot;;function t(i,n){return this instanceof t?(this._maxEntries=Math.max(4,i||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&amp;&amp;this._initFormat(n),void this.clear()):new t(i,n)}function i(t,i){t.bbox=n(t,0,t.children.length,i)}function n(t,i,n,r){for(var o,a=h(),s=i;n&gt;s;s++)o=t.children[s],e(a,t.leaf?r(o):o.bbox);return a}function h(){return[1/0,1/0,-(1/0),-(1/0)]}function e(t,i){return t[0]=Math.min(t[0],i[0]),t[1]=Math.min(t[1],i[1]),t[2]=Math.max(t[2],i[2]),t[3]=Math.max(t[3],i[3]),t}function r(t,i){return t.bbox[0]-i.bbox[0]}function o(t,i){return t.bbox[1]-i.bbox[1]}function a(t){return(t[2]-t[0])*(t[3]-t[1])}function s(t){return t[2]-t[0]+(t[3]-t[1])}function l(t,i){return(Math.max(i[2],t[2])-Math.min(i[0],t[0]))*(Math.max(i[3],t[3])-Math.min(i[1],t[1]))}function u(t,i){var n=Math.max(t[0],i[0]),h=Math.max(t[1],i[1]),e=Math.min(t[2],i[2]),r=Math.min(t[3],i[3]);return Math.max(0,e-n)*Math.max(0,r-h)}function c(t,i){return t[0]&lt;=i[0]&amp;&amp;t[1]&lt;=i[1]&amp;&amp;i[2]&lt;=t[2]&amp;&amp;i[3]&lt;=t[3]}function f(t,i){return i[0]&lt;=t[2]&amp;&amp;i[1]&lt;=t[3]&amp;&amp;i[2]&gt;=t[0]&amp;&amp;i[3]&gt;=t[1]}function d(t,i,n,h,e){for(var r,o=[i,n];o.length;)n=o.pop(),i=o.pop(),h&gt;=n-i||(r=i+Math.ceil((n-i)/h/2)*h,x(t,i,n,r,e),o.push(i,r,r,n))}function x(t,i,n,h,e){for(var r,o,a,s,l,u,c,f,d;n&gt;i;){for(n-i&gt;600&amp;&amp;(r=n-i+1,o=h-i+1,a=Math.log(r),s=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*s*(r-s)/r)*(0&gt;o-r/2?-1:1),u=Math.max(i,Math.floor(h-o*s/r+l)),c=Math.min(n,Math.floor(h+(r-o)*s/r+l)),x(t,u,c,h,e)),f=t[h],o=i,d=n,p(t,i,h),e(t[n],f)&gt;0&amp;&amp;p(t,i,n);d&gt;o;){for(p(t,o,d),o++,d--;e(t[o],f)&lt;0;)o++;for(;e(t[d],f)&gt;0;)d--}0===e(t[i],f)?p(t,i,d):(d++,p(t,d,n)),h&gt;=d&amp;&amp;(i=d+1),d&gt;=h&amp;&amp;(n=d-1)}}function p(t,i,n){var h=t[i];t[i]=t[n],t[n]=h}t.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],h=this.toBBox;if(!f(t,i.bbox))return n;for(var e,r,o,a,s=[];i;){for(e=0,r=i.children.length;r&gt;e;e++)o=i.children[e],a=i.leaf?h(o):o.bbox,f(t,a)&amp;&amp;(i.leaf?n.push(o):c(t,a)?this._all(o,n):s.push(o));i=s.pop()}return n},load:function(t){if(!t||!t.length)return this;if(t.length&lt;this._minEntries){for(var i=0,n=t.length;n&gt;i;i++)this.insert(t[i]);return this}var h=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===h.height)this._splitRoot(this.data,h);else{if(this.data.height&lt;h.height){var e=this.data;this.data=h,h=e}this._insert(h,this.data.height-h.height-1,!0)}else this.data=h;return this},insert:function(t){return t&amp;&amp;this._insert(t,this.data.height-1),this},clear:function(){return this.data={children:[],height:1,bbox:h(),leaf:!0},this},remove:function(t){if(!t)return this;for(var i,n,h,e,r=this.data,o=this.toBBox(t),a=[],s=[];r||a.length;){if(r||(r=a.pop(),n=a[a.length-1],i=s.pop(),e=!0),r.leaf&amp;&amp;(h=r.children.indexOf(t),-1!==h))return r.children.splice(h,1),a.push(r),this._condense(a),this;e||r.leaf||!c(r.bbox,o)?n?(i++,r=n.children[i],e=!1):r=null:(a.push(r),s.push(i),i=0,n=r,r=r.children[0])}return this},toBBox:function(t){return t},compareMinX:function(t,i){return t[0]-i[0]},compareMinY:function(t,i){return t[1]-i[1]},toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,n,h,e){var r,o=h-n+1,a=this._maxEntries;if(a&gt;=o)return r={children:t.slice(n,h+1),height:1,bbox:null,leaf:!0},i(r,this.toBBox),r;e||(e=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,e-1))),r={children:[],height:e,bbox:null};var s,l,u,c,f=Math.ceil(o/a),x=f*Math.ceil(Math.sqrt(a));for(d(t,n,h,x,this.compareMinX),s=n;h&gt;=s;s+=x)for(u=Math.min(s+x-1,h),d(t,s,u,f,this.compareMinY),l=s;u&gt;=l;l+=f)c=Math.min(l+f-1,u),r.children.push(this._build(t,l,c,e-1));return i(r,this.toBBox),r},_chooseSubtree:function(t,i,n,h){for(var e,r,o,s,u,c,f,d;;){if(h.push(i),i.leaf||h.length-1===n)break;for(f=d=1/0,e=0,r=i.children.length;r&gt;e;e++)o=i.children[e],u=a(o.bbox),c=l(t,o.bbox)-u,d&gt;c?(d=c,f=f&gt;u?u:f,s=o):c===d&amp;&amp;f&gt;u&amp;&amp;(f=u,s=o);i=s}return i},_insert:function(t,i,n){var h=this.toBBox,r=n?t.bbox:h(t),o=[],a=this._chooseSubtree(r,this.data,i,o);for(a.children.push(t),e(a.bbox,r);i&gt;=0&amp;&amp;o[i].children.length&gt;this._maxEntries;)this._split(o,i),i--;this._adjustParentBBoxes(r,o,i)},_split:function(t,n){var h=t[n],e=h.children.length,r=this._minEntries;this._chooseSplitAxis(h,r,e);var o={children:h.children.splice(this._chooseSplitIndex(h,r,e)),height:h.height};h.leaf&amp;&amp;(o.leaf=!0),i(h,this.toBBox),i(o,this.toBBox),n?t[n-1].children.push(o):this._splitRoot(h,o)},_splitRoot:function(t,n){this.data={children:[t,n],height:t.height+1},i(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,h){var e,r,o,s,l,c,f,d;for(c=f=1/0,e=i;h-i&gt;=e;e++)r=n(t,0,e,this.toBBox),o=n(t,e,h,this.toBBox),s=u(r,o),l=a(r)+a(o),c&gt;s?(c=s,d=e,f=f&gt;l?l:f):s===c&amp;&amp;f&gt;l&amp;&amp;(f=l,d=e);return d},_chooseSplitAxis:function(t,i,n){var h=t.leaf?this.compareMinX:r,e=t.leaf?this.compareMinY:o,a=this._allDistMargin(t,i,n,h),s=this._allDistMargin(t,i,n,e);s&gt;a&amp;&amp;t.children.sort(h)},_allDistMargin:function(t,i,h,r){t.children.sort(r);var o,a,l=this.toBBox,u=n(t,0,i,l),c=n(t,h-i,h,l),f=s(u)+s(c);for(o=i;h-i&gt;o;o++)a=t.children[o],e(u,t.leaf?l(a):a.bbox),f+=s(u);for(o=h-i-1;o&gt;=i;o--)a=t.children[o],e(c,t.leaf?l(a):a.bbox),f+=s(c);return f},_adjustParentBBoxes:function(t,i,n){for(var h=n;h&gt;=0;h--)e(i[h].bbox,t)},_condense:function(t){for(var n,h=t.length-1;h&gt;=0;h--)0===t[h].children.length?h&gt;0?(n=t[h-1].children,n.splice(n.indexOf(t[h]),1)):this.clear():i(t[h],this.toBBox)},_initFormat:function(t){var i=[&quot;return a&quot;,&quot; - b&quot;,&quot;;&quot;];this.compareMinX=new Function(&quot;a&quot;,&quot;b&quot;,i.join(t[0])),this.compareMinY=new Function(&quot;a&quot;,&quot;b&quot;,i.join(t[1])),this.toBBox=new Function(&quot;a&quot;,&quot;return [a&quot;+t.join(&quot;, a&quot;)+&quot;];&quot;)}},&quot;function&quot;==typeof define&amp;&amp;define.amd?define(&quot;rbush&quot;,function(){return t}):&quot;undefined&quot;!=typeof module?module.exports=t:&quot;undefined&quot;!=typeof self?self.rbush=t:window.rbush=t}();
},{}],120:[function(require,module,exports){
    void function(e,r){&quot;function&quot;==typeof define&amp;&amp;define.amd?define(r):&quot;object&quot;==typeof exports?module.exports=r():e.resolveUrl=r()}(this,function(){function e(){var e=arguments.length;if(0===e)throw new Error(&quot;resolveUrl requires at least one argument; got none.&quot;);var r=document.createElement(&quot;base&quot;);if(r.href=arguments[0],1===e)return r.href;var t=document.getElementsByTagName(&quot;head&quot;)[0];t.insertBefore(r,t.firstChild);for(var n,o=document.createElement(&quot;a&quot;),f=1;e&gt;f;f++)o.href=arguments[f],n=o.href,r.href=n;return t.removeChild(r),n}return e});
},{}],121:[function(require,module,exports){
    function UnitBezier(t,i,e,r){this.cx=3*t,this.bx=3*(e-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(r-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=e,this.p2y=r}module.exports=UnitBezier,UnitBezier.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},UnitBezier.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},UnitBezier.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},UnitBezier.prototype.solveCurveX=function(t,i){&quot;undefined&quot;==typeof i&amp;&amp;(i=1e-6);var e,r,s,h,n;for(s=t,n=0;8&gt;n;n++){if(h=this.sampleCurveX(s)-t,Math.abs(h)&lt;i)return s;var u=this.sampleCurveDerivativeX(s);if(Math.abs(u)&lt;1e-6)break;s-=h/u}if(e=0,r=1,s=t,e&gt;s)return e;if(s&gt;r)return r;for(;r&gt;e;){if(h=this.sampleCurveX(s),Math.abs(h-t)&lt;i)return s;t&gt;h?e=s:r=s,s=.5*(r-e)+e}return s},UnitBezier.prototype.solve=function(t,i){return this.sampleCurveY(this.solveCurveX(t,i))};
},{}],122:[function(require,module,exports){
    module.exports.VectorTile=require(&quot;./lib/vectortile.js&quot;),module.exports.VectorTileFeature=require(&quot;./lib/vectortilefeature.js&quot;),module.exports.VectorTileLayer=require(&quot;./lib/vectortilelayer.js&quot;);
},{&quot;./lib/vectortile.js&quot;:123,&quot;./lib/vectortilefeature.js&quot;:124,&quot;./lib/vectortilelayer.js&quot;:125}],123:[function(require,module,exports){
    &quot;use strict&quot;;function VectorTile(e,r){this.layers=e.readFields(readTile,{},r)}function readTile(e,r,i){if(3===e){var t=new VectorTileLayer(i,i.readVarint()+i.pos);t.length&amp;&amp;(r[t.name]=t)}}var VectorTileLayer=require(&quot;./vectortilelayer&quot;);module.exports=VectorTile;
},{&quot;./vectortilelayer&quot;:125}],124:[function(require,module,exports){
    &quot;use strict&quot;;function VectorTileFeature(e,t,r,i,o){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=o,e.readFields(readFeature,this,t)}function readFeature(e,t,r){1==e?t._id=r.readVarint():2==e?readTag(r,t):3==e?t.type=r.readVarint():4==e&amp;&amp;(t._geometry=r.pos)}function readTag(e,t){for(var r=e.readVarint()+e.pos;e.pos&lt;r;){var i=t._keys[e.readVarint()],o=t._values[e.readVarint()];t.properties[i]=o}}var Point=require(&quot;point-geometry&quot;);module.exports=VectorTileFeature,VectorTileFeature.types=[&quot;Unknown&quot;,&quot;Point&quot;,&quot;LineString&quot;,&quot;Polygon&quot;],VectorTileFeature.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,i=1,o=0,a=0,n=0,s=[];e.pos&lt;r;){if(!o){var p=e.readVarint();i=7&amp;p,o=p&gt;&gt;3}if(o--,1===i||2===i)a+=e.readSVarint(),n+=e.readSVarint(),1===i&amp;&amp;(t&amp;&amp;s.push(t),t=[]),t.push(new Point(a,n));else{if(7!==i)throw new Error(&quot;unknown command &quot;+i);t&amp;&amp;t.push(t[0].clone())}}return t&amp;&amp;s.push(t),s},VectorTileFeature.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,n=1/0,s=-(1/0),p=1/0,h=-(1/0);e.pos&lt;t;){if(!i){var u=e.readVarint();r=7&amp;u,i=u&gt;&gt;3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),n&gt;o&amp;&amp;(n=o),o&gt;s&amp;&amp;(s=o),p&gt;a&amp;&amp;(p=a),a&gt;h&amp;&amp;(h=a);else if(7!==r)throw new Error(&quot;unknown command &quot;+r)}return[n,p,s,h]},VectorTileFeature.prototype.toGeoJSON=function(e,t,r){for(var i=this.extent*Math.pow(2,r),o=this.extent*e,a=this.extent*t,n=this.loadGeometry(),s=VectorTileFeature.types[this.type],p=0;p&lt;n.length;p++)for(var h=n[p],u=0;u&lt;h.length;u++){var d=h[u],l=180-360*(d.y+a)/i;h[u]=[360*(d.x+o)/i-180,360/Math.PI*Math.atan(Math.exp(l*Math.PI/180))-90]}return&quot;Point&quot;===s&amp;&amp;1===n.length?n=n[0][0]:&quot;Point&quot;===s?(n=n[0],s=&quot;MultiPoint&quot;):&quot;LineString&quot;===s&amp;&amp;1===n.length?n=n[0]:&quot;LineString&quot;===s&amp;&amp;(s=&quot;MultiLineString&quot;),{type:&quot;Feature&quot;,geometry:{type:s,coordinates:n},properties:this.properties}};
},{&quot;point-geometry&quot;:118}],125:[function(require,module,exports){
    &quot;use strict&quot;;function VectorTileLayer(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(readLayer,this,t),this.length=this._features.length}function readLayer(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&amp;&amp;t._values.push(readValueMessage(r))}function readValueMessage(e){for(var t=null,r=e.readVarint()+e.pos;e.pos&lt;r;){var a=e.readVarint()&gt;&gt;3;t=1===a?e.readString():2===a?e.readFloat():3===a?e.readDouble():4===a?e.readVarint64():5===a?e.readVarint():6===a?e.readSVarint():7===a?e.readBoolean():null}return t}var VectorTileFeature=require(&quot;./vectortilefeature.js&quot;);module.exports=VectorTileLayer,VectorTileLayer.prototype.feature=function(e){if(0&gt;e||e&gt;=this._features.length)throw new Error(&quot;feature index out of bounds&quot;);this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new VectorTileFeature(this._pbf,t,this.extent,this._keys,this._values)};
},{&quot;./vectortilefeature.js&quot;:124}],126:[function(require,module,exports){
    var bundleFn=arguments[3],sources=arguments[4],cache=arguments[5],stringify=JSON.stringify;module.exports=function(r){for(var e,t=Object.keys(cache),n=0,o=t.length;o&gt;n;n++){var i=t[n];if(cache[i].exports===r){e=i;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var s={},n=0,o=t.length;o&gt;n;n++){var i=t[n];s[i]=i}sources[e]=[Function([&quot;require&quot;,&quot;module&quot;,&quot;exports&quot;],&quot;(&quot;+r+&quot;)(self)&quot;),s]}var a=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={};u[e]=e,sources[a]=[Function([&quot;require&quot;],&quot;require(&quot;+stringify(e)+&quot;)(self)&quot;),u];var c=&quot;(&quot;+bundleFn+&quot;)({&quot;+Object.keys(sources).map(function(r){return stringify(r)+&quot;:[&quot;+sources[r][0]+&quot;,&quot;+stringify(sources[r][1])+&quot;]&quot;}).join(&quot;,&quot;)+&quot;},{},[&quot;+stringify(a)+&quot;])&quot;,f=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(f.createObjectURL(new Blob([c],{type:&quot;text/javascript&quot;})))};
},{}]},{},[22])(22)
});


//# sourceMappingURL=mapbox-gl.js.map</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
